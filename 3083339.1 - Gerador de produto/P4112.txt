
=============================================
Form: Inventory Issues - W4112A
Event: Form Variables
Event GUID: f57df761-a23a-11d0-a204-0000f6728a56
=============================================
frm_EV03_LoadSubledger [EV03]
frm_UITM_ItemNumber [UITM]
frm_DTAI_ErrorMsgID [DTAI]
frm_UOM1_PrimaryUOM [UOM1]
frm_TFLA_StandardUOMFlag [TFLA]
frm_TRQT_PrimaryQty [TRQT]
frm_UNCS_UnitCost [UNCS]
frm_CurrencyCode_CRCD [CRCD]
frm_Index_MATH01 [MATH01]
frm_MaxGridRows_MATH02 [MATH02]
frm_CacheCursor_GENLNG [GENLNG]
frm_CacheCursorConfig_GENLNG [GENLNG]
frm_QtyChanged_EV01 [EV01]
frm_CostChanged_EV01 [EV01]
frm_EV05_ExtendedCostEntered [EV05]
frm_PAID_PrevExtendedCost [PAID]
frm_EV10_DoNotCloseBatch [EV10]
frm_EV09_ValidateF4111DocNo [EV09]
frm_EV01_LastCacheRecord [EV01]
frm_LNID_CacheLineNumber [EV01]
frm_GENLNG_CacheCursor [EV01]
frm_CostMethod [LEDG]
frm_CostCenterSubsequent [MCUS]
frm_CostCenterConta [MCU]
frm_CompanyMCU [CO]
frm_CompanyConta [CO]
frm_Co_aux [CO]
frm_DtEstoque [DFYJ]
frm_UMChanged_EV11 [EV11]
frm_Media_Objects_Status [EV01]
frm_TQOH_WareHouseQuantity [TQOH]
frm_FromTo [FRTO]
frm_HoldGLDate_DGL [DGL]
frm_ProcessCloseBatch_EV01 [EV01]
grd_Old_ItemNumber [UITM]
grd_Old_UnitCost [UNCS]
frm_GLMBFVersion_VER [VER]
grd_cCostOverrideCode_CSTO [CSTO]
grd_cExtCostOverride_CSTO [CSTO]
grd_SavedExtendedCost_PAID [PAID]
frm_cBOMRecordFound_EV01 [EV01]
frm_mnSelectedGridRow_MATH01 [MATH01]
frm_cLevelAdded_EV01 [EV01]
frm_szUOMBatchQty_UOM [UOM]
frm_Reverse_CHAR [CHAR]
frm_RBSShortItem_ITM [ITM]
frm_TAM_GRID [MATH08]
frm_SY [SY]
frm_RT [RT]
frm_KY [KY]
frm_HIS_OBS [CHIS]
frm_UDC_HIST_PADRAO [DL02]
frm_HistoricoGCAA03 [AA03]
frm_ErroHistorico [AA01]
frm_AchouCerto [AA01]
frm_AUXObjectAccount_OBJ [OBJ]
frm_ExigeAA01 [AA01]
frm_HistoricoAA03 [AA03]
frm_CompanyHIS [CO]
frm_SubsidiaryHIS [SUB]
frm_AUXSubsidiary_SUB [SUB]
frm_ERRO [EV01]
frm_COD_ERRO [AA05]
frm_RBSCod_HistoricoAux_CHIS [CHIS]
frm_HIST4POS [EV01]
frm_RBS3PosRemark_AA03 [AA03]
frm_Cod_Historico [CHIS]
frm_F0911ObjectAccount_OBJ [OBJ]
frm_F0911Subsidiary_SUB [SUB]
frm_F0911CompanyKey_KCO [KCO]
frm_AUXCompany_CO [CO]
frm_F0911Key_JELN [JELN]
frm_F0911Key_EXTL [EXTL]
frm_F0911Key_LT [LT]
frm_UserId_USER [USER]
frm_DateUpdated_UPMJ [UPMJ]
frm_TimeLastUpdated_UPMT [UPMT]
frm_WorkStationId_JOBN [JOBN]
frm_ProgramId_PID [PID]
frm_LinhaF0911_JELN [JELN]
frm_KeyF0911_KCO [KCO]
frm_KeyF0911_DCT [DCT]
frm_KeyF0911_DOC [DOC]
frm_KeyF0911_JELN [JELN]
frm_KeyF0911_DGJ [DGJ]
frm_KeyF0911_ICU [ICU]
frm_KeyF0911_EXR [EXR]
frm_LinhaOBJDigitado_JELN [JELN]
frm_LineNumberGRID_LNID [LNID]
frm_KeyF0911_LNID [LNID]
frm_UniqueKeyIF4111_UKID [UKID]
frm_HistoricoF0911_EXR [EXR]
frm_AUXHistObrigatorio_AA01 [AA01]
frm_AUXCHisString_AA03 [AA03]
frm_GUARDASubsidiary_SUB [SUB]
frm_Cat20_R020 [R020]
frm_NroAlocacao_R3 [R3]
frm_Projeto [PROJE]
frm_Rubrica [RUBRI]
frm_NAlocacao [N001]
frm_NFatura [DOCD]
frm_HouveErro [AA04]
frm_IndExisteCtaInvestimentos [EV01]
frm_LinhaCursor [MATH01]
frm_NroLinhasGrid [MATH01]
frm_NivelValidacao [SPHD]
frm_ValorNaAlocacao [AN01]
frm_ValorNoAID [AA]
frm_LinhaCursorAux [MATH01]
frm_AID_Aux [AID]
frm_Aux_SY [SY]
frm_Aux_RT [RT]
frm_Aux_KY [KY]
frm_NroAlocacao [N001]
frm_ContaCTB [OBJ]
frm_ProjetoAux [PROJE]
frm_RubricaAux [RUBRI]
frm_AuxObj_OBJ [OBJ]
frm_AuxSub_SUB [SUB]
frm_AuxMcu_MCU [MCU]
frm_CtaS3 [AID]
frm_CodErroAlocacaoProjRubrica [DTAI]
frm_Local_Erro [UKERRO]
frm_LinhasGRID [MATH01]
frm_AuxAid_AID [AID]
frm_NroAlocacaoR3 [R3]
frm_AuxFy_FY [FY]
frm_AuxPn_PN [PN]
frm_Tabela [LRSTN]
frm_Livro [LT]
frm_ValorF0911 [AA]
frm_mnRevQuantity_MATH01 [MATH01]
frm_cReversalOn_EV01 [EV01]
frm_SecondaryQty [SQOH]
frm_TPJobnumberA [JOBS]
frm_mnUniqueKeyIDF41021WF_UKID [UKID]
frm_cLPNMasterSwitch_LPNM [LPNM]
frm_cDisableGlDate_EV01 [EV01]
frm_cApparelActive_EV01 [EV01]
frm_isPostDiaInitialised_EV01 [EV01]
frm_LastLineNumber_LNID [LNID]
frm_cPMPNInstalled_EV01 [EV01]
frm_szProdNoJobNumber_JOB [JOB]
frm_cProdNumInvCancelled_EV01 [EV01]
frm_mnNN_TDAY [TDAY]
frm_szNameObject_OBNM [OBNM]
frm_szDescription011_DL011 [DL011]
frm_szTransactionReferenc_TREF [TREF]
frm_szBatchNumber_ICU [ICU]

=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Item Number
Event: Visual Assist Button Clicked
Event GUID: 14da0e0e-010e-492c-87fc-a22f052c9b53
=============================================
// 8951274  -    Apparel Integration
If PO cItemSearchAndSelect_EV01 [EV01] is equal to "1"
And VA frm_cApparelActive_EV01 [EV01] is equal to "1"
     Suppress Default Visual Assist Form
     Call App:PCW41011 Form:WCW41011A Version:Undefined
          GC Item Number [UITM] <- szIdentifier2ndItem [LITM]
End If

=============================================
Form: Inventory Issues - W4112A
Object: GC Item Number
Event: Col Exited & Changed - Inline
Event GUID: 90933b26-a23d-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_cMatrixErrorCode_ERRC [ERRC]
evt_mnMatrixJobNumber_JOBS [JOBS]
evt_szMatrixUser_USER [USER]
evt_szMatrixLevelName_C9LVNM [C9LVNM]
evt_cMatrixItem_C9MXLN [C9MXLN]
evt_mnMatrixLevelNumber_C9LVNO [C9LVNO]
evt_szMatrixStructure_C9STRC [C9STRC]
evt_szMatrixErrorID_DTAI [DTAI]
evt_mnQuantityControl_TRQT [TRQT]
evt_mnMatrixMaxGrid_MATH01 [MATH01]
evt_idMatrixCacheCursor_GENLNG [GENLNG]
evt_mnIdentifierShortItem_ITM [ITM]
evt_szItemInvalidError_DTAI [DTAI]
evt_szTransactionUOM_UOM [UOM]
evt_cSKULevelItem_EV11 [EV11]
evt_cStyleItem_YN_EV01 [EV01]
----------------------------------------
//
GC CFGSID - Unique Config. ID (wf) [CFGSID] = <NULL>
GC Call P4605 [EV01] = <Blank>
// 8951274  -    Apparel Integration
// Perform matrix item processing only if Apparel is active
If VA frm_cApparelActive_EV01 [EV01] is equal to "1"
     // 8970768 -    Apparel
     If SV Form_ Mode is equal to CO UPDATE_MODE
          VA frm_cDisableGlDate_EV01 [EV01] = "0"
          Clear Control Error(FC G/L Date [DGL])
          Disable Control(FC G/L Date [DGL])
     End If
     // Retrieve the short item required for Apparel processing.
     GetItemMasterDescUOM(B4001040.GetItemMasterDescUOM)
          VA evt_mnIdentifierShortItem_ITM [ITM] <- mnShortItemNumber [ITM]
          GC Item Number [UITM] -> szPrimaryItemNumber [UITM]
          VA evt_szItemInvalidError_DTAI [DTAI] <- szErrorMessageID [DTAI]
     If VA evt_szItemInvalidError_DTAI [DTAI] is equal to <Blank>
     Or VA evt_szItemInvalidError_DTAI [DTAI] is equal to <NULL>
          // Check whether the item is style item or a standard item
          DetermineSKULevelItem(BCW86.DetermineSKULevelItem)
               VA evt_mnIdentifierShortItem_ITM [ITM] -> mnItemNumberShort_Apparel [C9ITM]
               VA evt_cSKULevelItem_EV11 [EV11] <- cSKULevelItem [EV01]
               VA evt_cStyleItem_YN_EV01 [EV01] <- cStyleItemYN [EV01]
          If VA evt_cStyleItem_YN_EV01 [EV01] is equal to "Y"
               DetermineInvMatrixItem(N41F0010.DetermineInvMatrixItem)
                    VA evt_mnMatrixJobNumber_JOBS [JOBS] <- mnMatrixJobNumber [JOBS]
                    VA evt_szMatrixUser_USER [USER] <- szMatrixUser [USER]
                    VA evt_szMatrixLevelName_C9LVNM [C9LVNM] <- szMatrixLevelName [C9LVNM]
                    VA evt_cMatrixItem_C9MXLN [C9MXLN] <- cMatrixItem [C9MXLN]
                    VA evt_mnMatrixLevelNumber_C9LVNO [C9LVNO] <- mnMatrixLevelNumber [C9LVNO]
                    VA evt_szMatrixStructure_C9STRC [C9STRC] <- szMatrixStructure [C9STRC]
                    VA evt_szMatrixErrorID_DTAI [DTAI] <- szErrorID [DTAI]
                    VA evt_mnIdentifierShortItem_ITM [ITM] -> mnIdentifierShortItem_ITM [ITM]
               If VA evt_cMatrixItem_C9MXLN [C9MXLN] is equal to "Y"
               And VA evt_szMatrixErrorID_DTAI [DTAI] is equal to or empty <Blank>
                    VA evt_mnQuantityControl_TRQT [TRQT] = GC Quantity [TRQT]
                    VA evt_szTransactionUOM_UOM [UOM] = GC UM [TRUM]
                    Delete Grid Row(FC Grid,  <Currently Selected Row>)
                    Call App:PCW10 Form:WCW10B Version:PO szVersion
                         VA evt_mnMatrixJobNumber_JOBS [JOBS] -> mnJobnumberA [JOBS]
                         VA evt_szMatrixUser_USER [USER] -> szUserId [USER]
                         VA evt_szMatrixLevelName_C9LVNM [C9LVNM] -> szC9LVL0-Level 0 [C9LVL0]
                         "1" -> MatrixType [EV01]
                         VA evt_szMatrixStructure_C9STRC [C9STRC] -> szC9STRC-Structure [C9STRC]
                         VA evt_mnMatrixLevelNumber_C9LVNO [C9LVNO] -> mnC9LVNO-Level No [C9LVNO]
                         VA evt_cMatrixItem_C9MXLN [C9MXLN] -> cC9MXLN_MatrixLine_YN [C9MXLN]
                         VA evt_mnQuantityControl_TRQT [TRQT] -> QtyControle [UORG]
                         FC Business Unit [MCU] -> szCostCenter [MCU]
                         "P4112" -> szCallingAPPLProgramId [PID]
                         VA evt_szTransactionUOM_UOM [UOM] -> szTransactionUOM [UOM]
                    FCW20.Delete  [Index 1: Primary]
                         VA evt_mnMatrixJobNumber_JOBS [JOBS] = TK Job Number [JOBS]
                         VA evt_szMatrixUser_USER [USER] = TK User ID [USER]
                    Get Max Grid Rows(FC Grid, VA evt_mnMatrixMaxGrid_MATH01)
                    Delete Grid Row(FC Grid, VA evt_mnMatrixMaxGrid_MATH01)
                    While VA evt_cMatrixErrorCode_ERRC [ERRC] is not equal to "1"
                         UnLoadMultipleReturn(B4100380.UnLoadMultipleReturn)
                              GB Item Number [UITM] <- szItemNumber [UITM]
                              GB Branch/Plant [MCU] <- szBranchPlant [MCU]
                              GB Location [LOCNE1] <- szLocation [LOCN]
                              GB Lot/Serial [LOTN] <- szLotNumber [LOTN]
                              VA evt_cMatrixErrorCode_ERRC [ERRC] <> cLastRecordReadFlag [EV01]
                              GB Quantity [TRQT] <- mnQuantity [UORG]
                              VA evt_idMatrixCacheCursor_GENLNG [GENLNG] <> idCacheCursor [GENLNG]
                         Insert Grid Buffer Row(FC Grid,  <After Last Row>,  <Yes>,  <No>,  <Yes>,  <Yes>,  <Yes>)
                    End While
                    If VA evt_idMatrixCacheCursor_GENLNG [GENLNG] is not equal to "0"
                    And VA evt_idMatrixCacheCursor_GENLNG [GENLNG] is not equal to <NULL>
                         FreePtrToDataStructure(B4000460.FreePtrToDataStructure)
                              VA evt_idMatrixCacheCursor_GENLNG [GENLNG] <> idGenericLong [GENLNG]
                    End If
               Else
                    // Do not throw the error for SKU item. We just need to prevent the calling of
                    // PCW10 for SKU item
                    If VA evt_cSKULevelItem_EV11 [EV11] is not equal to "Y"
                         Set Control Error(FC Grid, "CW0077")
                    End If
               End If
          End If
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Quantity
Event: Col Exited & Changed - Inline
Event GUID: 847b3bcb-8550-4208-b6c9-ab11b5a64a3c
=============================================
// SAR 7576301 - G/L Date is disabled in order to avoid commitment fail errors
// in F0911, this is the less intrusive fix, please do not enable it again,
// otherwise a big enhancement will have to be made in order to avoid
// commitment failures in F0911. 
If SV Form_ Mode is equal to CO UPDATE_MODE
     VA frm_cDisableGlDate_EV01 [EV01] = "0"
     Clear Control Error(FC G/L Date [DGL])
     Disable Control(FC G/L Date [DGL])
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Location
Event: Post Visual Assist Clicked
Event GUID: 0ff27190-d8d4-11d2-a23c-00104b6d4899
=============================================
// test breakpoint

=============================================
Form: Inventory Issues - W4112A
Object: GC Location
Event: Visual Assist Button Clicked
Event GUID: 0ff27191-d8d4-11d2-a23c-00104b6d4899
=============================================
! // test breakpoint
! FI szItemNoUnknownFormat [UITM] = GC Item Number [UITM]
! // test breakpoint
Suppress Default Visual Assist Form
// Begin SAR 7571957
Call App:P41LOCN Form:W41LOCNB Version:ZJDE0001
     GC Location [LOCNE1] <> Location [LOCN]
     GC ITM - Short Item No (wf) [ITM] -> mnIdentifierShortItem [ITM]
     FC Business Unit [MCU] -> szCostCenter [MCU]
     GC Lot/Serial [LOTN] <> szLot [LOTN]
     GC LOCN - Location File (wf) [LOCN] <- szLocationFileFormat [LOCNE1]
     GC Item Number [UITM] -> szItemNoUnknownFormat [UITM]
     PO szLotGroup [LOTGRP] -> szLotGroup [LOTGRP]
     FC Document Type [DCT] -> szOrderType [DCTO]
// End SAR 7571957


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC License Plate Number
Event: Visual Assist Button Clicked
Event GUID: ae60808a-3941-4ac9-8a27-23f86943ff85
=============================================
Suppress Default Visual Assist Form
Call App:P46L10 Form:W46L10C Version:ZJDE0001
     GC License Plate Number [LPNU] <- szszLicensePlateNumber [LPNU]
     GC ITM - Short Item No (wf) [ITM] -> mnIdentifierShortItem [ITM]
     GC Lot/Serial [LOTN] -> szLot [LOTN]
     "1" -> cSearchMode [EV01]
     GC Branch/Plant [MCU] -> szBranchPlant [MCU]
     GC Location [LOCNE1] -> szLocation [LOCN]


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Unit Cost
Event: Col Exited & Changed - Asynch
Event GUID: 0855e866-42e2-11d4-a14d-0006290d5258
=============================================
// SAR 4324900 - Disabled all code.
// Begin SAR 4295491
! If VA grd_Old_UnitCost [UNCS] is not equal to GC Unit Cost [UNCS]
     ! If GC Unit Cost [UNCS] is not equal to "0"
          ! VA grd_cCostOverrideCode_CSTO [CSTO] = "1"
     ! Else
          ! If VA grd_cCostOverrideCode_CSTO [CSTO] is equal to "1"
          ! And GC Extended Amount [PAID] is not equal to "0"
               ! VA grd_cExtCostOverride_CSTO [CSTO] = "1"
          ! End If
          ! VA grd_cCostOverrideCode_CSTO [CSTO] = <Blank>
     ! End If
! End If
// End SAR 4295491


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Extended Amount
Event: Col Exited & Changed - Asynch
Event GUID: 0855e867-42e2-11d4-a14d-0006290d5258
=============================================
// SAR 4324900 - Disabled all code.
// Begin SAR 4295491
! If VA grd_SavedExtendedCost_PAID [PAID] is not equal to GC Extended Amount [PAID]
     ! If GC Extended Amount [PAID] is not equal to "0"
          ! VA grd_cExtCostOverride_CSTO [CSTO] = "1"
     ! Else
          ! If GC Unit Cost [UNCS] is not equal to "0"
          ! And VA grd_cExtCostOverride_CSTO [CSTO] is equal to "1"
               ! VA grd_cCostOverrideCode_CSTO [CSTO] = "1"
          ! End If
          ! VA grd_cExtCostOverride_CSTO [CSTO] = <Blank>
     ! End If
! End If
// End SAR 4295491


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Account Number 
Event: Col Exited & Changed - Inline
Event GUID: 6101fe3c-5709-4911-bac5-aa6a61b89d79
=============================================
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
// -----------------------------------------------------------------------------
//             Se trocar só a conta deve consistir histórico novamente
//
VA frm_HistoricoGCAA03 [AA03] = lpad([GC CHIS [CHIS]], "0", "3")
VA frm_ErroHistorico [AA01] = "N"
VA frm_AchouCerto [AA01] = "N"
//
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] -> szAccountNumber [ANI]
     UNDEFINED <> szAccountID [AID]
     UNDEFINED <> szUnstructuredAccount [ANS]
     UNDEFINED <> szDatabaseBusinessUnit [MCU]
     VA frm_AUXObjectAccount_OBJ [OBJ] <- szDatabaseObject [OBJ]
     VA frm_AUXSubsidiary_SUB [SUB] <- szDatabaseSubsidiary [SUB]
     UNDEFINED <> szDisplayBusinessUnit [MCUR]
     UNDEFINED <> szDisplayObject [OBJA]
     UNDEFINED <> szDisplaySubsidiary [SUBA]
     UNDEFINED <> szAccountDescription [DL01]
     "7" -> cBasedOnFormat [EV01]
     UNDEFINED <> cFormatAccountNumberAs [EV02]
     UNDEFINED <> cIncludeAccountSymbol [EV03]
     UNDEFINED <> szErrorMessageID [EKEY]
     UNDEFINED <> cReturnErrorID [EV01]
     VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
     UNDEFINED <> szAccountCurrency [CRCD]
     UNDEFINED <> cAccountPostingEdit [PEC]
     UNDEFINED <> szAccountUnitOfMeasure [UM]
     UNDEFINED <> cModelAccountsFlag [FMOD]
     UNDEFINED <> cAccountDuplication [EV01]
//
F5509HIS.Select  [Index 1: Índice]
     VA frm_AUXObjectAccount_OBJ [OBJ] = TK Object Account [OBJ]
F5509HIS.FetchNext  [Index 1: Índice]
     VA frm_CompanyHIS [CO] <- TK Company [CO]
     VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
     VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
     VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
While SV File_IO_Status is equal to CO SUCCESS
     If VA frm_ExigeAA01 [AA01] is equal to "S"
          If VA frm_CompanyHIS [CO] is equal to VA frm_AUXCompany_CO [CO]
          Or VA frm_CompanyHIS [CO] is equal to "*"
               If VA frm_SubsidiaryHIS [SUB] is equal to VA frm_AUXSubsidiary_SUB [SUB]
               Or VA frm_SubsidiaryHIS [SUB] is equal to "*"
                    If VA frm_HistoricoAA03 [AA03] is equal to VA frm_HistoricoGCAA03 [AA03]
                    Or VA frm_HistoricoAA03 [AA03] is equal to "*"
                         VA frm_ErroHistorico [AA01] = "N"
                         VA frm_AchouCerto [AA01] = "S"
                         Consiste_hist_padrao(N5509HIS.Consiste_hist_padrao)
                              GC Explanation -Remark- [EXR] -> HISTORICO [RMK]
                              VA frm_ERRO [EV01] <- ERRO_V1 [EV01]
                              VA frm_COD_ERRO [AA05] <- COD_ERRO [AA05]
                         If VA frm_ERRO [EV01] is equal to "1"
                              Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, VA frm_COD_ERRO)
                         End If
                         // ---------------------------------------------------------
                         If VA frm_ERRO [EV01] is not equal to "1"
                              VA frm_RBSCod_HistoricoAux_CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                              If GC CHIS [CHIS] is less than or equal to "0"
                                   VA frm_HIST4POS [EV01] = substr([GC Explanation -Remark- [EXR]], "3", "1")
                                   ! If VA frm_HIST4POS [EV01] is equal to "*"
                                        VA frm_RBS3PosRemark_AA03 [AA03] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        VA frm_SY [SY] = "55"
                                        VA frm_RT [RT] = "HI"
                                        VA frm_KY [KY] = concat("       ", lpad([VA frm_RBS3PosRemark_AA03 [AA03]], "0", "3"))
                                        F0005.FetchSingle  [Index 1: System, Type, Code]
                                             VA frm_SY [SY] = TK Product Code [SY]
                                             VA frm_RT [RT] = TK User Defined Codes [RT]
                                             VA frm_KY [KY] = TK User Defined Code [KY]
                                             VA frm_UDC_HIST_PADRAO [DL02] <- TK Description 02 [DL02]
                                        If SV File_IO_Status is equal to CO SUCCESS
                                             GC CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        Else
                                             Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                        End If
                                   ! End If
                              Else
                                   If GC CHIS [CHIS] is not equal to VA frm_RBSCod_HistoricoAux_CHIS [CHIS]
                                        Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                   End If
                              End If
                         End If
                         // ---------------------------------------------------------
                    Else
                         If VA frm_AchouCerto [AA01] is equal to "S"
                         Else
                              VA frm_ErroHistorico [AA01] = "S"
                         End If
                    End If
               End If
          End If
     Else
     End If
     F5509HIS.FetchNext  [Index 1: Índice]
          VA frm_CompanyHIS [CO] <- TK Company [CO]
          VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
          VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
          VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
End While
If VA frm_ErroHistorico [AA01] is equal to "S"
     // - erro Exige Histórico
     Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS, "554102")
Else
     If GC Explanation -Remark- [EXR] is not equal to <Blank>
     And GC Explanation -Remark- [EXR] is not equal to <NULL>
     And GC CHIS [CHIS] is equal to "0"
          GC Explanation -Remark- [EXR] = <NULL>
          Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
          Disable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
     End If
End If
// -----------------------------------------------------------------------------
// FIM  - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
// -----------------------------------------------------------------------------

=============================================
Form: Inventory Issues - W4112A
Object: GC Account Number 
Event: Col Exited & Changed - Asynch
Event GUID: 539d2737-e31d-43d6-9e64-8133ca2eba28
=============================================
// -----------------------------------------------------------------------------
// INICIO - Chamado 407819 - Camila - Validação de Controle de Investimento
// -----------------------------------------------------------------------------
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] -> szAccountNumber [ANI]
     VA frm_AID_Aux [AID] <- szAccountID [AID]
     VA frm_AuxMcu_MCU [MCU] <- szDatabaseBusinessUnit [MCU]
     VA frm_AuxObj_OBJ [OBJ] <- szDatabaseObject [OBJ]
     VA frm_AuxSub_SUB [SUB] <- szDatabaseSubsidiary [SUB]
     "7" -> cBasedOnFormat [EV01]
     VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
F0901.FetchSingle  [Index 2: Business Unit, Object, +]
     VA frm_AuxMcu_MCU [MCU] = TK Business Unit [MCU]
     VA frm_AuxObj_OBJ [OBJ] = TK Object Account [OBJ]
     VA frm_AuxSub_SUB [SUB] = TK Subsidiary [SUB]
     VA frm_Cat20_R020 [R020] <- TK Category Code - G/L20 [R020]
If VA frm_Cat20_R020 [R020] is not equal to <Blank>
     Show Grid Column(FC Grid, GC NumeroAlocação)
     Show Grid Column(FC Grid, GC ProjetoRubrica)
     Enable Grid(FC Grid, <Currently Selected Row>, GC ProjetoRubrica)
     Enable Grid(FC Grid, <Currently Selected Row>, GC NumeroAlocação)
Else
     GC Numero Alocação [N001] = <Blank>
     GC Projeto Rubrica [CN] = <Blank>
     Disable Grid(FC Grid, <Currently Selected Row>, GC NumeroAlocação)
     Disable Grid(FC Grid, <Currently Selected Row>, GC ProjetoRubrica)
     Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC NumeroAlocação)
     Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC ProjetoRubrica)
End If
// Fim Chamado 407819


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Numero Alocação
Event: Post Visual Assist Clicked
Event GUID: 69c405d1-e8a5-4d86-86e7-efe8c7261b75
=============================================
//
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] -> szAccountNumber [ANI]
     VA frm_AuxMcu_MCU [MCU] <- szDatabaseBusinessUnit [MCU]
     VA frm_AuxObj_OBJ [OBJ] <- szDatabaseObject [OBJ]
     VA frm_AuxSub_SUB [SUB] <- szDatabaseSubsidiary [SUB]
     "7" -> cBasedOnFormat [EV01]
     VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
F0901.FetchSingle  [Index 2: Business Unit, Object, +]
     VA frm_AuxMcu_MCU [MCU] = TK Business Unit [MCU]
     VA frm_AuxObj_OBJ [OBJ] = TK Object Account [OBJ]
     VA frm_AuxSub_SUB [SUB] = TK Subsidiary [SUB]
     VA frm_Cat20_R020 [R020] <- TK Category Code - G/L20 [R020]
If VA frm_Cat20_R020 [R020] is not equal to <Blank>
     Call App:P5509IV2 Form:W5509IV2L Version:Undefined
          VA frm_Projeto [PROJE] <- Projeto [PROJE]
          VA frm_AUXCompany_CO [CO] -> Empresa [CO]
          VA frm_NroAlocacao [N001] <- NroAlocacao [N001]
          VA frm_RubricaAux [RUBRI] <- Rubrica [RUBRI]
          VA frm_AuxMcu_MCU [MCU] -> CCusto [MCU]
          VA frm_AuxObj_OBJ [OBJ] -> CtaCtbObj [OBJ]
          VA frm_AuxSub_SUB [SUB] -> CtaCtbDet [SUB]
     If VA frm_NroAlocacao [N001] is not equal to "99999999"
          GC Numero Alocação [N001] = VA frm_NroAlocacao [N001]
          ! ConvertMath_NumericToString(B8000094.ConvertMath_NumericToString)
          !      Cannot resolve GC  Object: 302 -> mnMathNumeric01 [MATH01]
          !      Cannot resolve GC  Object: 300 <- szString [PV01]
          GC Projeto Rubrica [CN] = concat([VA frm_Projeto [PROJE]], [VA frm_RubricaAux [RUBRI]])
     End If
End If
//


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC CHIS
Event: Col is Exited
Event GUID: 68dcd5c9-33e0-4dc4-bec1-7d902eeb0773
=============================================
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
If GC CHIS [CHIS] is equal to "0"
     Disable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
End If
// -----------------------------------------------------------------------------

=============================================
Form: Inventory Issues - W4112A
Object: GC CHIS
Event: Col Exited & Changed - Inline
Event GUID: bf239e43-d659-4c68-8d9f-55753b37fbe3
=============================================
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
//                                     Campo CHIS novo no GRID
// -----------------------------------------------------------------------------
VA frm_SY [SY] = "55"
VA frm_RT [RT] = "HI"
VA frm_KY [KY] = concat("       ", lpad([GC CHIS [CHIS]], "0", "3"))
VA frm_HIS_OBS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
If GC CHIS [CHIS] is equal to VA frm_HIS_OBS [CHIS]
And GC CHIS [CHIS] is greater than <Blank>
Else
     If GC CHIS [CHIS] is equal to "0"
          If VA frm_EV10_DoNotCloseBatch [EV10] is not equal to "1"
               GC Explanation -Remark- [EXR] = <NULL>
               Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
               Disable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
          End If
     Else
          //        Pesquisa na UDC
          F0005.FetchSingle  [Index 1: System, Type, Code]
               VA frm_SY [SY] = TK Product Code [SY]
               VA frm_RT [RT] = TK User Defined Codes [RT]
               VA frm_KY [KY] = TK User Defined Code [KY]
               VA frm_UDC_HIST_PADRAO [DL02] <- TK Description 02 [DL02]
          If SV File_IO_Status is equal to CO SUCCESS
               // ++++
               //    Verifica se histórico não é obrigatório p/a conta
               ValidateAccountNumber(XX0901.ValidateAccountNumber)
                    GC Account Number  [ANI] -> szAccountNumber [ANI]
                    UNDEFINED <> szAccountID [AID]
                    UNDEFINED <> szUnstructuredAccount [ANS]
                    UNDEFINED <> szDatabaseBusinessUnit [MCU]
                    VA frm_AUXObjectAccount_OBJ [OBJ] <- szDatabaseObject [OBJ]
                    VA frm_AUXSubsidiary_SUB [SUB] <- szDatabaseSubsidiary [SUB]
                    UNDEFINED <> szDisplayBusinessUnit [MCUR]
                    UNDEFINED <> szDisplayObject [OBJA]
                    UNDEFINED <> szDisplaySubsidiary [SUBA]
                    UNDEFINED <> szAccountDescription [DL01]
                    "7" -> cBasedOnFormat [EV01]
                    UNDEFINED <> cFormatAccountNumberAs [EV02]
                    UNDEFINED <> cIncludeAccountSymbol [EV03]
                    UNDEFINED <> szErrorMessageID [EKEY]
                    UNDEFINED <> cReturnErrorID [EV01]
                    VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
                    UNDEFINED <> szAccountCurrency [CRCD]
                    UNDEFINED <> cAccountPostingEdit [PEC]
                    UNDEFINED <> szAccountUnitOfMeasure [UM]
                    UNDEFINED <> cModelAccountsFlag [FMOD]
                    UNDEFINED <> cAccountDuplication [EV01]
               VA frm_HistoricoGCAA03 [AA03] = lpad([GC CHIS [CHIS]], "0", "3")
               VA frm_AchouCerto [AA01] = "N"
               F5509HIS.Select  [Index 1: Índice]
                    VA frm_AUXObjectAccount_OBJ [OBJ] = TK Object Account [OBJ]
               F5509HIS.FetchNext  [Index 1: Índice]
                    VA frm_CompanyHIS [CO] <- TK Company [CO]
                    VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
                    VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
                    VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
               While SV File_IO_Status is equal to CO SUCCESS
                    If VA frm_ExigeAA01 [AA01] is equal to "S"
                         If VA frm_CompanyHIS [CO] is equal to VA frm_AUXCompany_CO [CO]
                         Or VA frm_CompanyHIS [CO] is equal to "*"
                              If VA frm_SubsidiaryHIS [SUB] is equal to VA frm_AUXSubsidiary_SUB [SUB]
                              Or VA frm_SubsidiaryHIS [SUB] is equal to "*"
                                   If VA frm_HistoricoAA03 [AA03] is equal to VA frm_HistoricoGCAA03 [AA03]
                                   Or VA frm_HistoricoAA03 [AA03] is equal to "*"
                                        VA frm_AchouCerto [AA01] = "S"
                                   End If
                              End If
                         End If
                    End If
                    F5509HIS.FetchNext  [Index 1: Índice]
                         VA frm_CompanyHIS [CO] <- TK Company [CO]
                         VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
                         VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
                         VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
               End While
               If VA frm_AchouCerto [AA01] is equal to "S"
                    GC Explanation -Remark- [EXR] = VA frm_UDC_HIST_PADRAO [DL02]
                    Enable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
                    Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS)
               Else
                    Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS, "554101")
                    Disable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
               End If
               // ++++
          End If
     End If
End If
// -----------------------------------------------------------------------------
// FIM - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
// -----------------------------------------------------------------------------


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Explanation -Remark-
Event: Col Exited & Changed - Inline
Event GUID: 9e7867f8-62f5-4880-afb3-ce781f8e2ae0
=============================================
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
// -----------------------------------------------------------------------------
Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
VA frm_HistoricoGCAA03 [AA03] = lpad([GC CHIS [CHIS]], "0", "3")
VA frm_ErroHistorico [AA01] = "N"
VA frm_AchouCerto [AA01] = "N"
//
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] -> szAccountNumber [ANI]
     VA frm_AUXObjectAccount_OBJ [OBJ] <- szDatabaseObject [OBJ]
     VA frm_AUXSubsidiary_SUB [SUB] <- szDatabaseSubsidiary [SUB]
     "7" -> cBasedOnFormat [EV01]
     VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
//
F5509HIS.Select  [Index 1: Índice]
     VA frm_AUXObjectAccount_OBJ [OBJ] = TK Object Account [OBJ]
F5509HIS.FetchNext  [Index 1: Índice]
     VA frm_CompanyHIS [CO] <- TK Company [CO]
     VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
     VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
     VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
While SV File_IO_Status is equal to CO SUCCESS
     If VA frm_ExigeAA01 [AA01] is equal to "S"
          If VA frm_CompanyHIS [CO] is equal to VA frm_AUXCompany_CO [CO]
          Or VA frm_CompanyHIS [CO] is equal to "*"
               If VA frm_SubsidiaryHIS [SUB] is equal to VA frm_AUXSubsidiary_SUB [SUB]
               Or VA frm_SubsidiaryHIS [SUB] is equal to "*"
                    If VA frm_HistoricoAA03 [AA03] is equal to VA frm_HistoricoGCAA03 [AA03]
                    Or VA frm_HistoricoAA03 [AA03] is equal to "*"
                         VA frm_ErroHistorico [AA01] = "N"
                         VA frm_AchouCerto [AA01] = "S"
                         Consiste_hist_padrao(N5509HIS.Consiste_hist_padrao)
                              GC Explanation -Remark- [EXR] -> HISTORICO [RMK]
                              VA frm_ERRO [EV01] <- ERRO_V1 [EV01]
                              VA frm_COD_ERRO [AA05] <- COD_ERRO [AA05]
                         If VA frm_ERRO [EV01] is equal to "1"
                              Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, VA frm_COD_ERRO)
                         End If
                         // ---------------------------------------------------------
                         If VA frm_ERRO [EV01] is not equal to "1"
                              VA frm_RBSCod_HistoricoAux_CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                              If GC CHIS [CHIS] is less than or equal to "0"
                                   VA frm_HIST4POS [EV01] = substr([GC Explanation -Remark- [EXR]], "3", "1")
                                   ! If VA frm_HIST4POS [EV01] is equal to "*"
                                        VA frm_RBS3PosRemark_AA03 [AA03] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        VA frm_SY [SY] = "55"
                                        VA frm_RT [RT] = "HI"
                                        VA frm_KY [KY] = concat("       ", lpad([VA frm_RBS3PosRemark_AA03 [AA03]], "0", "3"))
                                        F0005.FetchSingle  [Index 1: System, Type, Code]
                                             VA frm_SY [SY] = TK Product Code [SY]
                                             VA frm_RT [RT] = TK User Defined Codes [RT]
                                             VA frm_KY [KY] = TK User Defined Code [KY]
                                             VA frm_UDC_HIST_PADRAO [DL02] <- TK Description 02 [DL02]
                                        If SV File_IO_Status is equal to CO SUCCESS
                                             GC CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        Else
                                             Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                        End If
                                   ! End If
                              Else
                                   If GC CHIS [CHIS] is not equal to VA frm_RBSCod_HistoricoAux_CHIS [CHIS]
                                        Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                   End If
                              End If
                         End If
                         // ---------------------------------------------------------
                    Else
                         If VA frm_AchouCerto [AA01] is equal to "S"
                         Else
                              VA frm_ErroHistorico [AA01] = "S"
                         End If
                    End If
               End If
          End If
     Else
     End If
     F5509HIS.FetchNext  [Index 1: Índice]
          VA frm_CompanyHIS [CO] <- TK Company [CO]
          VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
          VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
          VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
End While
If VA frm_ErroHistorico [AA01] is equal to "S"
     // - erro Exige Histórico
     Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS, "554102")
Else
     If GC Explanation -Remark- [EXR] is not equal to <Blank>
     And GC Explanation -Remark- [EXR] is not equal to <NULL>
     And GC CHIS [CHIS] is equal to "0"
          GC Explanation -Remark- [EXR] = <NULL>
          Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
          Disable Grid(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
     End If
End If
// -----------------------------------------------------------------------------
// FIM  - ISSUE 6900 - Marília - Consistência do campo Histórico x CHis
// -----------------------------------------------------------------------------


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Subledger
Event: Visual Assist Button Clicked
Event GUID: 0d897b6f-b997-4aca-8268-66443a3c2353
=============================================
//   SAR 8007573 - Suppress dummy visual assist search and select form
//   assigned  in subledger type event rules.
// 
Suppress Default Visual Assist Form
// 
//   SAR 8007573 - Call the search and select form that corresponds to
//   subledger type.
GetSubledgerValue(N0900010.GetSubledgerValue)
     GC Sub Type [SBLT] -> cSubledgerType [SBLT]
     GC Subledger [SBL] <> szSubledger [SBL]


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: GC Sub Type
Event: Col Exited & Changed - Inline
Event GUID: 5063a118-c841-4d2e-9991-b750c63f7a43
=============================================
// 
//    SAR 8007573 - If subledger type has a search and select form, 
//   override visual assist to dummy search and select to display visual
//   assist flashlight on subledger field. 
//   If subledger type does not have a  
//   search and select form, disable visual assist on subledger field.
// 
If GC Sub Type [SBLT] is equal to ("A","C","E","F","G","I","L","O","W")
     Set Data Dictionary Overrides(FC Grid, GC Subledger,  <Data Dictionary Overrides>)
Else
     Set Data Dictionary Overrides(FC Grid, GC Subledger,  <Data Dictionary Overrides>)
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC OK/Select
Event: Button Clicked
Event GUID: f57dfc70-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_GridRowMax [MATH01]
evt_CurrentGridRow [MATH01]
----------------------------------------
If FC ev04 - Begin Doc One Time (wf) [EV04] is equal to "1"
     //
     If SV Form_ Mode is equal to CO ADD_MODE
          // SAR 8363640 - Calling F0002 Get Item Ledger Next Number first as it
          // retrieves the correct fiscal year for the company when it calls
          // "ReturnFYPN" BSFN. F0911 Get Next Document Number may retreive fiscal year
          // of a different company when it calls "ValidateAccountNumber" which
          // retreives account number from F0901 table with the default account number
          // as the keys, if no account number is provided.
          //
          If FC Document Number [DOC] is equal to "0"
          Or FC Document Number [DOC] is equal to or empty <NULL>
               F4111GetNextNumber(B4100020.F4111GetNextNumber)
                    FC Document Number [DOC] <> mnDocumentNumber [DOC]
                    FC Document Type [DCT] -> szDocumentType [DCT]
                    FC kco - Doc Key Comp (wf) [KCO] -> szKeyCompany [KCO]
                    "03" -> mnNextNumberingIndexNo [NNIX]
                    "41" -> szSystemCode [SY]
                    UNDEFINED <> cSuppressErrorMsg [EV01]
                    UNDEFINED <> szErrorMessageID [DTAI]
                    FC G/L Date [DGL] -> jdGLDate [DGL]
               ! VA frm_EV09_ValidateF4111DocNo [EV09] = "0"
          End If
          //
          // SAR 8363640 - FC Document Number is just passed to "F0911 Get Next Document
          // Number", but not retreived.
          ! If VA frm_EV09_ValidateF4111DocNo [EV09] is equal to "1"
               If FC jobs - F0911 Job no (wf) [JOBS] is not equal to "0"
               And FC jobs - F0911 Job no (wf) [JOBS] is not equal to <NULL>
                    F0911FSGetNextDocNumber(B0900049.F0911FSGetNextDocNumber)
                         FC jobs - F0911 Job no (wf) [JOBS] -> mnJobNumber [JOBS]
                         "03" -> mnNextNumberIndex [MATH01]
                         "41" -> szNextNumberSystemCode [SY]
                         FC Document Number [DOC] -> mnDocNumber [DOC]
               End If
          ! End If
          //
     End If
     //
     If SV Error_Status is not equal to CO ERROR
          FC Prev Doc Type [DCTO] = FC Document Type [DCT]
          FC Prev Document No [DOC] = FC Document Number [DOC]
          //
          Show Control(FC Prev Document No [DOC])
          Show Control(FC Prev Doc Type [DCTO])
          Show Control(FC Group Box 27)
     End If
     //
End If
FC icu - Batch No (wf) [ICU] = FC Batch Number [ICU]
//
//
// *****************************************************************************
// Chamado 407819 - Camila  - 21/06/2010
// *****************************************************************************
VA frm_HouveErro [AA04] = <Blank>
VA frm_LinhaCursor [MATH01] = 1
Get Max Grid Rows(FC Grid, VA frm_NroLinhasGrid)
While VA frm_LinhaCursor [MATH01] is less than VA frm_NroLinhasGrid [MATH01]
     Get Grid Row(FC Grid, VA frm_LinhaCursor)
     ValidateAccountNumber(XX0901.ValidateAccountNumber)
          GC Account Number  [ANI] -> szAccountNumber [ANI]
          VA frm_AuxAid_AID [AID] <- szAccountID [AID]
          UNDEFINED <> szUnstructuredAccount [ANS]
          VA frm_AuxMcu_MCU [MCU] <- szDatabaseBusinessUnit [MCU]
          VA frm_AuxObj_OBJ [OBJ] <- szDatabaseObject [OBJ]
          VA frm_AuxSub_SUB [SUB] <- szDatabaseSubsidiary [SUB]
          UNDEFINED <> szDisplayBusinessUnit [MCUR]
          UNDEFINED <> szDisplayObject [OBJA]
          UNDEFINED <> szDisplaySubsidiary [SUBA]
          UNDEFINED <> szAccountDescription [DL01]
          "7" -> cBasedOnFormat [EV01]
          UNDEFINED <> cFormatAccountNumberAs [EV02]
          UNDEFINED <> cIncludeAccountSymbol [EV03]
          UNDEFINED <> szErrorMessageID [EKEY]
          UNDEFINED <> cReturnErrorID [EV01]
          VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
          UNDEFINED <> szAccountCurrency [CRCD]
          UNDEFINED <> cAccountPostingEdit [PEC]
          UNDEFINED <> szAccountUnitOfMeasure [UM]
          UNDEFINED <> cModelAccountsFlag [FMOD]
          UNDEFINED <> cAccountDuplication [EV01]
     VA frm_NroAlocacao [N001] = GC Numero Alocação [N001]
     VA frm_Projeto [PROJE] = substr([GC Projeto Rubrica [CN]], "0", "4")
     VA frm_Rubrica [RUBRI] = substr([GC Projeto Rubrica [CN]], "4", "4")
     VA frm_ContaCTB [OBJ] = VA frm_AuxObj_OBJ [OBJ]
     VA frm_CtaS3 [AID] = VA frm_AuxObj_OBJ [OBJ]
     VA frm_ValorNoAID [AA] = 0
     VA frm_ValorNaAlocacao [AN01] = 0
     //
     VA frm_NivelValidacao [SPHD] = "CONTA"
     VA frm_Aux_SY [SY] = "55"
     VA frm_Aux_RT [RT] = "VA"
     VA frm_Aux_KY [KY] = "9999999999"
     F0005.FetchSingle  [Index 1: System, Type, Code]
          VA frm_Aux_SY [SY] = TK Product Code [SY]
          VA frm_Aux_RT [RT] = TK User Defined Codes [RT]
          VA frm_Aux_KY [KY] = TK User Defined Code [KY]
          VA frm_NivelValidacao [SPHD] <- TK Special Handling Code - User Def Codes [SPHD]
     VA frm_Aux_KY [KY] = GC Numero Alocação [N001]
     F0005.FetchSingle  [Index 1: System, Type, Code]
          VA frm_Aux_SY [SY] = TK Product Code [SY]
          VA frm_Aux_RT [RT] = TK User Defined Codes [RT]
          VA frm_Aux_KY [KY] = TK User Defined Code [KY]
          VA frm_NivelValidacao [SPHD] <- TK Special Handling Code - User Def Codes [SPHD]
     //
     VA frm_LinhaCursorAux [MATH01] = VA frm_LinhaCursor [MATH01]
     VA frm_LinhaCursor [MATH01] = 1
     While VA frm_LinhaCursor [MATH01] is less than VA frm_NroLinhasGrid [MATH01]
          Get Grid Row(FC Grid, VA frm_LinhaCursor)
          ValidateAccountNumber(XX0901.ValidateAccountNumber)
               GC Account Number  [ANI] -> szAccountNumber [ANI]
               VA frm_AID_Aux [AID] <- szAccountID [AID]
               UNDEFINED <> szUnstructuredAccount [ANS]
               UNDEFINED <> szDatabaseBusinessUnit [MCU]
               UNDEFINED <> szDatabaseObject [OBJ]
               UNDEFINED <> szDatabaseSubsidiary [SUB]
               UNDEFINED <> szDisplayBusinessUnit [MCUR]
               UNDEFINED <> szDisplayObject [OBJA]
               UNDEFINED <> szDisplaySubsidiary [SUBA]
               UNDEFINED <> szAccountDescription [DL01]
               "7" -> cBasedOnFormat [EV01]
               UNDEFINED <> cFormatAccountNumberAs [EV02]
               UNDEFINED <> cIncludeAccountSymbol [EV03]
               UNDEFINED <> szErrorMessageID [EKEY]
               UNDEFINED <> cReturnErrorID [EV01]
               UNDEFINED <> szAccountCompany [CO]
               UNDEFINED <> szAccountCurrency [CRCD]
               UNDEFINED <> cAccountPostingEdit [PEC]
               UNDEFINED <> szAccountUnitOfMeasure [UM]
               UNDEFINED <> cModelAccountsFlag [FMOD]
               UNDEFINED <> cAccountDuplication [EV01]
          VA frm_RubricaAux [RUBRI] = substr([GC Projeto Rubrica [CN]], "0", "4")
          VA frm_RubricaAux [RUBRI] = substr([GC Projeto Rubrica [CN]], "4", "4")
          If VA frm_AuxAid_AID [AID] is equal to VA frm_AID_Aux [AID]
               VA frm_ValorNoAID [AA] = [VA frm_ValorNoAID [AA]]+([GC Quantity [TRQT]]*[GC Unit Cost [UNCS]])
          End If
          If VA frm_NivelValidacao [SPHD] is equal to "RUBRICA"
               VA frm_ContaCTB [OBJ] = VA frm_AuxObj_OBJ [OBJ]
          Else
               If VA frm_NivelValidacao [SPHD] is equal to "PROJETO"
                    VA frm_Rubrica [RUBRI] = VA frm_RubricaAux [RUBRI]
                    VA frm_ContaCTB [OBJ] = VA frm_AuxObj_OBJ [OBJ]
               Else
                    If VA frm_NivelValidacao [SPHD] is equal to "INVSTMTO"
                         VA frm_Projeto [PROJE] = VA frm_ProjetoAux [PROJE]
                         VA frm_Rubrica [RUBRI] = VA frm_RubricaAux [RUBRI]
                         VA frm_ContaCTB [OBJ] = VA frm_AuxObj_OBJ [OBJ]
                    End If
               End If
          End If
          If GC Numero Alocação [N001] is equal to VA frm_NroAlocacao [N001]
          And VA frm_ProjetoAux [PROJE] is equal to VA frm_Projeto [PROJE]
          And VA frm_RubricaAux [RUBRI] is equal to VA frm_Rubrica [RUBRI]
          And VA frm_AuxObj_OBJ [OBJ] is equal to VA frm_ContaCTB [OBJ]
               VA frm_ValorNaAlocacao [AN01] = [VA frm_ValorNaAlocacao [AN01]]+([GC Quantity [TRQT]]*[GC Unit Cost [UNCS]])
          End If
          VA frm_LinhaCursor [MATH01] = [VA frm_LinhaCursor [MATH01]]+1
     End While
     Get Grid Row(FC Grid, VA frm_LinhaCursorAux)
     ValidacaoAlocacao(N5509INV.ValidacaoAlocacao)
          VA frm_AuxObj_OBJ [OBJ] -> CtaObjeto [OBJ]
          GC Numero Alocação [N001] -> NroAlocacao [N001]
          GC Projeto Rubrica [CN] -> ProjetoRubrica [CN]
          VA frm_CodErroAlocacaoProjRubrica [DTAI] <- Erro [DTAI]
          VA frm_AuxAid_AID [AID] -> AID [AID]
          VA frm_Local_Erro [UKERRO] <- Local_Erro [UKERRO]
          VA frm_ValorNaAlocacao [AN01] -> Valor [AA]
          "0" -> ValorImobilizacao [AN01]
          "V" -> cInd_Operacao [IDOP]
          FC Document Type [DCT] -> szDocumentType [DCT]
     If PO cValidaProcInv_EV01 [EV01] is equal to "S"
          If VA frm_CodErroAlocacaoProjRubrica [DTAI] is not equal to <Blank>
               If VA frm_Local_Erro [UKERRO] is equal to "1"
                    Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC NumeroAlocação, VA frm_CodErroAlocacaoProjRubrica)
               Else
                    If VA frm_Local_Erro [UKERRO] is equal to "2"
                         Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC ProjetoRubrica, VA frm_CodErroAlocacaoProjRubrica)
                    Else
                         Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC NumeroAlocação, VA frm_CodErroAlocacaoProjRubrica)
                         Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC ProjetoRubrica, VA frm_CodErroAlocacaoProjRubrica)
                    End If
               End If
               VA frm_HouveErro [AA04] = "SIM"
          End If
     End If
     VA frm_LinhaCursor [MATH01] = [VA frm_LinhaCursorAux [MATH01]]+1
End While
//
// Chamado 407819 - Camila  - 28/06/2010
//

=============================================
Form: Inventory Issues - W4112A
Object: HC OK/Select
Event: Post Button Clicked
Event GUID: f57df89c-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_cCloseBatch_EV01 [EV01]
evt_szDescription011_DL011 [DL011]
evt_mnPosicao_UKID [UKID]
evt_mnBatchNumber_ICU [ICU]
evt_szBatchType_ICUT [ICUT]
evt_szCompanyKey_KCO [KCO]
evt_mnDocVoucherInvoiceE_DOC [DOC]
evt_szDocumentType_DCT [DCT]
evt_szConteudo_CNLS [CNLS]
evt_mnIdentifierShortItem_ITM [ITM]
evt_cStatus_EV01 [EV01]
evt_mn_Chave_EDOC [EDOC]
evt_jdChave_TRDJ [TRDJ]
evt_szChave_MMCU [MMCU]
evt_mnChave_KIT [KIT]
evt_mnChave_ITM [ITM]
evt_szChave_Z5576B04 [Z5576B04]
evt_szChave_Z5576B14 [Z5576B14]
evt_mnAmountUnitCost_UNCS [UNCS]
evt_szLedgType_LEDG [LEDG]
evt_szCostCenter_MCU [MCU]
evt_szUserId_USER [USER]
evt_szProgramId_PID [PID]
evt_szWorkStationId_JOBN [JOBN]
evt_szSelectionValues001_VL01 [VL01]
evt_jdDateUpdated_UPMJ [UPMJ]
evt_mnTimeLastUpdated_UPMT [UPMT]
----------------------------------------
//
If FC ev04 - Begin Doc One Time (wf) [EV04] is equal to "1"
     // *****************************************************************************
     // ISSUE 6900 - MARÍLIA - Retira o ASYNCHRONO e INCL IN TRANSACT
     //            e atualizar  EXR na F0911 gravada (só da  cta.digitada)
     // Retrieve the UKID for the F41021WF and right the cache so that it can be
     // used during End Doc.
     GetNextUniqueKeyID(X00022.GetNextUniqueKeyID)
          "F41021WF" -> szObjectName [OBNM]
          VA frm_mnUniqueKeyIDF41021WF_UKID [UKID] <- mnUniqueKeyID [UKID]
     CacheProcessUniqueF41021WF(B4902110.CacheProcessUniqueF41021WF)
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnJobnumber [JOBS]
          FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
          VA frm_mnUniqueKeyIDF41021WF_UKID [UKID] -> mnUniqueKeyIDInternal [UKID]
          "2" -> szCacheActionCode [CACTN]
          "3" -> mnNumberKeys [NKEYS]
          "1" -> cSuppressErrorMessage [SUPPS]
     //
     //
     //   SAR 8069897 - The Batch is not released in the End Document. In an
     //   Add mode, the user  has to always cancel out of the screen after every
     //   inventory transaction to release the batch. It is released only if the
     //   user presses the Cancel button in the Clear Detail Stack function
     //   call. The batch has to be released in Add mode as well. Hence if it is
     //   not Update Mode, Pass the CloseBatch Value as 1. In Update mode,
     //   the batch is released in the Clear Detail Stack below.
     //
     If SV Form_ Mode is not equal to CO UPDATE_MODE
          VA evt_cCloseBatch_EV01 [EV01] = "1"
     Else
          VA evt_cCloseBatch_EV01 [EV01] = "0"
     End If
     F4114EndDocument(XT4114Z1.F4114EndDocument)
          "EP4112" -> szProgramID [PID]
          FC Document Number [DOC] -> mnDocumentNumber [DOC]
          FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
          "1" -> cWriteCardex [EV01]
          FC Document Type [DCT] -> szDocumentType [DCT]
          "1" -> mnTransactionProcessType [MATH01]
          FC jobs - F0911 Job no (wf) [JOBS] -> mnF0911Jobnumber [JOBS]
          FC Batch Number [ICU] <> mnBatchNumber [ICU]
          PO cEverestEventPoint08 [EV08] -> cUpdateSalesHistory [EV01]
          FC ev01 - Batch Status (wf) [EV01] -> cBatchStatus [IST]
          VA evt_cCloseBatch_EV01 [EV01] <> cProcessCloseBatch [EV01]
          PO cSummarymode [EV05] -> cSummarizeF0911 [EV01]
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnInvJobNumber [JOBS]
          PO OutInteroperabilityType [TYTN] <> szEDITransactionType [TYTN]
     //
     VA frm_TAM_GRID [MATH08] = "0"
     Get Max Grid Rows(FC Grid, VA frm_TAM_GRID)
     VA frm_TAM_GRID [MATH08] = [VA frm_TAM_GRID [MATH08]]-1
     While VA frm_TAM_GRID [MATH08] is greater than "0"
          Get Grid Row(FC Grid, VA frm_TAM_GRID)
          If GC CHIS [CHIS] is not equal to "0"
               F4111.Select  [Index 3: Document No, Type, +B]
                    FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                    FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                    FC Document Type [DCT] = TK Document Type [DCT]
                    GC G/L Date [DGL] = TK Date - For G/L (and Voucher) [DGL]
                    GC lnid - Line Number (wf) [LNID] = TK Line Number [LNID]
               F4111.FetchNext  [Index 3: Document No, Type, +B]
                    VA frm_KeyF0911_JELN [JELN] <- TK Journal Entry Line Number [JELN]
               While SV File_IO_Status is equal to CO SUCCESS
                    // ----     - não atualizar o EXR  da contrapartida
                    VA frm_KeyF0911_JELN [JELN] = [VA frm_KeyF0911_JELN [JELN]]+1
                    F0911.Select  [Index 1: Doc Type, Number, +]
                         FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                         FC Document Type [DCT] = TK Document Type [DCT]
                         FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                         GC G/L Date [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
                         VA frm_KeyF0911_JELN [JELN] = TK Journal Entry Line Number [JELN]
                    F0911.FetchNext  [Index 1: Doc Type, Number, +]
                         VA frm_F0911Key_EXTL [EXTL] <- TK Line Extension Code [EXTL]
                         VA frm_F0911Key_LT [LT] <- TK Ledger Types [LT]
                    If SV File_IO_Status is equal to CO SUCCESS
                    And VA frm_HistoricoF0911_EXR [EXR] is not equal to GC Explanation -Remark- [EXR]
                         F0911.Update  [Index 1: Doc Type, Number, +]
                              FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                              FC Document Type [DCT] = TK Document Type [DCT]
                              FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                              GC G/L Date [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
                              VA frm_KeyF0911_JELN [JELN] = TK Journal Entry Line Number [JELN]
                              GC Explanation -Remark- [EXR] -> TK Name - Remark Explanation [EXR]
                    End If
                    F4111.FetchNext  [Index 3: Document No, Type, +B]
                         VA frm_KeyF0911_JELN [JELN] <- TK Journal Entry Line Number [JELN]
               End While
          End If
          If GC Numero Alocação [N001] is not equal to "0"
               F4111.Select  [Index 3: Document No, Type, +B]
                    FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                    FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                    FC Document Type [DCT] = TK Document Type [DCT]
                    GC G/L Date [DGL] = TK Date - For G/L (and Voucher) [DGL]
                    GC lnid - Line Number (wf) [LNID] = TK Line Number [LNID]
               F4111.FetchNext  [Index 3: Document No, Type, +B]
                    VA frm_KeyF0911_JELN [JELN] <- TK Journal Entry Line Number [JELN]
               While SV File_IO_Status is equal to CO SUCCESS
                    VA frm_KeyF0911_JELN [JELN] = [VA frm_KeyF0911_JELN [JELN]]+1
                    F0911.Select  [Index 1: Doc Type, Number, +]
                         FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                         FC Document Type [DCT] = TK Document Type [DCT]
                         FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                         GC G/L Date [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
                         VA frm_KeyF0911_JELN [JELN] = TK Journal Entry Line Number [JELN]
                    F0911.FetchNext  [Index 1: Doc Type, Number, +]
                         VA frm_F0911Key_EXTL [EXTL] <- TK Line Extension Code [EXTL]
                         VA frm_F0911Key_LT [LT] <- TK Ledger Types [LT]
                         VA frm_ValorF0911 [AA] <- TK Amount [AA]
                    If SV File_IO_Status is equal to CO SUCCESS
                    And GC Numero Alocação [N001] is not equal to "0"
                         VA frm_NroAlocacaoR3 [R3] = GC Numero Alocação [N001]
                         F0911.Update  [Index 1: Doc Type, Number, +]
                              FC kco - Doc Key Comp (wf) [KCO] = TK Document Company [KCO]
                              FC Document Type [DCT] = TK Document Type [DCT]
                              FC Document Number [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
                              GC G/L Date [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
                              VA frm_KeyF0911_JELN [JELN] = TK Journal Entry Line Number [JELN]
                              GC Explanation -Remark- [EXR] -> TK Name - Remark Explanation [EXR]
                              VA frm_NroAlocacaoR3 [R3] -> TK Reference 3 - Account Reconciliation [R3]
                              GC Projeto Rubrica [CN] -> TK Payment Number [CN]
                         ValidateAccountNumber(XX0901.ValidateAccountNumber)
                              GC Account Number  [ANI] -> szAccountNumber [ANI]
                              VA frm_AuxAid_AID [AID] <- szAccountID [AID]
                              VA frm_AuxMcu_MCU [MCU] <- szDatabaseBusinessUnit [MCU]
                              VA frm_AuxObj_OBJ [OBJ] <- szDatabaseObject [OBJ]
                              VA frm_AuxSub_SUB [SUB] <- szDatabaseSubsidiary [SUB]
                              "7" -> cBasedOnFormat [EV01]
                              VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
                         VA frm_AuxFy_FY [FY] = date_year([FC G/L Date [DGL]])-2000
                         VA frm_AuxPn_PN [PN] = date_month([FC G/L Date [DGL]])
                         ValidacaoAlocacao(N5509INV.ValidacaoAlocacao)
                              VA frm_AuxMcu_MCU [MCU] -> CCusto [MCU]
                              VA frm_AuxObj_OBJ [OBJ] -> CtaObjeto [OBJ]
                              VA frm_AuxSub_SUB [SUB] -> CtaDetalhe [SUB]
                              GC Numero Alocação [N001] -> NroAlocacao [N001]
                              GC Projeto Rubrica [CN] -> ProjetoRubrica [CN]
                              VA frm_ValorF0911 [AA] -> Valor [AA]
                              "I" -> cInd_Operacao [IDOP]
                              FC kco - Doc Key Comp (wf) [KCO] -> szCompanyKey [KCO]
                              FC Document Type [DCT] -> szDocumentType [DCT]
                              FC Document Number [DOC] -> mnDocVoucherInvoiceE [DOC]
                              GC G/L Date [DGL] -> jdDateForGLandVoucherJULIA [DGJ]
                              VA frm_KeyF0911_JELN [JELN] -> mnJournalEntryLineNo [JELN]
                              VA frm_F0911Key_EXTL [EXTL] -> szLineExtensionCode [EXTL]
                              VA frm_F0911Key_LT [LT] -> szLedgerType [LT]
                              "F0911" -> szTableName [LRSTN]
                              VA frm_UserId_USER [USER] -> szUserId [USER]
                              VA frm_WorkStationId_JOBN [JOBN] -> szWorkStationId [JOBN]
                              VA frm_ProgramId_PID [PID] -> szProgramId [PID]
                              VA frm_DateUpdated_UPMJ [UPMJ] -> jdDateUpdated [UPMJ]
                              VA frm_TimeLastUpdated_UPMT [UPMT] -> mnTimeLastUpdated [UPMT]
                              "N" -> szBatchType [ICUT]
                              FC Batch Number [ICU] -> mnBatchNumber [ICU]
                              "20" -> mnCentury [CTRY]
                              VA frm_AuxFy_FY [FY] -> mnFiscalYear1 [FY]
                              VA frm_AuxPn_PN [PN] -> mnPeriodNoGeneralLedge [PN]
                    End If
                    F4111.FetchNext  [Index 3: Document No, Type, +B]
                         VA frm_KeyF0911_JELN [JELN] <- TK Journal Entry Line Number [JELN]
               End While
          End If
          VA frm_TAM_GRID [MATH08] = [VA frm_TAM_GRID [MATH08]]-1
     End While
     // *****************************************************************************
End If
//
// -----------------------------------------------------------------------------
//       Clear Work File F41UI00, F09UI002, F09UI003, and Close Batch F0011
// -----------------------------------------------------------------------------
If SV Form_ Mode is equal to CO UPDATE_MODE
And VA frm_EV10_DoNotCloseBatch [EV10] is not equal to "1"
     F4114ClearDetailStack(XT4114Z1.F4114ClearDetailStack) [Asynchronous, Include in Transaction]
          FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
          UNDEFINED <> mnFromLineNumber [LNID]
          UNDEFINED <> mnThruLineNumber [LNID]
          UNDEFINED <> cDeleteHeader [EV01]
          UNDEFINED <> cDeleteDetail [EV01]
          FC Document Type [DCT] -> szDocumentType [DCT]
          "1" -> cProcessCloseBatch [EV01]
          FC icu - Batch No (wf) [ICU] -> mnBatchNumber [ICU]
          FC ev01 - Batch Status (wf) [EV01] -> cBatchStatus [IST]
          FC jobs - F0911 Job no (wf) [JOBS] -> mnF0911Jobnumber [JOBS]
          FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
End If
//
// SAR 6612745
VA frm_TPJobnumberA [JOBS] = FC JOBS - Inv Job Number (wf) [JOBS]
// End of SAR 6612745
FC JOBS - Inv Job Number (wf) [JOBS] = "0"
FC jobs - F0911 Job no (wf) [JOBS] = "0"
//
//
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Inicio - 12/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
If VA frm_mnNN_TDAY [TDAY] is not equal to <Blank>
And VA frm_mnNN_TDAY [TDAY] is not equal to <NULL>
And VA frm_mnNN_TDAY [TDAY] is not equal to "0"
     VA evt_cStatus_EV01 [EV01] = "W"
     GetAuditInfo(B9800100.GetAuditInfo)
          VA evt_szUserId_USER [USER] <> szUserName [USER]
          VA evt_jdDateUpdated_UPMJ [UPMJ] <> jdDate [DTE]
          VA evt_mnTimeLastUpdated_UPMT [UPMT] <> mnTime [TME0]
          VA evt_szWorkStationId_JOBN [JOBN] <> szWorkstation_UserId [JOBN]
     VA evt_szProgramId_PID [PID] = "P4112"
     VA evt_szSelectionValues001_VL01 [VL01] = SL VersionName
     //
     F55QUEUE.Select  [Index 1: OBNM, TDAY, DL011]
          VA frm_szNameObject_OBNM [OBNM] = TK Object Name [OBNM]
          VA frm_mnNN_TDAY [TDAY] = TK Time of Day [TDAY]
     F55QUEUE.FetchNext  [Index 1: OBNM, TDAY, DL011]
          VA evt_szDescription011_DL011 [DL011] <- TK Description 11 [DL011]
     While SV File_IO_Status is equal to CO SUCCESS
          VA evt_mnPosicao_UKID [UKID] = 0
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_mnBatchNumber_ICU [ICU] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 1
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_szBatchType_ICUT [ICUT] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 2
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_szCompanyKey_KCO [KCO] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 3
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_mnDocVoucherInvoiceE_DOC [DOC] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 4
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_szDocumentType_DCT [DCT] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 5
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_mnIdentifierShortItem_ITM [ITM] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 6
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_mnAmountUnitCost_UNCS [UNCS] = [VA evt_szConteudo_CNLS [CNLS]]
          VA evt_mnPosicao_UKID [UKID] = 7
          BuscaCampoRegistro(N55760Z1.BuscaCampoRegistro)
               "|" -> cSeparador_EV01 [EV01]
               VA evt_szConteudo_CNLS [CNLS] <- szConteudo_CNLS [CNLS]
               VA evt_szDescription011_DL011 [DL011] -> szRegistro_TXVC [TXVC]
               VA evt_mnPosicao_UKID [UKID] <> mnSegmento_UKID [UKID]
          VA evt_szCostCenter_MCU [MCU] = [VA evt_szConteudo_CNLS [CNLS]]
          //
          F5576B21.Select  [Index 1: EDBT, TRDJ, MMCU, KIT, ITM]
               VA evt_mnIdentifierShortItem_ITM [ITM] = TK Item Number - Short [ITM]
               VA frm_szBatchNumber_ICU [ICU] = TK Batch Number [ICU]
               VA evt_szBatchType_ICUT [ICUT] = TK Batch Type [ICUT]
               VA evt_szCompanyKey_KCO [KCO] = TK Document Company [KCO]
               VA evt_mnDocVoucherInvoiceE_DOC [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
               VA evt_szDocumentType_DCT [DCT] = TK Document Type [DCT]
          F5576B21.FetchNext  [Index 1: EDBT, TRDJ, MMCU, KIT, ITM]
               VA evt_mn_Chave_EDOC [EDOC] <- TK EDI - Document Number [EDOC]
               VA evt_jdChave_TRDJ [TRDJ] <- TK Date - Order/Transaction [TRDJ]
               VA evt_szChave_MMCU [MMCU] <- TK Branch [MMCU]
               VA evt_mnChave_KIT [KIT] <- TK Parent (short) Item Number [KIT]
               VA evt_mnChave_ITM [ITM] <- TK Item Number - Short [ITM]
               VA evt_szChave_Z5576B04 [Z5576B04] <- TK Centro de Custo [Z5576B04]
               VA evt_szChave_Z5576B14 [Z5576B14] <- TK Caderno [Z5576B14]
          While SV File_IO_Status is equal to CO SUCCESS
               F5576B21.Update  [Index 1: EDBT, TRDJ, MMCU, KIT, ITM]
                    VA evt_mn_Chave_EDOC [EDOC] = TK EDI - Document Number [EDOC]
                    VA evt_cStatus_EV01 [EV01] -> TK J.D. EnterpriseOne Event Point 01 [EV01]
                    VA evt_jdChave_TRDJ [TRDJ] = TK Date - Order/Transaction [TRDJ]
                    VA evt_szChave_MMCU [MMCU] = TK Branch [MMCU]
                    VA evt_mnChave_KIT [KIT] = TK Parent (short) Item Number [KIT]
                    VA evt_mnChave_ITM [ITM] = TK Item Number - Short [ITM]
                    VA evt_szUserId_USER [USER] -> TK User ID [USER]
                    VA evt_szProgramId_PID [PID] -> TK Program ID [PID]
                    VA evt_szSelectionValues001_VL01 [VL01] -> TK Selection Values 01 [VL01]
                    VA evt_szWorkStationId_JOBN [JOBN] -> TK Work Station ID [JOBN]
                    VA evt_jdDateUpdated_UPMJ [UPMJ] -> TK Date - Updated [UPMJ]
                    VA evt_mnTimeLastUpdated_UPMT [UPMT] -> TK Time - Last Updated [UPMT]
                    VA evt_szChave_Z5576B04 [Z5576B04] = TK Centro de Custo [Z5576B04]
                    VA evt_szChave_Z5576B14 [Z5576B14] = TK Caderno [Z5576B14]
               F5576B21.FetchNext  [Index 1: EDBT, TRDJ, MMCU, KIT, ITM]
                    VA evt_mn_Chave_EDOC [EDOC] <- TK EDI - Document Number [EDOC]
                    VA evt_jdChave_TRDJ [TRDJ] <- TK Date - Order/Transaction [TRDJ]
                    VA evt_szChave_MMCU [MMCU] <- TK Branch [MMCU]
                    VA evt_mnChave_KIT [KIT] <- TK Parent (short) Item Number [KIT]
                    VA evt_mnChave_ITM [ITM] <- TK Item Number - Short [ITM]
                    VA evt_szChave_Z5576B04 [Z5576B04] <- TK Centro de Custo [Z5576B04]
                    VA evt_szChave_Z5576B14 [Z5576B14] <- TK Caderno [Z5576B14]
          End While
          //
          VA evt_szLedgType_LEDG [LEDG] = "02"
          F4105.Update  [Index 2: Item No, Branch, +B]
               VA evt_mnIdentifierShortItem_ITM [ITM] = TK Item Number - Short [ITM]
               VA evt_szCostCenter_MCU [MCU] = TK Business Unit [MCU]
               VA evt_szLedgType_LEDG [LEDG] = TK Cost Method [LEDG]
               VA evt_mnAmountUnitCost_UNCS [UNCS] -> TK Amount - Unit Cost [UNCS]
          //
          F55QUEUE.FetchNext  [Index 1: OBNM, TDAY, DL011]
               VA evt_szDescription011_DL011 [DL011] <- TK Description 11 [DL011]
     End While
     //
     F55QUEUE.Delete  [Index 1: OBNM, TDAY, DL011]
          VA frm_szNameObject_OBNM [OBNM] = TK Object Name [OBNM]
          VA frm_mnNN_TDAY [TDAY] = TK Time of Day [TDAY]
End If
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Fim - 12/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Cancel/Close
Event: Button Clicked
Event GUID: f57dfc71-a23a-11d0-a204-0000f6728a56
=============================================
FC icu - Batch No (wf) [ICU] = FC Batch Number [ICU]
FC Prev Doc Type [DCTO] = FC Document Type [DCT]

=============================================
Form: Inventory Issues - W4112A
Object: HC Cancel/Close
Event: Post Button Clicked
Event GUID: 5ef15ed3-e064-11d1-9ac9-00600832fe19
=============================================
// 
// -----------------------------------------------------------------------------
//       Clear Work File F41UI00, F09UI002, F09UI003, and Close Batch F0011
// -----------------------------------------------------------------------------
If VA frm_EV10_DoNotCloseBatch [EV10] is not equal to "1"
     If FI Batchnumber [ICU] is not equal to "0"
          VA frm_ProcessCloseBatch_EV01 [EV01] = "2"
     Else
          VA frm_ProcessCloseBatch_EV01 [EV01] = "1"
     End If
     F4114ClearDetailStack(XT4114Z1.F4114ClearDetailStack) [Asynchronous]
          FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
          UNDEFINED <> mnFromLineNumber [LNID]
          UNDEFINED <> mnThruLineNumber [LNID]
          UNDEFINED <> cDeleteHeader [EV01]
          UNDEFINED <> cDeleteDetail [EV01]
          FC Document Type [DCT] -> szDocumentType [DCT]
          VA frm_ProcessCloseBatch_EV01 [EV01] -> cProcessCloseBatch [EV01]
          FC icu - Batch No (wf) [ICU] -> mnBatchNumber [ICU]
          FC ev01 - Batch Status (wf) [EV01] -> cBatchStatus [IST]
          FC jobs - F0911 Job no (wf) [JOBS] -> mnF0911Jobnumber [JOBS]
          FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
End If
//   


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Subledger Info
Event: Button Clicked
Event GUID: f57dfc72-a23a-11d0-a204-0000f6728a56
=============================================
//    
// If the processing option for equipment/sublegder info is set to a '1', '2'
// or '3', call the Account Information screen. 
//  
FC EV03_Ledger Cancel (wf) [EV03] = "0"
If PO cDisplayOptions [EV02] is equal to "1"
Or PO cDisplayOptions [EV02] is equal to "2"
Or PO cDisplayOptions [EV02] is equal to "3"
     Call App:P4112 Form:W4112C Version: 
          FC ani - Acct No Header (wf) [ANI] <> AccountNumber [ANI]
          FC sbl - Subledger Header (wf) [SBL] <> Subledger [SBL]
          FC sblt - SubTypeHead (wf) [SBLT] <> Subledgertype [SBLT]
          FC wr01 - PhaseHeader(wf) [WR01] <> Phase [WR01]
          FC asii - EquipHeader (wf) [ASII] <> Equipment [ASII]
          FC EV03_Ledger Cancel (wf) [EV03] <> Cancel [EV01]
          UNDEFINED <> mnUniqueKeyIDInternal [UKID]
     // 
     If FC EV03_Ledger Cancel (wf) [EV03] is not equal to "1"
          VA frm_EV03_LoadSubledger [EV03] = "1"
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Copy Bill of Materials
Event: Button Clicked
Event GUID: f57dfc73-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_SecondItemNo_LITM [LITM]
----------------------------------------
//
// If date is blank, needs to be loaded with todays date.  Copy BOM needs
// todays date.
//
If FC Order Date [TRDJ] is equal to Null Date
     FC Order Date [TRDJ] = date_today()
End If
//
// Call the Bill of Material screen
//
FC mmcu - BOM Branch (wf) [MMCU] = FC Business Unit [MCU]
//
// Sar 5478071 Copy BOM Enhancement
// Added new element to pass back batch qty UOM from Copy BOM form
Call App:P4112 Form:W4112B Version:Undefined
     FC trqt - BOM Qty (wf) [TRQT] <- Quantitytransaction [TRQT]
     FC mmcu - BOM Branch (wf) [MMCU] <> Costcenteralt [MMCU]
     FC itm - BOM Short Item (wf) [ITM] <- Identifiershortitem [ITM]
     VA frm_szUOMBatchQty_UOM [UOM] <- szUOMBatchQty [UOM]
//
// If BOM screen called, need to copy data from the F3002 for the item being
// copied
//
// Sar 5478071 Multi-level copy BOM enhancement
//
! FC ev01 - Last BOM Rcd (wf) [EV01] = "0"
! If FC itm - BOM Short Item (wf) [ITM] is not equal to "0"
     ! Get Selected Grid Row Number(FC Grid, FC math01 - Selected Grid Row (wf), )
     ! While FC ev01 - Last BOM Rcd (wf) [EV01] is equal to "0"
          ! GB Quantity [TRQT] = FC trqt - BOM Qty (wf) [TRQT]
          ! CopyBillOfMaterialData(B4100460.CopyBillOfMaterialData)
          !      FC mmcu - BOM Branch (wf) [MMCU] -> szBranch [MMCU]
          !      FC itm - BOM Short Item (wf) [ITM] -> mnItemNumber [ITM]
          !      FC Order Date [TRDJ] -> jdTransactionDate [TRDJ]
          !      GB Item Number [UITM] <> szPrimaryItemNumber [UITM]
          !      GB Quantity [TRQT] <> mnTransactionQuantity [TRQT]
          !      GB UM [TRUM] <> szTransactionUOM [UOM]
          !      FC GENLNG - BOM HRequest [GENLNG] <> idRequest [GENLNG]
          !      FC ev01 - Last BOM Rcd (wf) [EV01] <> cLastRecordRead [EV01]
          ! If FC ev01 - Last BOM Rcd (wf) [EV01] is equal to "0"
               ! GB Parent Item No [KIT] = FC itm - BOM Short Item (wf) [ITM]
               ! Insert Grid Buffer Row(FC Grid, FC math01 - Selected Grid Row (wf), <Yes>, <No>, <Yes>, <Yes>, <Yes>)
               ! FC math01 - Selected Grid Row (wf) [MATH01] = [FC math01 - Selected Grid Row (wf) [MATH01]]+1
          ! End If
     ! End While
! End If
//
VA frm_cBOMRecordFound_EV01 [EV01] = "1"
VA frm_cLevelAdded_EV01 [EV01] = "0"
If FC itm - BOM Short Item (wf) [ITM] is not equal to "0"
     // Save current grid row number
     Get Selected Grid Row Number(FC Grid, VA frm_mnSelectedGridRow_MATH01)
     //
     // Load BOM cache, single level
     // Begin SAR 5638222
     // Pass system date for 'As of' date so only those components that are within
     // the effective dates will be retrieved for the copy Bill of Material
     F3002LoadNextBOMLevel(B3003090.F3002LoadNextBOMLevel)
          "1" -> nLevelAsInteger [INT01]
          VA frm_cLevelAdded_EV01 [EV01] <- cLevelAdded [EV01]
          FC mmcu - BOM Branch (wf) [MMCU] -> szParentBranch [MMCU]
          FC itm - BOM Short Item (wf) [ITM] -> mnParentItem [KIT]
          "M" -> szTypeOfBill [TBM]
          SL DateToday -> jdAsOfDate [ASDE1]
          FC trqt - BOM Qty (wf) [TRQT] -> mnRequestedQty [RQTE1]
          VA frm_szUOMBatchQty_UOM [UOM] -> szRequestedQtyUOM [UOM]
          "1" -> cExcludePhantoms [EV01]
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnJobnumberA [JOBS]
          "0" -> cIncludeIntermediates [EV01]
          "0" -> mnSkiptoLineNumber [CPNB]
     //
     // End SAR 5638222
     If VA frm_cLevelAdded_EV01 [EV01] is equal to "1"
          While VA frm_cBOMRecordFound_EV01 [EV01] is equal to "1"
               //
               // Read top record.  After the read, delete the top record.
               //
               // SAR 6042261 - Retrieve second item number into a variable not the GB Item
               // Number.
               // SAR 6607719 Retrieve Component brach information into component line
               // instead of defaulting parent branch information.
               F3002GetBOMRecords(B3003090.F3002GetBOMRecords)
                    "1" -> nLevel [INT01]
                    VA frm_cBOMRecordFound_EV01 [EV01] <- cRecordFound [EV01]
                    GB Branch/Plant [MCU] <- szComponentBranch [CMCU]
                    GB UM [TRUM] <- szRequiredQtyUOM [UM]
                    GB Quantity [TRQT] <- mnActualExtendedQty [QNTY]
                    VA evt_SecondItemNo_LITM [LITM] <- szSecondItemNumber [LITM]
                    "1" -> cSingleLevelDelete [EV01]
                    GB Item Description [DSC1] <- szComponentDescription [DSC1]
                    FC JOBS - Inv Job Number (wf) [JOBS] -> mnJobnumberA [JOBS]
                    GB Unit Cost [UNCS] <- mnUnitCost [UNCS]
               //
               // SAR 6042261 - Pass the second item number and get the primary item number
               // for the branch plant and use that number in the grid.
               GetItemMasterDescUOM(B4001040.GetItemMasterDescUOM)
                    GB Item Number [UITM] <- szPrimaryItemNumber [UITM]
                    VA evt_SecondItemNo_LITM [LITM] -> szSecondItemNumber [LITM]
                    FC Business Unit [MCU] -> szBranchPlant [MCU]
               //
               // SAR 6042261 - Assign the FC Branch to the grid to avoid errors.
               // SAR 6607719 Disable defaulting parent branch information onto component
               // branch information into component line
               ! GB Branch/Plant [MCU] = FC Business Unit [MCU]
               //
               If VA frm_cBOMRecordFound_EV01 [EV01] is equal to "1"
                    GB Parent Item No [KIT] = FC itm - BOM Short Item (wf) [ITM]
                    //
                    // Insert a row and increment the row counter
                    Insert Grid Buffer Row(FC Grid, VA frm_mnSelectedGridRow_MATH01, <Yes>, <No>, <Yes>, <Yes>, <Yes>)
                    VA frm_mnSelectedGridRow_MATH01 [MATH01] = [VA frm_mnSelectedGridRow_MATH01 [MATH01]]+1
               End If
          End While
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Item Search
Event: Button Clicked
Event GUID: f57e08b2-a23a-11d0-a204-0000f6728a56
=============================================
// Initialize fields for multiple return 
FC ev01 - Cache Last Rcd (wf) [EV01] = <Blank>
// Call Multiple Return Item Search 
Call App:P40ITM2 Form:W40ITM2F Version:ZJDE0001
     UNDEFINED <> mnIdentifierShortItem [ITM]
     FC Business Unit [MCU] <> szCostCenter [MCU]
     UNDEFINED <> szLocation [LOCN]
     UNDEFINED <> szLot [LOTN]
     UNDEFINED <> mnQtyOnHandPrimaryUn [PQOH]
     UNDEFINED <> szUnitOfMeasureAsInput [UOM]
     UNDEFINED <> jdDateLayerExpiration [MMEJ]
     UNDEFINED <> cLotStatusCode [LOTS]
     UNDEFINED <> mnLotPotency [LOTP]
     UNDEFINED <> szLotGrade [LOTG]
     UNDEFINED <> cVisualAssistMode [EV01]
     UNDEFINED <> cQualityMode [EV01]
     UNDEFINED <> szLocationE1 [LOCNE1]
     UNDEFINED <> szItemNoUnknownFormat [UITM]
// Get the selected grid row number for proper inserts to the grid 
Get Selected Grid Row Number(FC Grid, FC math01 - SelectedGridRow (wf), )
// Unload the records returned from the search screen 
VA frm_CacheCursor_GENLNG [GENLNG] = "0"
While FC ev01 - Cache Last Rcd (wf) [EV01] is not equal to "1"
     Clear Grid Buffer(FC Grid)
     UnLoadMultipleReturn(B4100380.UnLoadMultipleReturn)
          GB Item Number [UITM] <- szItemNumber [UITM]
          GB Branch/Plant [MCU] <- szBranchPlant [MCU]
          GB Location [LOCNE1] <- szLocation [LOCN]
          GB Lot/Serial [LOTN] <- szLotNumber [LOTN]
          UNDEFINED <> szCatalogNumber [CATN]
          UNDEFINED <> mnSupplierNumber [VEND]
          UNDEFINED <> mnOrderNumber [DOCO]
          UNDEFINED <> szKeyCompany [KCOO]
          UNDEFINED <> szSuffixNumber [SFXO]
          UNDEFINED <> mnOrderLineNumber [LNID]
          FC ev01 - Cache Last Rcd (wf) [EV01] <> cLastRecordReadFlag [EV01]
          UNDEFINED <> szDocumentType [DCTO]
          GB Quantity [TRQT] <- mnQuantity [UORG]
          GB UM [TRUM] <- szUnitOfMeasure [UOM]
          UNDEFINED <> cSuppressTerminateCache [EV02]
          UNDEFINED <> mnUnitCost [PRRC]
          UNDEFINED <> nSequenceNumber [INT01]
          UNDEFINED <> szMemoLot1 [LOT1]
          UNDEFINED <> szMemoLot2 [LOT2]
          UNDEFINED <> szMemoLot3 [LOT3]
          VA frm_CacheCursor_GENLNG [GENLNG] <> idCacheCursor [GENLNG]
          UNDEFINED <> szVendorLotNumber [RLOT]
          UNDEFINED <> jdDateLayerExpiration [MMEJ]
          UNDEFINED <> cLotStatusCode [LOTS]
          UNDEFINED <> mnIdentifierShortItem [ITM]
          UNDEFINED <> mnQtyOnHandPrimaryUn [PQOH]
          UNDEFINED <> mnLotPotency [LOTP]
          UNDEFINED <> szLotGrade [LOTG]
          UNDEFINED <> szDescriptionLine1 [DSC1]
          UNDEFINED <> cStockingType [STKT]
          UNDEFINED <> mnQuantityAvailable [QAVAL]
          UNDEFINED <> mnDualQuantity [DQTY]
          UNDEFINED <> szUnitOfMeasureSecondary [UOM2]
          UNDEFINED <> jdBasedOnDate [BODJ]
          UNDEFINED <> jdLotEffectivityDate [DLEJ]
          UNDEFINED <> jdOnHandDate [OHDJ]
          UNDEFINED <> jdSellByDate [SBDJ]
          UNDEFINED <> jdBestBeforeDate [BBDJ]
          UNDEFINED <> jdUserLotDate1 [U1DJ]
          UNDEFINED <> jdUserLotDate2 [U2DJ]
          UNDEFINED <> jdUserLotDate3 [U3DJ]
          UNDEFINED <> jdUserLotDate4 [U4DJ]
          UNDEFINED <> jdUserLotDate5 [U5DJ]
          UNDEFINED <> cBasePriceIndicator [BPIND]
          UNDEFINED <> cAdjustmentIndicator [ADIND]
          UNDEFINED <> mnAdjustmentRevisionLevel [AREV]
          UNDEFINED <> cPriceOverrideCode [PROV]
     // Only do an insert to the grid buffer if the last record read is not a 1
     If FC ev01 - Cache Last Rcd (wf) [EV01] is not equal to "1"
          Insert Grid Buffer Row(FC Grid, FC math01 - SelectedGridRow (wf), <Yes>, <No>, <Yes>, <Yes>, <Yes>)
          FC math01 - SelectedGridRow (wf) [MATH01] = [FC math01 - SelectedGridRow (wf) [MATH01]]+1
     End If
End While
Set Control Focus(FC G/L Date [DGL])


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Item Ledger
Event: Button Clicked
Event GUID: 9093262b-a23d-11d0-a204-0000f6728a56
=============================================
Call App:P4111 Form:W4111A Version:PO szItemLedgerVersion
     FC Business Unit [MCU] -> Costcenter [MCU]


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Journal Entries
Event: Button Clicked
Event GUID: f57e08b3-a23a-11d0-a204-0000f6728a56
=============================================
//   
// Call Journal Entries 
//  
Call App:P0911 Form:W0911I Version:PO szJournalEntriesVersion
     "N" -> Batchtype [ICUT]
     FC Batch Number [ICU] -> Batchnumber [ICU]
     FC Document Type [DCT] -> Documenttype [DCT]
     FC Document Number [DOC] -> Docvoucherinvoicee [DOC]
     FC kco - Doc Key Comp (wf) [KCO] -> Companykey [KCO]


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Zero Unit Cost
Event: Button Clicked
Event GUID: c092edf0-07c6-11d2-ae8e-00600832243e
=============================================
If GC EV02-F4111 Record (wf) [EV02] is not equal to "1"
     GC EV09CostEntered(wf) [EV09] = "1"
     // 
     GC Unit Cost [UNCS] = "0"
     Set Grid Color(FC Grid,  <Current Row>, GC UnitCost, <Gray>)
     Disable Grid(FC Grid,  <Current Row>, GC UnitCost)
     // 
     GC Extended Amount [PAID] = "0"
     Set Grid Color(FC Grid, <Current Row>, GC ExtendedAmount, <Gray>)
     Disable Grid(FC Grid, <Current Row>, GC ExtendedAmount)
     // 
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Cancel Zero Cost
Event: Button Clicked
Event GUID: c092edf1-07c6-11d2-ae8e-00600832243e
=============================================
If GC EV02-F4111 Record (wf) [EV02] is not equal to "1"
     If GC EV09CostEntered(wf) [EV09] is equal to "1"
          // 
          GC EV09CostEntered(wf) [EV09] = "0"
          Set Grid Color(FC Grid,  <Current Row>, GC UnitCost, <Default>)
          Enable Grid(FC Grid,  <Current Row>, GC UnitCost)
          // 
          Set Grid Color(FC Grid, <Current Row>, GC ExtendedAmount, <Default>)
          Enable Grid(FC Grid, <Current Row>, GC ExtendedAmount)
          // 
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Delete Transaction
Event: Button Clicked
Event GUID: 9093413d-a23d-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_Num_of_Rows [MATH01]
----------------------------------------
// -----------------------------------------------------------------------------
// Delete is not allowed when record exists in F4111 (Update Mode);
// -----------------------------------------------------------------------------
If GC EV02-F4111 Record (wf) [EV02] is equal to "1"
And GC REVL-Reversal Done (wf) [REVL] is not equal to "1"
     Stop Processing
Else
     // 
     // If grid record exits, delete the detail stack records
     // 
     If GC EV01 - Record Written (wf) [EV01] is equal to "1"
          F4114ClearDetailStack(XT4114Z1.F4114ClearDetailStack)
               FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
               GC lnid - Line Number (wf) [LNID] -> mnFromLineNumber [LNID]
               GC lnid - Line Number (wf) [LNID] -> mnThruLineNumber [LNID]
               UNDEFINED <> cDeleteHeader [EV01]
               "1" -> cDeleteDetail [EV01]
               FC Document Type [DCT] -> szDocumentType [DCT]
               UNDEFINED <> cProcessCloseBatch [EV01]
               UNDEFINED <> mnBatchNumber [ICU]
               UNDEFINED <> cBatchStatus [IST]
               FC jobs - F0911 Job no (wf) [JOBS] -> mnF0911Jobnumber [JOBS]
               FC JOBS - Inv Job Number (wf) [JOBS] -> mnInvJobNumber [JOBS]
     End If
     If GC REVL-Reversal Done (wf) [REVL] is equal to "1"
     And GC EV02-F4111 Record (wf) [EV02] is equal to "1"
          GC Extended Amount [PAID] = [GC Extended Amount [PAID]]*-1
          GC Quantity [TRQT] = [GC Quantity [TRQT]]*-1
          If SL CurrencyProcessing is equal to ("Y","Z")
               Copy Currency Information(GC ExtendedAmount, FC ECST-Hold Currency Info (wf))
          End If
          Set Grid Row Bitmap(FC Grid, <Currently Selected Row>, <Blank/Clear>)
          GC EV01 - Record Written (wf) [EV01] = "0"
          GC REVL-Reversal Done (wf) [REVL] = "0"
          Stop Processing
     Else
          Delete Grid Row(FC Grid,  <Current Row>)
     End If
End If
//  
// If all rows were deleted, add 1 for entry 
//  
// SAR# 6584481, Insert grid row is replaced with insert grid buffer row as
// nsert grid row is obseleted. But in the case of input capable grid new line
// is automatically added, so no need to replace  and disable code to insert
// row.
! Get Max Grid Rows(FC Grid, VA evt_Num_of_Rows)
! If VA evt_Num_of_Rows [MATH01] is equal to "0"
     ! Insert Grid Row(FC Grid,  <Current Row>)
! End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Reverse Transaction
Event: Button Clicked
Event GUID: 9093413e-a23d-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_szLedgType_LEDG [LEDG]
evt_mnAmountUnitCost_UNCS [UNCS]
----------------------------------------
// SAR 4410921 Begin: Set flag and quantity for WMS
VA frm_cReversalOn_EV01 [EV01] = "1"
VA frm_mnRevQuantity_MATH01 [MATH01] = [GC Quantity [TRQT]]*-1
// SAR 4410921 End
//
// SAR 7576301 - Clear errors.
Clear Control Error(FC G/L Date [DGL])
//
If GC EV02-F4111 Record (wf) [EV02] is not equal to "1"
     Disable Control(HC Wareho &Loc Detail)
     Set Grid Cell Error(FC Grid,  <Current Row>, GC ItemNumber, "4189")
Else
     //
     // If the reversal has been done previously and Reversal is performed again, onl
     // delete off the Work Files (F41UI001, F09UI0003).
     //
     If GC REVL-Reversal Done (wf) [REVL] is equal to "1"
          F4114ClearDetailStack(XT4114Z1.F4114ClearDetailStack)
               FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
               GC lnid - Line Number (wf) [LNID] -> mnFromLineNumber [LNID]
               GC lnid - Line Number (wf) [LNID] -> mnThruLineNumber [LNID]
               UNDEFINED <> cDeleteHeader [EV01]
               "1" -> cDeleteDetail [EV01]
               FC Document Type [DCT] -> szDocumentType [DCT]
               UNDEFINED <> cProcessCloseBatch [EV01]
               UNDEFINED <> mnBatchNumber [ICU]
               UNDEFINED <> cBatchStatus [IST]
               FC jobs - F0911 Job no (wf) [JOBS] -> mnF0911Jobnumber [JOBS]
               FC JOBS - Inv Job Number (wf) [JOBS] -> mnInvJobNumber [JOBS]
          GC Quantity [TRQT] = [GC Quantity [TRQT]]*-1
          GC Extended Amount [PAID] = [GC Extended Amount [PAID]]*-1
          If SL CurrencyProcessing is equal to ("Y","Z")
               Copy Currency Information(GC ExtendedAmount, FC ECST-Hold Currency Info (wf))
          End If
          GC REVL-Reversal Done (wf) [REVL] = "0"
          GC EV01 - Record Written (wf) [EV01] = "0"
          Set Grid Row Bitmap(FC Grid, <Currently Selected Row>,  <Blank/Clear>)
          Stop Processing
     Else
          //
          // If Begin Doc processing has not occured, do so now.
          //
          If FC ev04 - Begin Doc One Time (wf) [EV04] is not equal to "1"
               // SAR 6849056 - G/L date default
               F4114BeginDocument(XT4114Z1.F4114BeginDocument)
                    "3" -> cDocumentAction [ACTN]
                    FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
                    GC Branch/Plant [MCU] -> szBranchPlant [MCU]
                    FC Batch Number [ICU] <> mnBatchNumber [ICU]
                    FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
                    FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELineNumber [JELN]
                    FC kco - Doc Key Comp (wf) [KCO] <> szDocumentKeyCompany [KCO]
                    FC Document Type [DCT] <> szDocumentType [DCT]
                    FC Document Number [DOC] <> mnDocumentNumber [DOC]
                    FC G/L Date [DGL] <> jdGLDate [DGL]
                    FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
                    FC Explanation [TREX] <> szGLExplanation [DL01]
               // end SAR 6849056
               If SV Error_Status is equal to CO SUCCESS
                    FC ev04 - Begin Doc One Time (wf) [EV04] = "1"
                    Disable Control(FC G/L Date [DGL])
                    //
                    // SAR 8849105 - Disabling transaction date also.
                    Disable Control(FC Order Date [TRDJ])
                    If SL CurrencyProcessing is equal to ("Y","Z")
                         DecimalTriggerGetByCompany(B1100005.DecimalTriggerGetByCompany)
                              FC kco - Doc Key Comp (wf) [KCO] -> szCompany [CO]
                              FC ECST-Hold Currency Info (wf) [ECST] <> mnDomesticAmount01 [AN01]
                              UNDEFINED <> mnDomesticAmount02 [AN02]
                              UNDEFINED <> mnDomesticAmount03 [AN03]
                              UNDEFINED <> mnDomesticAmount04 [AN04]
                              UNDEFINED <> mnDomesticAmount05 [AN05]
                              UNDEFINED <> mnDomesticAmount06 [AN06]
                              UNDEFINED <> mnDomesticAmount07 [AN07]
                              UNDEFINED <> mnDomesticAmount08 [AN08]
                              UNDEFINED <> mnDomesticAmount09 [AN09]
                              UNDEFINED <> mnDomesticAmount10 [AN10]
                              UNDEFINED <> mnDomesticAmount11 [AN11]
                              UNDEFINED <> mnDomesticAmount12 [AN12]
                              UNDEFINED <> mnDomesticAmount13 [AN13]
                              UNDEFINED <> mnDomesticAmount14 [AN14]
                              UNDEFINED <> mnDomesticAmount15 [AN15]
                    End If
               End If
          End If
          //
          // ENDIF Beg Doc One Time
          //
          //
          // If no errors, continue processing
          //
          If FC ev04 - Begin Doc One Time (wf) [EV04] is equal to "1"
               If SL CurrencyProcessing is equal to ("Y","Z")
                    Copy Currency Information(GC ExtendedAmount, FC ECST-Hold Currency Info (wf))
               End If
               // SAR 6484392, Pass in header level GL date to Editline inorder to write GL
               // entries with current date on the reversal entries. Previously GC GLdate
               // was being passed in.
               // SAR - 7190353 pass the version name of GL master business function
               // processing option(P0900049) to EditLine
               // BUG# 11905201 - PMPN Enhancements - Pass PMPN Fields to EditLine
               F4114EditLine(XT4114Z1.F4114EditLine)
                    "3" -> cLineAction [ACTN]
                    FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
                    GC EV01 - Record Written (wf) [EV01] <> cRecordWrittenToWorkFile [EV04]
                    GC lnid - Line Number (wf) [LNID] <> mnLineNumber [LNID]
                    FC G/L Date [DGL] -> jdGLDate [DGL]
                    FC Explanation [TREX] -> szGLExplanation [DSC1]
                    "1" -> cUpdateQuantityOnHand [EV01]
                    PO cEverestEventPoint06 [EV06] -> cAllowQtyOverAvailable [EV01]
                    GC Parent Item No [KIT] -> mnParentShortItemNumber [KIT]
                    GC Account Number  [ANI] -> szAccountNumber [ANI]
                    GC Subledger [SBL] -> szSubledger [SBL]
                    GC Sub Type [SBLT] -> cSubledgerType [SBLT]
                    GC Phase [WR01] -> szPhase [WR01]
                    GC Equipment [ASII] -> szAssetID [ASII]
                    FC lnid - Prev Line Number (wf) [LNID] <> mnPreviousLinenumber [LNID]
                    FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELine [JELN]
                    PO cDefaultPrimaryLocation [EV01] -> cDefaultFromPrimaryLocation [EV01]
                    PO cEverestEventPoint07 [EV07] -> cAllowHeldLots [EV01]
                    FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
                    FC Document Type [DCT] -> szDocumentType [DCT]
                    FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
                    FC Batch Number [ICU] -> mnBatchNumber [ICU]
                    FC ev01 - Batch Status (wf) [EV01] -> cBatchStatus [IST]
                    GC Branch/Plant [MCU] -> szBranchPlant [MCU]
                    GC Item Number [UITM] -> szItemNumber [UITM]
                    GC Location [LOCNE1] -> szDisplayedLocation [LOCNE1]
                    GC LOCN - Location File (wf) [LOCN] -> szLocation [LOCN]
                    GC Lot/Serial [LOTN] -> szLotNumber [LOTN]
                    GC UM [TRUM] -> szTransactionUOM [TRUM]
                    GC Quantity [TRQT] <> mnTransactionQty [TRQT]
                    GC Unit Cost [UNCS] -> mnTransactionUnitCost [UNCS]
                    GC Extended Amount [PAID] -> mnExtendedAmount [PAID]
                    "1.00" -> mnTransactionProcessType [MATH01]
                    FC Document Number [DOC] -> mnDocumentNumber [DOC]
                    GC Reason Code [RCD] -> szReasonCode [RCD]
                    FC jobs - F0911 Job no (wf) [JOBS] <> mnF0911JobNumber [JOBS]
                    FC kco - Doc Key Comp (wf) [KCO] <> szKeyCompany [KCO]
                    GC STKT - Stocking Type (wf) [STKT] <- cStockingType [STKT]
                    FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
                    GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH02]
                    "1" -> cProcessJE [EV01]
                    VA frm_GLMBFVersion_VER [VER] -> szGLMBFVersion [VER]
                    GC Secondary Quantity [SQOR] <> mnSecondaryQty [SQOR]
                    GC Sec UoM [UOM2] -> szSecondaryUOM [UOM2]
                    <Blank> -> cDualCycleCountGLOffset [EV01]
                    PO szLotGroup [LOTGRP] -> szLotGroup [LOTGRP]
                    GC Production Number [PMPN] -> szProjectManufacturingProd [PMPN]
                    GC Production Number Short [PNS] -> mnProductionNumberShort [PNS]
                    GC ProductionNumber ProcessFlag [FLAG] <> cProcessFlag [FLAG]
                    PO cProductionNoConsumption [EV01] -> cProdNoConsumption [PNCM]
               // End SAR# 6484392
               If SV Error_Status is equal to CO SUCCESS
                    GC REVL-Reversal Done (wf) [REVL] = "1"
                    Set Grid Row Bitmap(FC Grid, <Current Row>,  <X Mark>)
                    Enable Control(HC &OK/&Select)
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    // Giovani Perotto Mesquita - Inicio - 12/06/19
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    VA frm_szTransactionReferenc_TREF [TREF] = <NULL>
                    F4111.Select  [Index 1: Unique Key ID]
                         GC ukid - Unique Key ID (wf) [UKID] = TK Unique Key ID (Internal) [UKID]
                    F4111.FetchNext  [Index 1: Unique Key ID]
                         VA frm_szBatchNumber_ICU [ICU] <- TK Batch Number [ICU]
                         VA frm_szTransactionReferenc_TREF [TREF] <- TK Transaction Reference [TREF]
                    If VA frm_szTransactionReferenc_TREF [TREF] is equal to "**BTI**"
                         VA evt_szLedgType_LEDG [LEDG] = "02"
                         If VA frm_mnNN_TDAY [TDAY] is equal to <Blank>
                         Or VA frm_mnNN_TDAY [TDAY] is equal to <NULL>
                         Or VA frm_mnNN_TDAY [TDAY] is equal to "0"
                              GetNextUniqueKeyID(X00022.GetNextUniqueKeyID)
                                   "P4112" -> szObjectName [OBNM]
                                   VA frm_mnNN_TDAY [TDAY] <> mnUniqueKeyID [UKID]
                         End If
                         //
                         VA evt_mnAmountUnitCost_UNCS [UNCS] = 0
                         F4105.Select  [Index 1: Item No,Branch, +A]
                              GC ITM - Short Item No (wf) [ITM] = TK Item Number - Short [ITM]
                              GC Branch/Plant [MCU] = TK Business Unit [MCU]
                              VA evt_szLedgType_LEDG [LEDG] = TK Cost Method [LEDG]
                         F4105.FetchNext  [Index 1: Item No,Branch, +A]
                              VA evt_mnAmountUnitCost_UNCS [UNCS] <- TK Amount - Unit Cost [UNCS]
                         //
                         VA frm_szDescription011_DL011 [DL011] = <NULL>
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [VA frm_szBatchNumber_ICU [ICU]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "N")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [GC kco - Doc Co (wf) [KCO]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [GC doc - Document Number (wf) [DOC]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [GC dct - Do Ty (wf) [DCT]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [GC ITM - Short Item No (wf) [ITM]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [VA evt_mnAmountUnitCost_UNCS [UNCS]])
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], "|")
                         VA frm_szDescription011_DL011 [DL011] = concat([VA frm_szDescription011_DL011 [DL011]], [GC Branch/Plant [MCU]])
                         F55QUEUE.Insert  [Index 1: OBNM, TDAY, DL011]
                              VA frm_szNameObject_OBNM [OBNM] -> TK Object Name [OBNM]
                              VA frm_mnNN_TDAY [TDAY] -> TK Time of Day [TDAY]
                              VA frm_szDescription011_DL011 [DL011] -> TK Description 11 [DL011]
                    End If
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    // Giovani Perotto Mesquita - Fim - 12/06/19
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
               Else
                    Disable Control(HC &OK/&Select)
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    // Giovani Perotto Mesquita - Inicio - 12/06/19
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    F55QUEUE.Delete  [Index 1: OBNM, TDAY, DL011]
                         VA frm_szNameObject_OBNM [OBNM] = TK Object Name [OBNM]
                         VA frm_mnNN_TDAY [TDAY] = TK Time of Day [TDAY]
                    VA frm_mnNN_TDAY [TDAY] = 0
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
                    // Giovani Perotto Mesquita - Fim - 12/06/19
                    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
               End If
          End If
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Warehouse Location Detail Selection
Event: Button Clicked
Event GUID: 5ef15ed1-e064-11d1-9ac9-00600832fe19
=============================================
// --------------------------------------------------------------------
// SAR 4336177 - Adjustments w/ lots writing 2 F4602's
// Check error status before continuing
//  SAR 4410921: Diable Error checking per request by WMS
// --------------------------------------------------------------------
If GC REVL-Reversal Done (wf) [REVL] is not equal to "1"
     VA frm_TQOH_WareHouseQuantity [TQOH] = -1*[GC Quantity [TRQT]]
     VA frm_SecondaryQty [SQOH] = 0-[GC Secondary Quantity [SQOR]]
Else
     VA frm_TQOH_WareHouseQuantity [TQOH] = GC Quantity [TRQT]
     VA frm_SecondaryQty [SQOH] = GC Secondary Quantity [SQOR]
End If
If GC WMS Line (wf) [MATH05] is equal to <Blank>
Or GB WMS Line (wf) [MATH05] is equal to "0"
Or GC WMS Line (wf) [MATH05] is equal to <NULL>
     GC WMS Line (wf) [MATH05] = GC lnid - Line Number (wf) [LNID]
End If
//  SAR 4410921 Begin: For licensed items, call P4605 with 
//  different parameter
If VA frm_cReversalOn_EV01 [EV01] is equal to "1"
     Call App:P4605 Form:W4605A Version:Undefined
          GC ITM - Short Item No (wf) [ITM] -> mnShortItemNumber [ITM]
          GC Branch/Plant [MCU] -> szBranchPlant [MCU]
          GC LOCN - Location File (wf) [LOCN] -> szLocation [LOCN]
          GC Lot/Serial [LOTN] -> szLot [LOTN]
          FC Document Type [DCT] -> szOrderType [DCTO]
          FC kco - Doc Key Comp (wf) [KCO] -> szKeyCompany [KCOO]
          VA frm_mnRevQuantity_MATH01 [MATH01] -> mnTransactionQuantity [QTY1]
          GC UM [TRUM] -> szTransactionUnitOfMeasure [UOM1]
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnJobnumberA [JOBS]
          "1" -> cQuantityValidation [EV01]
          PO cEverestEventPoint06 [EV06] -> cAllowNegativeAvailability [EV02]
          "1" -> cAllowNegativeOnHand [EV03]
          GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH01]
          GC EV01 - Record Written (wf) [EV01] -> cAsynchProcessCompleted [EV08]
          VA frm_SecondaryQty [SQOH] <> mnDualQuantity [SQOR]
          GC Sec UoM [UOM2] -> szDualUnitOfMeasure [UOM2]
          "EP4112" -> szProgramID [#PID]
Else
     Call App:P4605 Form:W4605A Version:Undefined
          GC ITM - Short Item No (wf) [ITM] -> mnShortItemNumber [ITM]
          GC Branch/Plant [MCU] -> szBranchPlant [MCU]
          GC LOCN - Location File (wf) [LOCN] -> szLocation [LOCN]
          GC Lot/Serial [LOTN] -> szLot [LOTN]
          FC Document Number [DOC] -> mnOrderNumber [DOCO]
          FC Document Type [DCT] -> szOrderType [DCTO]
          FC kco - Doc Key Comp (wf) [KCO] -> szKeyCompany [KCOO]
          VA frm_TQOH_WareHouseQuantity [TQOH] -> mnTransactionQuantity [QTY1]
          GC UM [TRUM] -> szTransactionUnitOfMeasure [UOM1]
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnJobnumberA [JOBS]
          "1" -> cQuantityValidation [EV01]
          PO cEverestEventPoint06 [EV06] -> cAllowNegativeAvailability [EV02]
          "1" -> cAllowNegativeOnHand [EV03]
          GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH01]
          GC EV01 - Record Written (wf) [EV01] -> cAsynchProcessCompleted [EV08]
          VA frm_SecondaryQty [SQOH] <> mnDualQuantity [SQOR]
          GC Sec UoM [UOM2] -> szDualUnitOfMeasure [UOM2]
          "EP4112" -> szProgramID [#PID]
End If
//  SAR 4410921 End
// --------------------------------------------------------------------
// --------------------------------------------------------------------
If GC Call P4605 [EV01] is equal to "1"
     GC Call P4605 [EV01] = "2"
End If
// 
// SAR 7112371 - For firing "Row is exited and changed inline" event on the
// web. This will be reset by the code in the event so that it may be fired
// again if necessary
GC For Firing Row Exit Inline [EV01] = "1"


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Display configuration for location
Event: Button Clicked
Event GUID: de647313-3971-40ab-978e-33706167b7be
=============================================
// 
If GC STKT - Stocking Type (wf) [STKT] is equal to or empty <Blank>
Or GC STKT - Stocking Type (wf) [STKT] is equal to or empty <Blank>
     F4102.Open
          
     F4102.FetchSingle  [Index 1: Branch, Item]
          GC ITM - Short Item No (wf) [ITM] = TK Item Number - Short [ITM]
          GC Branch/Plant [MCU] = TK Business Unit [MCU]
          GC STKT - Stocking Type (wf) [STKT] <- TK Stocking Type [STKT]
     F4102.Close
          
End If
// 
If GC STKT - Stocking Type (wf) [STKT] is equal to "c"
Or GC STKT - Stocking Type (wf) [STKT] is equal to "C"
     // 
     If GC CFGSID - Unique Config. ID (wf) [CFGSID] is equal to <Blank>
          F41021.Open
               
          F41021.FetchSingle  [Index 1: Item, Branch, +A]
               GC ITM - Short Item No (wf) [ITM] = TK Item Number - Short [ITM]
               GC Branch/Plant [MCU] = TK Business Unit [MCU]
               GC LOCN - Location File (wf) [LOCN] = TK Location [LOCN]
               GC Lot/Serial [LOTN] = TK Lot/Serial Number [LOTN]
               GC CFGSID - Unique Config. ID (wf) [CFGSID] <- TK Unique Configuration ID [CFGSID]
          F41021.Close
               
     End If
     // 
     If GC CFGSID - Unique Config. ID (wf) [CFGSID] is not equal to <Blank>
     And GC CFGSID - Unique Config. ID (wf) [CFGSID] is greater than <Blank>
          Call App:P32983 Form:W32983B Version:Undefined
               UNDEFINED <> mnConfigurationIDNumber [CFGID]
               UNDEFINED <> mnComponentIDNumber [CFGCID]
               UNDEFINED <> mnParentSegmentNumber [PEL]
               UNDEFINED <> szSegmentValue [SGVL]
               GC ITM - Short Item No (wf) [ITM] -> mnItemNumberShortKit [KIT]
               GC CFGSID - Unique Config. ID (wf) [CFGSID] -> szUniqueConfigurationID [CFGSID]
     End If
     // 
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Select configuration from another location
Event: Button Clicked
Event GUID: 90933ade-a23d-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_EV01_FirstRowDone [EV01]
evt_EV02_PositiveQty [EV02]
----------------------------------------
// -----------------------------------------------------------------------------
//      In an Update Mode:   The record is already exists,  but the Stocking
//      Type is usually blank.  Retrieve the Stocking Type from F4102
// -----------------------------------------------------------------------------
If GC STKT - Stocking Type (wf) [STKT] is equal to or empty <Blank>
Or GC STKT - Stocking Type (wf) [STKT] is equal to or empty <NULL>
     If GC EV02-F4111 Record (wf) [EV02] is equal to "1"
          F4102.Open
               
          F4102.FetchSingle  [Index 1: Branch, Item]
               GC ITM - Short Item No (wf) [ITM] = TK Item Number - Short [ITM]
               GC Branch/Plant [MCU] = TK Business Unit [MCU]
               GC STKT - Stocking Type (wf) [STKT] <- TK Stocking Type [STKT]
          F4102.Close
               
     End If
End If
// 
GetItemMasterDescUOM(B4001040.GetItemMasterDescUOM)
     GC ITM - Short Item No (wf) [ITM] -> mnShortItemNumber [ITM]
     UNDEFINED <> szPrimaryItemNumber [UITM]
     UNDEFINED <> szSecondItemNumber [LITM]
     UNDEFINED <> szThirdItemNumber [AITM]
     UNDEFINED <> szDescription [DSC1]
     UNDEFINED <> szDescriptionLine2 [DSC2]
     UNDEFINED <> szItemFlashMessage [IFLA]
     VA frm_UOM1_PrimaryUOM [UOM1] <> szPrimaryUOM [UOM1]
     UNDEFINED <> szSecondaryUOM [UOM2]
     UNDEFINED <> szPurchasingUOM [UOM3]
     UNDEFINED <> szPricingUOM [UOM4]
     UNDEFINED <> szShippingUOM [UOM6]
     UNDEFINED <> szWeightUOM [UWUM]
     UNDEFINED <> szVolumeUOM [UVM1]
     "1" -> cSuppressErrorMessage [EV01]
     UNDEFINED <> szErrorMessageID [DTAI]
     GC Branch/Plant [MCU] -> szBranchPlant [MCU]
     UNDEFINED <> cBackOrdersAllowedYN [BACK]
     UNDEFINED <> cStockingType [STKT]
     UNDEFINED <> cBulkPackedFlag [BPFG]
     UNDEFINED <> cInventoryCostLevel [CLEV]
     UNDEFINED <> szLineType [LNTY]
     UNDEFINED <> cLotProcessType [SRCE]
     UNDEFINED <> mnShelfLifeDays [SLD]
     UNDEFINED <> szGLClassCode [GLPT]
     UNDEFINED <> cContractItem [CONT]
     UNDEFINED <> szProductionUOM [UOM8]
     UNDEFINED <> szFromGrade [FRGD]
     UNDEFINED <> szThruGrade [THGD]
     UNDEFINED <> mnFromPotency [FRMP]
     UNDEFINED <> mnThruPotency [THRP]
     UNDEFINED <> cPriceLevel [PLEV]
     UNDEFINED <> cGradePotencyPricing [PRPO]
     UNDEFINED <> cRoundToWholeNumber [SNS]
     UNDEFINED <> cKitPricingMethod [PMTH]
     UNDEFINED <> szComponentUOM [UOM9]
     VA frm_TFLA_StandardUOMFlag [TFLA] <> szStandardUOMConversion [TFLA]
     UNDEFINED <> mnBuyer [BUYR]
     UNDEFINED <> mnPlannerNumber [ANPL]
     UNDEFINED <> szPrintMessage [INMG]
     UNDEFINED <> cCommitmentMethod [CMGL]
     UNDEFINED <> cCheckAvailability [CKAV]
     UNDEFINED <> cSerialNumberReqsted [SRNR]
     UNDEFINED <> cLotStatusCode [LOTS]
     UNDEFINED <> cPurchasePriceLevel [PPLV]
     UNDEFINED <> szTemplate [TMPL]
     UNDEFINED <> szSegment1 [SEG1]
     UNDEFINED <> szSegment2 [SEG2]
     UNDEFINED <> szSegment3 [SEG3]
     UNDEFINED <> szSegment4 [SEG4]
     UNDEFINED <> szSegment5 [SEG5]
     UNDEFINED <> szSegment6 [SEG6]
     UNDEFINED <> szSegment7 [SEG7]
     UNDEFINED <> szSegment8 [SEG8]
     UNDEFINED <> szSegment9 [SEG9]
     UNDEFINED <> szSegment10 [SEG0]
     UNDEFINED <> cMatrixControlled [MIC]
     UNDEFINED <> cDualUnitOfMeasureItem [DUAL]
     UNDEFINED <> cDualPickingProcessOption [DPPO]
     UNDEFINED <> mnDualTolerance [DLTL]
GetItemUoMConversionFactor(B4000520.GetItemUoMConversionFactor)
     GC Branch/Plant [MCU] -> szBranchPlant [MCU]
     GC UM [TRUM] -> szFromUnitOfMeasure [UOM]
     VA frm_UOM1_PrimaryUOM [UOM1] -> szToUnitOfMeasure [RUM]
     GC Quantity [TRQT] -> mnQuantityToConvert [QTY]
     UNDEFINED <> cInventoryInterfaceFlag [IVI]
     UNDEFINED <> mnConversionFactorFromToPrim [CONV]
     UNDEFINED <> mnConversionFactorFrom_to_To [CONV]
     UNDEFINED <> mnConversionFactorTo_to_Primar [CONV]
     VA frm_TRQT_PrimaryQty [TRQT] <> mnQuantityConvertedToPrimary [QTY]
     UNDEFINED <> cConvertToSecondary [CVOB]
     UNDEFINED <> mnQuantityConvertedToSecondary [QTY]
     UNDEFINED <> cConvertToPurchasing [CVOB]
     UNDEFINED <> mnQuantityConvertedToPurchasin [QTY]
     UNDEFINED <> cConvertToPricing [CVOB]
     UNDEFINED <> mnQuantityConvertedToPricing [QTY]
     UNDEFINED <> cConvertToShipping [CVOB]
     UNDEFINED <> mnQuantityConvertedToShipping [QTY]
     UNDEFINED <> cConvertToWeight [CVOB]
     UNDEFINED <> mnQuantityConvertedToWeight [QTY]
     UNDEFINED <> cConvertToVolume [CVOB]
     UNDEFINED <> mnQuantityConvertedToVolume [QTY]
     UNDEFINED <> cPotencyMode [GFLG]
     UNDEFINED <> szLotNumber [LOTN]
     UNDEFINED <> cPotencyControl [OT1Y]
     UNDEFINED <> mnStandardPotency [STDP]
     UNDEFINED <> szErrorMessageID [DTAI]
     "1" -> cSuppressErrorMsg [EV01]
     UNDEFINED <> cPotencyType [EV01]
     GC ITM - Short Item No (wf) [ITM] -> mnShortItemNumber [ITM]
     UNDEFINED <> cUOMByBranch [BUMC]
     VA frm_UOM1_PrimaryUOM [UOM1] -> szUOMToPrimary [UOM]
     UNDEFINED <> szUOMToSecondary [UOM]
     UNDEFINED <> szUOMToPurchasing [UOM]
     UNDEFINED <> szUOMToPricing [UOM]
     UNDEFINED <> szUOMToWeight [UOM]
     UNDEFINED <> szUOMToVolume [UOM]
     UNDEFINED <> szUOMToShipping [UOM]
     VA frm_TFLA_StandardUOMFlag [TFLA] -> szStandardUOMConversion [TFLA]
     UNDEFINED <> mnQuantityConvertedFromtoTo [QTY]
     UNDEFINED <> cExcludeFlag [EXSO]
// 
If GC Quantity [TRQT] is less than "0"
     VA evt_EV02_PositiveQty [EV02] = "0"
Else
     VA evt_EV02_PositiveQty [EV02] = "1"
End If
// 
VA frm_TRQT_PrimaryQty [TRQT] = abs([VA frm_TRQT_PrimaryQty [TRQT]])
// 
If GC STKT - Stocking Type (wf) [STKT] is equal to "c"
Or GC STKT - Stocking Type (wf) [STKT] is equal to "C"
     // 
     // Disabled until further discussion on whether the  call needs to be made to
     // W32053A
     ! Call App:P32053 Form:W32053B Version:Undefined
     !      GC ITM - Short Item No (wf) [ITM] -> IdentifierShortItem [ITM]
     !      GC Branch/Plant [MCU] -> CostCenter [MCU]
     !      UNDEFINED <> Location [LOCN]
     !      UNDEFINED <> Lot [LOTN]
     !      VA frm_TRQT_PrimaryQty [TRQT] -> Unitsquantityshipped [SOQS]
     !      UNDEFINED <> Unitstransactionqty [UORG]
     !      VA frm_UOM1_PrimaryUOM [UOM1] -> UnitOfMeasure [UOM1]
     !      PO cEverestEventPoint07 [EV07] -> AllowIssuesFromHeldLots [EV01]
     !      PO cEverestEventPoint06 [EV06] -> AllowOverIssues [EV02]
     !      VA evt_EV02_PositiveQty [EV02] -> AddToInventoryFlag [EV03]
     !      GC CFGSID - Unique Config. ID (wf) [CFGSID] <- szUniqueConfigID [CFGSID]
     // -----------------------------------------------------------------------------
     //      If  FOCUS on the existing row in an Update mode, do not overwrite
     //      the existing row.  Insert new rows.
     // -----------------------------------------------------------------------------
     If GC EV02-F4111 Record (wf) [EV02] is equal to "1"
          VA evt_EV01_FirstRowDone [EV01] = "1"
          VA frm_UNCS_UnitCost [UNCS] = "0"
     Else
          VA evt_EV01_FirstRowDone [EV01] = "0"
          VA frm_UNCS_UnitCost [UNCS] = GC Unit Cost [UNCS]
     End If
     // 
     VA frm_UITM_ItemNumber [UITM] = GC Item Number [UITM]
     FC ev01 - Cache Last Rcd (wf) [EV01] = "0"
     VA frm_CacheCursorConfig_GENLNG [GENLNG] = "0"
     // 
     While FC ev01 - Cache Last Rcd (wf) [EV01] is not equal to "1"
          Clear Grid Buffer(FC Grid)
          UnLoadMultipleReturn(B4100380.UnLoadMultipleReturn)
               UNDEFINED <> szItemNumber [UITM]
               GB Branch/Plant [MCU] <- szBranchPlant [MCU]
               GB Location [LOCNE1] <- szLocation [LOCN]
               GB Lot/Serial [LOTN] <- szLotNumber [LOTN]
               UNDEFINED <> szCatalogNumber [CATN]
               UNDEFINED <> mnSupplierNumber [VEND]
               UNDEFINED <> mnOrderNumber [DOCO]
               UNDEFINED <> szKeyCompany [KCOO]
               UNDEFINED <> szSuffixNumber [SFXO]
               UNDEFINED <> mnOrderLineNumber [LNID]
               FC ev01 - Cache Last Rcd (wf) [EV01] <> cLastRecordReadFlag [EV01]
               UNDEFINED <> szDocumentType [DCTO]
               GB Quantity [TRQT] <- mnQuantity [UORG]
               UNDEFINED <> szUnitOfMeasure [UOM]
               UNDEFINED <> cSuppressTerminateCache [EV02]
               UNDEFINED <> mnUnitCost [PRRC]
               UNDEFINED <> nSequenceNumber [INT01]
               UNDEFINED <> szMemoLot1 [LOT1]
               UNDEFINED <> szMemoLot2 [LOT2]
               UNDEFINED <> szMemoLot3 [LOT3]
               VA frm_CacheCursorConfig_GENLNG [GENLNG] <> idCacheCursor [GENLNG]
               UNDEFINED <> szVendorLotNumber [RLOT]
               UNDEFINED <> jdDateLayerExpiration [MMEJ]
               UNDEFINED <> cLotStatusCode [LOTS]
               UNDEFINED <> mnIdentifierShortItem [ITM]
               UNDEFINED <> mnQtyOnHandPrimaryUn [PQOH]
               UNDEFINED <> mnLotPotency [LOTP]
               UNDEFINED <> szLotGrade [LOTG]
               UNDEFINED <> szDescriptionLine1 [DSC1]
               UNDEFINED <> cStockingType [STKT]
               UNDEFINED <> mnQuantityAvailable [QAVAL]
               UNDEFINED <> mnDualQuantity [DQTY]
               UNDEFINED <> szUnitOfMeasureSecondary [UOM2]
               UNDEFINED <> jdBasedOnDate [BODJ]
               UNDEFINED <> jdLotEffectivityDate [DLEJ]
               UNDEFINED <> jdOnHandDate [OHDJ]
               UNDEFINED <> jdSellByDate [SBDJ]
               UNDEFINED <> jdBestBeforeDate [BBDJ]
               UNDEFINED <> jdUserLotDate1 [U1DJ]
               UNDEFINED <> jdUserLotDate2 [U2DJ]
               UNDEFINED <> jdUserLotDate3 [U3DJ]
               UNDEFINED <> jdUserLotDate4 [U4DJ]
               UNDEFINED <> jdUserLotDate5 [U5DJ]
               UNDEFINED <> cBasePriceIndicator [BPIND]
               UNDEFINED <> cAdjustmentIndicator [ADIND]
               UNDEFINED <> mnAdjustmentRevisionLevel [AREV]
               UNDEFINED <> cPriceOverrideCode [PROV]
          // 
          If FC ev01 - Cache Last Rcd (wf) [EV01] is not equal to "1"
               // 
               If VA evt_EV02_PositiveQty [EV02] is not equal to "1"
                    GB Quantity [TRQT] = [GB Quantity [TRQT]]*-1
               End If
               // 
               GB UM [TRUM] = VA frm_UOM1_PrimaryUOM [UOM1]
               GB Item Number [UITM] = VA frm_UITM_ItemNumber [UITM]
               GB Unit Cost [UNCS] = VA frm_UNCS_UnitCost [UNCS]
               // 
               If VA evt_EV01_FirstRowDone [EV01] is not equal to "1"
                    GC Branch/Plant [MCU] = GB Branch/Plant [MCU]
                    GC Lot/Serial [LOTN] = GB Lot/Serial [LOTN]
                    GC Location [LOCNE1] = GB Location [LOCNE1]
                    GC UM [TRUM] = GB UM [TRUM]
                    GC Quantity [TRQT] = GB Quantity [TRQT]
                    GC CFGSID - Unique Config. ID (wf) [CFGSID] = <NULL>
                    GC Unit Cost [UNCS] = GB Unit Cost [UNCS]
                    GC Item Number [UITM] = GB Item Number [UITM]
                    GC Extended Amount [PAID] = "0"
                    VA evt_EV01_FirstRowDone [EV01] = "1"
               Else
                    Insert Grid Buffer Row(FC Grid,  <After Current Row>,  <Yes>,  <No>,  <Yes>,  <Yes>,  <Yes>)
               End If
               // ----- ENDIF  Last Cache not equal '1' -----
          End If
          // 
     End While
     // 
End If
// ----- ENDIF  Stocking Type equals 'C' ----- 


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Select Configuration from Segment Search
Event: Button Clicked
Event GUID: 8ca5f3a7-8f22-4076-914a-26d88b90ad12
=============================================
Call App:P32202 Form:W32202C Version:Undefined
     GC ITM - Short Item No (wf) [ITM] -> ItemNumberShortKit [KIT]
     GC Branch/Plant [MCU] -> CostCenter [MCU]
     UNDEFINED <> ParentSegmentNumber [PEL]
     UNDEFINED <> mnJobnumberA [JOBS]
     UNDEFINED <> mnConfigurationIDNumber [CFGID]
     GC CFGSID - Unique Config. ID (wf) [CFGSID] <- szUniqueConfigurationID [CFGSID]
     UNDEFINED <> szLocation [LOCN]
     UNDEFINED <> szLot [LOTN]
     UNDEFINED <> mnQuantityAvailable [QAVAL]


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Attachments
Event: Button Clicked
Event GUID: c9141ee1-475b-11d2-aec8-006008934c4d
=============================================
If GC doc - Document Number (wf) [DOC] is equal to "0"
Or GC doc - Document Number (wf) [DOC] is equal to <NULL>
Or GC lnid - Line Number (wf) [LNID] is equal to "0"
Or GC lnid - Line Number (wf) [LNID] is equal to <NULL>
     Set Grid Cell Error(FC Grid,  <Current Row>,  <All Columns>, "2832")
Else
     Media Object Structures(GT4111,  <Edit>, VA frm_Media_Objects_Status, GC doc - DocumentNumber (wf), GC dct - DoTy (wf), GC kco - DocCo (wf), GC lnid - LineNumber (wf))
     If VA frm_Media_Objects_Status [EV01] is equal to "1"
          Set Grid Text Indicator(FC Grid,  <Current Row>,  <Yes>)
     Else
          Set Grid Text Indicator(FC Grid, <Current Row>,  <No>)
     End If
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: HC Prod No. Consumption
Event: Button Clicked
Event GUID: c1a6dd5b-0cb9-4407-b67e-8331b79efc52
=============================================
// BUG# 11904715 - PMPN Enhancements - Begin
If GC ProductionNumber ProcessFlag [FLAG] is equal to ("1","3")
     ConvertNumericToString(B0000045.ConvertNumericToString)
          FC JOBS - Inv Job Number (wf) [JOBS] -> mnMathNumeric01 [MATH01]
          VA frm_szProdNoJobNumber_JOB [JOB] <- szVideoConstant30A [VC30A]
     Call App:P42054 Form:W42054A Version:Undefined
          GC ITM - Short Item No (wf) [ITM] -> mnIdentifierShortItem [ITM]
          GC Branch/Plant [MCU] -> szCostCenter [MCU]
          GC LOCN - Location File (wf) [LOCN] -> szLocation [LOCN]
          GC Lot/Serial [LOTN] -> szLot [LOTN]
          GC Production Number [PMPN] -> szProductionNumber [PMPN]
          GC Quantity [TRQT] -> mnQuantityTransaction [TRQT]
          VA frm_szProdNoJobNumber_JOB [JOB] <> szJobNumber [JOB]
          VA frm_cProdNumInvCancelled_EV01 [EV01] <- cCancelButtonclicked [EV01]
          GC lnid - Line Number (wf) [LNID] -> mnLineNumber [LNID]
          GC UM [TRUM] -> szTransUnitOfMeasure [UM]
     If GC ProdNumConsumption Cancelled [EV01] is equal to "1"
          If VA frm_cProdNumInvCancelled_EV01 [EV01] is equal to "1"
               Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity, "34401R")
               Stop Processing
          Else
               GC ProdNumConsumption Cancelled [EV01] = "0"
               Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity)
          End If
     End If
End If
// BUG# 11904715 - PMPN Enhancements - End


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: FC G/L Date
Event: Control Exited/Changed-Asynch
Event GUID: c78580e7-a240-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_cDocActionCode_ACTN [ACTN]
----------------------------------------
//   
// Call F0911 Begin Doc when the G/L date changes 
//  
// SAR 6484392, Check the DocActionCode and pass it into F0911 Begin Doc.
If SV Form_ Mode is equal to CO ADD_MODE
     VA evt_cDocActionCode_ACTN [ACTN] = "1"
Else
     VA evt_cDocActionCode_ACTN [ACTN] = "2"
End If
// End SAR# 6484392
If FC jobs - F0911 Job no (wf) [JOBS] is not equal to "0"
     If VA frm_CurrencyCode_CRCD [CRCD] is equal to or empty <Blank>
          RetrieveCompanyCurrencyCode(B0000128.RetrieveCompanyCurrencyCode)
               FC kco - Doc Key Comp (wf) [KCO] -> szCompany [CO]
               VA frm_CurrencyCode_CRCD [CRCD] <- szCurrencyCode [CRCD]
               UNDEFINED <> cDetailedCurrencyRestatement [BKTX]
               UNDEFINED <> cPostByCurrency [ABIN]
     End If
     // SAR 7070212 - Call F0911 begin doc only if user changes the G/L Date on the
     // form
     If FC G/L Date [DGL] is not equal to VA frm_HoldGLDate_DGL [DGL]
          // end SAR 7070212
          F0911FSBeginDoc(B0900049.F0911FSBeginDoc)
               FC jobs - F0911 Job no (wf) [JOBS] <> mnJobNumber [MATH06]
               VA evt_cDocActionCode_ACTN [ACTN] -> cDocAction [ACTN]
               "1" <> cEditInstructionFlag [EV01]
               FC jeln - Last JE Line No (wf) [JELN] <> mnLastLineNumber [JELN]
               FC kco - Doc Key Comp (wf) [KCO] <> szCompanyKey [KCO]
               FC Document Type [DCT] <> szDocumentType [DCT]
               FC Document Number [DOC] <> mnDocNumber [DOC]
               FC G/L Date [DGL] <> jdGLDate [DGJ]
               FC Batch Number [ICU] <> mnBatchNumber [ICU]
               "N" <> szBatchType [ICUT]
               FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
               FC dicj - Batch Date (wf) [DICJ] <> jdBatchSystemDate [DSYJ]
               VA frm_CurrencyCode_CRCD [CRCD] <> szTransactionCurrency [CRCD]
               FC Explanation [TREX] <> szExplanation [EXA]
               VA frm_CurrencyCode_CRCD [CRCD] <> szBaseCoCurrency [CRDC]
               VA frm_GLMBFVersion_VER [VER] -> szJEVersion [VER]
          //   
          // Change the G/L Date in all existing lines 
          //  
          // SAR 7070212 - Remove redundant code
          ! If FC G/L Date [DGL] is not equal to VA frm_HoldGLDate_DGL [DGL]
               // end SAR 7070212
               Get Max Grid Rows(FC Grid, VA frm_MaxGridRows_MATH02)
               VA frm_MaxGridRows_MATH02 [MATH02] = [VA frm_MaxGridRows_MATH02 [MATH02]]-1
               VA frm_Index_MATH01 [MATH01] = "1"
               While VA frm_Index_MATH01 [MATH01] is less than or equal to VA frm_MaxGridRows_MATH02 [MATH02]
                    Get Grid Row(FC Grid, VA frm_Index_MATH01)
                    GC G/L Date [DGL] = FC G/L Date [DGL]
                    VA frm_Index_MATH01 [MATH01] = [VA frm_Index_MATH01 [MATH01]]+1
               End While
               // SAR 7070212 begins
          ! End If
     End If
End If
// end SAR 7070212
VA frm_HoldGLDate_DGL [DGL] = FC G/L Date [DGL]
VA frm_MaxGridRows_MATH02 [MATH02] = "0"
Clear Edit Control Error(FC G/L Date [DGL])
// 
// SAR 7576301 - Validate G/L Date once value is changed.
If SV Form_ Mode is equal to CO UPDATE_MODE
     VA frm_cDisableGlDate_EV01 [EV01] = "1"
     EditDate(X0903.EditDate)
          FC kco - Doc Key Comp (wf) [KCO] -> szCompany [CO]
          FC G/L Date [DGL] -> jdDate [DGJ]
          FC Document Type [DCT] -> szDocumentType [DCT]
          "09" -> szSystem [SY]
          "1" -> cFYPNFlag [EV03]
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: FC Business Unit
Event: Control Exited/Changed-Asynch
Event GUID: 5ef15ed0-e064-11d1-9ac9-00600832fe19
=============================================
Clear Edit Control Error(FC Business Unit [MCU])

=============================================
Form: Inventory Issues - W4112A
Object: FC Business Unit
Event: Control Exited/Changed-Inline
Event GUID: c6449335-5c08-4561-934e-d819177db9ae
=============================================
// LPN Enhancement - Disable License Plate Grid Column if LPN is turned OFF
VA frm_cLPNMasterSwitch_LPNM [LPNM] = "0"
GetF46L001Records(B46L0010.GetF46L001Records)
     FC Business Unit [MCU] <> szCostCenter [MCU]
     VA frm_cLPNMasterSwitch_LPNM [LPNM] <- cLPNMasterSwitch [LPNM]
If VA frm_cLPNMasterSwitch_LPNM [LPNM] is equal to "1"
     Show Grid Column(FC Grid, GC License PlateNumber)
     Disable Control(HC Wareho &Loc Detail)
Else
     Hide Grid Column(FC Grid, GC License PlateNumber)
     Enable Control(HC Wareho &Loc Detail)
End If


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: FC Order Date
Event: Control is Entered
Event GUID: 7c2a6db7-690b-4dd3-98ff-47895e1c1081
=============================================
Clear Control Error(FC Order Date [TRDJ])

=============================================
Form: Inventory Issues - W4112A
Object: FC Order Date
Event: Control Exited/Changed-Asynch
Event GUID: 0bd2ab18-8c4e-4ce5-b5a3-424c76eedeb9
=============================================
Clear Control Error(FC Order Date [TRDJ])
// ===============================================================
// Não permite que data contabil seja menor que data do estoque da F550010.
// Alteração: 13/09/99-Luiz Gindri, Analista  Marco Migliavaca - ISSUE AP860
// ===============================================================
//
If FC Business Unit [MCU] is greater than <Blank>
     If FC Order Date [TRDJ] is less than or equal to <Blank>
     Or FC Order Date [TRDJ] is less than or equal to <NULL>
          FC Order Date [TRDJ] = date_today()
     End If
     F0006.FetchSingle  [Index 1: Cost Center]
          FC Business Unit [MCU] = TK Business Unit [MCU]
          VA frm_Co_aux [CO] <- TK Company [CO]
     If SV File_IO_Status is equal to CO SUCCESS
          F550010.FetchSingle  [Index 1: chv]
               VA frm_Co_aux [CO] = TK Company [CO]
               VA frm_DtEstoque [DFYJ] <- TK Date - A/R Fiscal Year Begins [ARFJ]
          If SV File_IO_Status is equal to CO SUCCESS
               If FC Order Date [TRDJ] is less than VA frm_DtEstoque [DFYJ]
                    Set Edit Control Error(FC Order Date, "5515J")
                    Stop Processing
               End If
          Else
               Set Edit Control Error(FC Order Date, "5515L")
               Stop Processing
          End If
     Else
          Set Edit Control Error(FC Order Date, "5515K")
          Stop Processing
     End If
     //
     // ===============================================================
     // Não permite data fora do período contábil - Valkiria - RBS - 01/10/02
     // ===============================================================
     EditDate(X0903.EditDate)
          VA frm_Co_aux [CO] -> szCompany [CO]
          FC Order Date [TRDJ] -> jdDate [DGJ]
          UNDEFINED <> szDocumentType [DCT]
          UNDEFINED <> szSystem [SY]
          UNDEFINED <> cSuppressFlag [EV01]
          UNDEFINED <> szErrorNumber [DTAI]
          UNDEFINED <> cWarningType [EV02]
          UNDEFINED <> mnReturnPeriodNumber [PN]
          UNDEFINED <> mnReturnFiscalYear [FY]
          UNDEFINED <> mnReturnCentury [CTRY]
          UNDEFINED <> cFYPNFlag [EV03]
     If SV Error_Status is equal to CO ERROR
          Stop Processing
     End If
     // ===============================================================
     //
     FC G/L Date [DGL] = FC Order Date [TRDJ]
Else
     Set Control Error(FC Business Unit, "0003")
     Stop Processing
End If
// ===============================================================

=============================================
Form: Inventory Issues - W4112A
Object: FC Order Date
Event: Control is Exited
Event GUID: 06255741-7c9c-42a1-b6a0-a069b4442b41
=============================================
Clear Control Error(FC Order Date [TRDJ])
// ===============================================================
// Não permite que data contabil seja menor que data do estoque da F550010.
// Alteração: 13/09/99-Luiz Gindri, Analista  Marco Migliavaca - ISSUE AP860
// ===============================================================
//
If FC Business Unit [MCU] is greater than <Blank>
     If FC Order Date [TRDJ] is less than or equal to <Blank>
     Or FC Order Date [TRDJ] is less than or equal to <NULL>
          FC Order Date [TRDJ] = date_today()
     End If
     F0006.FetchSingle  [Index 1: Cost Center]
          FC Business Unit [MCU] = TK Business Unit [MCU]
          VA frm_Co_aux [CO] <- TK Company [CO]
     If SV File_IO_Status is equal to CO SUCCESS
          F550010.FetchSingle  [Index 1: chv]
               VA frm_Co_aux [CO] = TK Company [CO]
               VA frm_DtEstoque [DFYJ] <- TK Date - A/R Fiscal Year Begins [ARFJ]
          If SV File_IO_Status is equal to CO SUCCESS
               If FC Order Date [TRDJ] is less than VA frm_DtEstoque [DFYJ]
                    Set Edit Control Error(FC Order Date, "5515J")
                    Stop Processing
               End If
          Else
               Set Edit Control Error(FC Order Date, "5515L")
               Stop Processing
          End If
     Else
          Set Edit Control Error(FC Order Date, "5515K")
          Stop Processing
     End If
     //
     // ===============================================================
     // Não permite data fora do período contábil - Valkiria - RBS - 01/10/02
     // ===============================================================
     EditDate(X0903.EditDate)
          VA frm_Co_aux [CO] -> szCompany [CO]
          FC Order Date [TRDJ] -> jdDate [DGJ]
          UNDEFINED <> szDocumentType [DCT]
          UNDEFINED <> szSystem [SY]
          UNDEFINED <> cSuppressFlag [EV01]
          UNDEFINED <> szErrorNumber [DTAI]
          UNDEFINED <> cWarningType [EV02]
          UNDEFINED <> mnReturnPeriodNumber [PN]
          UNDEFINED <> mnReturnFiscalYear [FY]
          UNDEFINED <> mnReturnCentury [CTRY]
          UNDEFINED <> cFYPNFlag [EV03]
     If SV Error_Status is equal to CO ERROR
          Stop Processing
     End If
     // ===============================================================
     //
     FC G/L Date [DGL] = FC Order Date [TRDJ]
Else
     Set Control Error(FC Business Unit, "0003")
     Stop Processing
End If
// ===============================================================


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Add Grid Rec to DB - Before
Event GUID: f57dfc6d-a23a-11d0-a204-0000f6728a56
=============================================
//
// Suppress the add to the database through OneWorld.  The Master Business
// Functions will handle the writing of records to the database.
//
Suppress Add

=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Update Grid Rec to DB-Before
Event GUID: f57dfc6e-a23a-11d0-a204-0000f6728a56
=============================================
//
// Suppress the update of records to the database through OneWorld.  The
// Master Business Functions will handle updating to the database.
//
Suppress Update

=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Delete Grid Rec Verify-Before
Event GUID: 90933387-a23d-11d0-a204-0000f6728a56
=============================================
Suppress Delete

=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Delete Grid Rec from DB-After
Event GUID: bcf0e826-a544-4a00-a5ce-3ab7b8e0d053
=============================================
VA frm_Tabela [LRSTN] = "F0911"
VA frm_Livro [LT] = "AA"
F5509CIV.Delete  [Index 1: Chv_Principal]
     VA frm_Tabela [LRSTN] = TK Table Name [LRSTN]
     VA frm_Livro [LT] = TK Ledger Types [LT]
     BC Document Company (F4111.0) [KCO] = TK Document Company [KCO]
     BC Document Type (F4111.0) [DCT] = TK Document Type [DCT]
     BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
     BC Journal Entry Line Number (F4111.0) [JELN] = TK Journal Entry Line Number [JELN]
     BC Date - For G/L (and Voucher) (F4111.0) [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]

=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Row Exit & Changed - Inline
Event GUID: 90933388-a23d-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_IdentifierShortItem [ITM]
evt_MatrixControlled_EV01 [EV01]
----------------------------------------
//
//    SAR 7999187 - If the line has exited without a quantity, set an error.
// Normally we would rely on the MBF to catch this but when adding a new line
// to a transaction, if the user doesn't enter a quantity, then Begin Doc and
// therefore Edit Line are not called. When the G/L Date field is changed the
// ER sets the cDisableGlDate variable to 1 and when a quantity is entered
// then that variable is set back to 0. If it is left at 1 then Begin Doc is
// not called, and Edit Line is not called.
//
If FC Order Date [TRDJ] is less than or equal to Null Date
     FC Order Date [TRDJ] = date_today()
End If
//
FC G/L Date [DGL] = FC Order Date [TRDJ]
// ===============================================================
//
// *****************************************************************************
//
// Changed by Alceste(YKP): 20.06.2000
// A quantidade deve ter o sinal definido nas processing options.
// '1'- Qtd > 0;
// '2'- Qtd < 0;
// Branco - Qualquer sinal.
//
// *****************************************************************************
//
// <<=================================================>>
// Verifica se a BSFN F4114 Edit Line retornou sem erro
// Valkiria - RBS - 30/09/02
// <<=================================================>>
If GC REVL-Reversal Done (wf) [REVL] is not equal to "1"
     If PO cQuantitySignal [EV01] is equal to "1"
          If GC Quantity [TRQT] is less than "0"
               Set Grid Cell Error(FC Grid,  <Currently Selected Row>, GC Quantity, "3167")
          End If
     End If
     If PO cQuantitySignal [EV01] is equal to "2"
          If GC Quantity [TRQT] is greater than "0"
               Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity, "4101")
          End If
     End If
End If
// *****************************************************************************
// End Changes Alceste
// *****************************************************************************
// SAR 7112371 - Reset the "For firing row exited inline" column so that it
// may be fired again if necessary
GC For Firing Row Exit Inline [EV01] = <NULL>
//
If FC Business Unit [MCU] is equal to or empty <Blank>
And GC Branch/Plant [MCU] is equal to or empty <Blank>
     Set Grid Cell Error(FC Grid,  <Current Row>, GC Branch/Plant, "0003")
     Set Edit Control Error(FC Business Unit, "0003")
End If
//
If GC Branch/Plant [MCU] is not equal to <Blank>
     Clear Grid Cell Error(FC Grid,  <Current Row>, GC Branch/Plant)
End If
//
If GC Branch/Plant [MCU] is not equal to <Blank>
And FC Business Unit [MCU] is equal to or empty <Blank>
     FC Business Unit [MCU] = GC Branch/Plant [MCU]
End If
//
If FC Business Unit [MCU] is not equal to <Blank>
And FC Business Unit [MCU] is not equal to <NULL>
     //
     Clear Edit Control Error(FC Business Unit [MCU])
     //
     If GC Branch/Plant [MCU] is equal to or empty <Blank>
          GC Branch/Plant [MCU] = FC Business Unit [MCU]
     End If
     //
     // SAR 6167573 - Move this if condition to after the check for GC Branch/Plant
     // being blank instead of before it.
     // SAR 7576301 - Add additional condition to if statement to check the
     // cDisableGlDate is not equal to 1.
     If FC ev04 - Begin Doc One Time (wf) [EV04] is not equal to "1"
     And VA frm_cDisableGlDate_EV01 [EV01] is not equal to "1"
          //
          //  SAR 4413419
          //  Use FC Business Unit instead of GC Branch/Plant when
          // calling F4114Begin Document
          //
          F4114BeginDocument(XT4114Z1.F4114BeginDocument)
               UNDEFINED <> cDocumentAction [ACTN]
               FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
               UNDEFINED <> cErrorConditions [EV02]
               FC Business Unit [MCU] -> szBranchPlant [MCU]
               FC Batch Number [ICU] -> mnBatchNumber [ICU]
               FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
               FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELineNumber [JELN]
               FC kco - Doc Key Comp (wf) [KCO] <> szDocumentKeyCompany [KCO]
               FC Document Type [DCT] -> szDocumentType [DCT]
               FC Document Number [DOC] -> mnDocumentNumber [DOC]
               FC G/L Date [DGL] <> jdGLDate [DGL]
               FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
               FC Explanation [TREX] <> szGLExplanation [DL01]
          //
          If SV Error_Status is equal to CO SUCCESS
               VA frm_HoldGLDate_DGL [DGL] = FC G/L Date [DGL]
               Disable Control(FC Order Date [TRDJ])
               Disable Control(FC Business Unit [MCU])
               Disable Control(FC Explanation [TREX])
               Disable Control(FC Document Type [DCT])
               Disable Control(FC Document Number [DOC])
               FC ev04 - Begin Doc One Time (wf) [EV04] = "1"
          End If
          // -----------------------------------------------------------------------------
          //      Retrieve Currency Code if the Currency Flag is 'Y' or 'Z'.
          // -----------------------------------------------------------------------------
          If SL CurrencyProcessing is equal to ("Y","Z")
               FC ECST-Hold Currency Info (wf) [ECST] = "1"
               DecimalTriggerGetByCompany(B1100005.DecimalTriggerGetByCompany)
                    FC kco - Doc Key Comp (wf) [KCO] -> szCompany [CO]
                    FC ECST-Hold Currency Info (wf) [ECST] <> mnDomesticAmount01 [AN01]
                    UNDEFINED <> mnDomesticAmount02 [AN02]
                    UNDEFINED <> mnDomesticAmount03 [AN03]
                    UNDEFINED <> mnDomesticAmount04 [AN04]
                    UNDEFINED <> mnDomesticAmount05 [AN05]
                    UNDEFINED <> mnDomesticAmount06 [AN06]
                    UNDEFINED <> mnDomesticAmount07 [AN07]
                    UNDEFINED <> mnDomesticAmount08 [AN08]
                    UNDEFINED <> mnDomesticAmount09 [AN09]
                    UNDEFINED <> mnDomesticAmount10 [AN10]
                    UNDEFINED <> mnDomesticAmount11 [AN11]
                    UNDEFINED <> mnDomesticAmount12 [AN12]
                    UNDEFINED <> mnDomesticAmount13 [AN13]
                    UNDEFINED <> mnDomesticAmount14 [AN14]
                    UNDEFINED <> mnDomesticAmount15 [AN15]
          End If
     End If
Else
End If
//
//
// SAR 3670376
// description will be popluated when the row is exited so that the correct
// branch item relation can be validated
//
// 8599417 - Retrieve the matrix controlled Item information from F4101 table
GetItemMasterDescUOM(B4001040.GetItemMasterDescUOM)
     VA evt_IdentifierShortItem [ITM] <- mnShortItemNumber [ITM]
     GC Item Number [UITM] -> szPrimaryItemNumber [UITM]
     GC Item Description [DSC1] <- szDescription [DSC1]
     GC Branch/Plant [MCU] -> szBranchPlant [MCU]
     VA evt_MatrixControlled_EV01 [EV01] <- cMatrixControlled [MIC]
// -----------------------------------------------------------------------------
//
// ***********************************************************************
// Verificar se a Cia da conta é igual à Cia do branch/Plant
// ***********************************************************************
//
If GC Account Number  [ANI] is not equal to <Blank>
And GC Account Number  [ANI] is not equal to <NULL>
     F0006.FetchSingle  [Index 1: Cost Center]
          GC Branch/Plant [MCU] = TK Business Unit [MCU]
          VA frm_CompanyMCU [CO] <- TK Company [CO]
          VA frm_CostCenterSubsequent [MCUS] <- TK Business Unit - Subsequent [MCUS]
     If SV File_IO_Status is equal to CO ERROR
          VA frm_CompanyMCU [CO] = "               "
     End If
     ValidateAccountNumber(XX0901.ValidateAccountNumber)
          GC Account Number  [ANI] -> szAccountNumber [ANI]
          <Blank> <> szAccountID [AID]
          VA frm_CostCenterConta [MCU] <- szDatabaseBusinessUnit [MCU]
          "7" -> cBasedOnFormat [EV01]
          VA frm_CompanyConta [CO] <- szAccountCompany [CO]
     If VA frm_CompanyConta [CO] is not equal to <Blank>
     And VA frm_CompanyConta [CO] is not equal to <NULL>
     And VA frm_CompanyConta [CO] is not equal to VA frm_CompanyMCU [CO]
          Set Grid Cell Error(FC Grid,  <Currently Selected Row>, GC Account Number, "E5543001")
     End If
End If
// 8599417 - If the Item is parent matrix item or hierarchy level matrix item
// then issue an error.
If VA evt_MatrixControlled_EV01 [EV01] is equal to "1"
Or VA evt_MatrixControlled_EV01 [EV01] is equal to "3"
     Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC ItemNumber, "4101E")
Else
     Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC ItemNumber)
End If

=============================================
Form: Inventory Issues - W4112A
Object: FC Grid
Event: Row Exit & Changed - Asynch
Event GUID: f57dfc6f-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_ev01_SubledgerError [EV01]
evt_TempUnitCost_UNCS [UNCS]
evt_TempExtendedCost_PAID [PAID]
----------------------------------------
//
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência do CHIS x Descr. Histórico
// -----------------------------------------------------------------------------
VA frm_ErroHistorico [AA01] = "N"
VA frm_ERRO [EV01] = <NULL>
Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-)
VA frm_Cod_Historico [CHIS] = GC CHIS [CHIS]
VA frm_HistoricoGCAA03 [AA03] = lpad([VA frm_Cod_Historico [CHIS]], "0", "3")
VA frm_AchouCerto [AA01] = "N"
//
//
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] -> szAccountNumber [ANI]
     VA frm_CostCenterConta [MCU] <- szDatabaseBusinessUnit [MCU]
     VA frm_AUXObjectAccount_OBJ [OBJ] <- szDatabaseObject [OBJ]
     VA frm_AUXSubsidiary_SUB [SUB] <- szDatabaseSubsidiary [SUB]
     "7" -> cBasedOnFormat [EV01]
     VA frm_AUXCompany_CO [CO] <- szAccountCompany [CO]
F5509HIS.Select  [Index 1: Índice]
     VA frm_AUXObjectAccount_OBJ [OBJ] = TK Object Account [OBJ]
F5509HIS.FetchNext  [Index 1: Índice]
     VA frm_CompanyHIS [CO] <- TK Company [CO]
     VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
     VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
     VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
While SV File_IO_Status is equal to CO SUCCESS
And GC REVL-Reversal Done (wf) [REVL] is equal to <Blank>
     If VA frm_ExigeAA01 [AA01] is equal to "S"
          If VA frm_CompanyHIS [CO] is equal to VA frm_AUXCompany_CO [CO]
          Or VA frm_CompanyHIS [CO] is equal to "*"
               If VA frm_SubsidiaryHIS [SUB] is equal to VA frm_AUXSubsidiary_SUB [SUB]
               Or VA frm_SubsidiaryHIS [SUB] is equal to "*"
                    If VA frm_HistoricoAA03 [AA03] is equal to VA frm_HistoricoGCAA03 [AA03]
                    Or VA frm_HistoricoAA03 [AA03] is equal to "*"
                         VA frm_ErroHistorico [AA01] = "N"
                         VA frm_AchouCerto [AA01] = "S"
                         Consiste_hist_padrao(N5509HIS.Consiste_hist_padrao)
                              GC Explanation -Remark- [EXR] -> HISTORICO [RMK]
                              VA frm_ERRO [EV01] <- ERRO_V1 [EV01]
                              VA frm_COD_ERRO [AA05] <- COD_ERRO [AA05]
                         If VA frm_ERRO [EV01] is equal to "1"
                              Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, VA frm_COD_ERRO)
                         End If
                         // ---------------------------------------------------------
                         If VA frm_ERRO [EV01] is not equal to "1"
                              VA frm_RBSCod_HistoricoAux_CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                              If GC CHIS [CHIS] is less than or equal to "0"
                                   VA frm_HIST4POS [EV01] = substr([GC Explanation -Remark- [EXR]], "3", "1")
                                   ! If VA frm_HIST4POS [EV01] is equal to ("*","+")
                                        VA frm_RBS3PosRemark_AA03 [AA03] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        VA frm_SY [SY] = "55"
                                        VA frm_RT [RT] = "HI"
                                        VA frm_KY [KY] = concat("       ", lpad([VA frm_RBS3PosRemark_AA03 [AA03]], "0", "3"))
                                        F0005.FetchSingle  [Index 1: System, Type, Code]
                                             VA frm_SY [SY] = TK Product Code [SY]
                                             VA frm_RT [RT] = TK User Defined Codes [RT]
                                             VA frm_KY [KY] = TK User Defined Code [KY]
                                             VA frm_UDC_HIST_PADRAO [DL02] <- TK Description 02 [DL02]
                                        If SV File_IO_Status is equal to CO SUCCESS
                                             GC CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                                        Else
                                             Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                        End If
                                   ! End If
                              Else
                                   If GC CHIS [CHIS] is not equal to VA frm_RBSCod_HistoricoAux_CHIS [CHIS]
                                        Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Explanation-Remark-, "55200")
                                   End If
                              End If
                         End If
                         // ---------------------------------------------------------
                    Else
                         If VA frm_AchouCerto [AA01] is equal to "S"
                         Else
                              VA frm_ErroHistorico [AA01] = "S"
                         End If
                    End If
               End If
          End If
     Else
     End If
     F5509HIS.FetchNext  [Index 1: Índice]
          VA frm_CompanyHIS [CO] <- TK Company [CO]
          VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
          VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
          VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
End While
If VA frm_AchouCerto [AA01] is not equal to "S"
And GC CHIS [CHIS] is not equal to "0"
And GC REVL-Reversal Done (wf) [REVL] is equal to <Blank>
     Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS, "554101")
Else
     If VA frm_ErroHistorico [AA01] is equal to "S"
     And GC CHIS [CHIS] is equal to "0"
     And GC REVL-Reversal Done (wf) [REVL] is equal to <Blank>
          // - erro Exige Histórico
          Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC CHIS, "554102")
     Else
          If VA frm_ERRO [EV01] is not equal to "1"
               If GC Explanation -Remark- [EXR] is not equal to <Blank>
               And GC Explanation -Remark- [EXR] is not equal to <NULL>
               And GC CHIS [CHIS] is equal to "0"
                    GC Explanation -Remark- [EXR] = <NULL>
                    Clear Grid Cell Error(FC Grid,  <Currently Selected Row>, GC Explanation-Remark-)
                    Disable Grid(FC Grid,  <Currently Selected Row>, GC Explanation-Remark-)
               End If
               //
               // -----------------------------------------------------------------------------
               // FIM  - ISSUE 6900 - Marília - Consistência do CHIS x Descr. Histórico
               // -----------------------------------------------------------------------------
               //
               // ++++++++++++++++++++++++++++++++++++++++++++++++
               //    If Rcd Exists, (this means it is ok to do a reversal), then do not process
               //    this event.
               //
               If GC EV02-F4111 Record (wf) [EV02] is not equal to "1"
               And FC ev04 - Begin Doc One Time (wf) [EV04] is equal to "1"
                    // -----------------------------------------------------------------------------
                    //      If the Subledger widow is used and entered, then load the Subledger
                    //      information from that window to the grid.
                    // -----------------------------------------------------------------------------
                    If VA frm_EV03_LoadSubledger [EV03] is equal to "1"
                         GC Equipment [ASII] = FC asii - EquipHeader (wf) [ASII]
                         GC Phase [WR01] = FC wr01 - PhaseHeader(wf) [WR01]
                         GC Sub Type [SBLT] = FC sblt - SubTypeHead (wf) [SBLT]
                         GC Subledger [SBL] = FC sbl - Subledger Header (wf) [SBL]
                         GC Account Number  [ANI] = FC ani - Acct No Header (wf) [ANI]
                    End If
                    // -----------------------------------------------------------------------------
                    //
                    If PO cProtectCosts [EV04] is equal to ("1","2")
                         GC Unit Cost [UNCS] = "0"
                         GC Extended Amount [PAID] = "0"
                    Else
                         If VA grd_Old_ItemNumber [UITM] is not equal to GC Item Number [UITM]
                         And VA grd_Old_UnitCost [UNCS] is equal to GC Unit Cost [UNCS]
                         And VA grd_Old_ItemNumber [UITM] is greater than <Blank>
                              GC Unit Cost [UNCS] = "0"
                              GC Extended Amount [PAID] = "0"
                         End If
                    End If
                    //
                    If SL CurrencyProcessing is equal to ("Y","Z")
                         Copy Currency Information(GC ExtendedAmount, FC ECST-Hold Currency Info (wf))
                    End If
                    //
                    If GC Branch/Plant [MCU] is equal to or empty <Blank>
                         GC Branch/Plant [MCU] = FC Business Unit [MCU]
                    End If
                    //
                    If GC G/L Date [DGL] is equal to ""
                         GC G/L Date [DGL] = FC G/L Date [DGL]
                    End If
                    //
                    // If the quantity is greater than zero, the amount is to be taken 'From' the
                    // location.  If the quantity is less than zero, the amount is to be added 'To'
                    // the location.
                    //
                    If GC Quantity [TRQT] is greater than "0"
                         VA frm_FromTo [FRTO] = "F"
                    Else
                         VA frm_FromTo [FRTO] = "T"
                    End If
                    //
                    // -----------------------------------------------------------------------------
                    //      If  the PO-Display Option is set to a '2' or '3'  and
                    //       PO-Account Number is set to a '1' and GC Account Number is
                    //      blank  issue an error.
                    // -----------------------------------------------------------------------------
                    //  SAR 3755396 Begin
                    //
                    // SAR 8968691 - If postdialog_intialised variable is set call the F4111
                    // Get Last Line Number to get the last LNID from the table F4111	
                    If VA frm_isPostDiaInitialised_EV01 [EV01] is equal to "1"
                         F4111GetLastLineNumber(B4120330.F4111GetLastLineNumber)
                              FC Document Number [DOC] -> mnDocVoucherInvoiceE [DOC]
                              FC Business Unit [MCU] -> szCostCenter [MCU]
                              FC Document Type [DCT] -> szDocumentType [DCT]
                              VA frm_LastLineNumber_LNID [LNID] <- mnLineNumber [LNID]
                              FC kco - Doc Key Comp (wf) [KCO] -> szCompanyKey [KCO]
                         VA frm_isPostDiaInitialised_EV01 [EV01] = "0"
                    End If
                    If PO cRequireAccountNumber [EV03] is equal to "1"
                    And PO cDisplayOptions [EV02] is equal to ("2","3")
                         If GC Account Number  [ANI] is equal to <Blank>
                         Or GC Account Number  [ANI] is equal to <NULL>
                              Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Account Number, "0159")
                         Else
                              Clear Grid Cell Error(FC Grid,  <Currently Selected Row>, GC Account Number)
                              //    SAR #4377745 - BEGIN
                              // BUG# 11905201 - PMPN Enhancements
                              // Pass PN fields and Retrieve PNProcessFlag to call P42054 to update F41021T
                              F4114EditLine(XT4114Z1.F4114EditLine)
                                   FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
                                   GC EV01 - Record Written (wf) [EV01] <> cRecordWrittenToWorkFile [EV04]
                                   GC lnid - Line Number (wf) [LNID] <> mnLineNumber [LNID]
                                   GC G/L Date [DGL] <> jdGLDate [DGL]
                                   FC Explanation [TREX] -> szGLExplanation [DSC1]
                                   "1" -> cUpdateQuantityOnHand [EV01]
                                   PO cEverestEventPoint06 [EV06] -> cAllowQtyOverAvailable [EV01]
                                   GC Parent Item No [KIT] -> mnParentShortItemNumber [KIT]
                                   GC Account Number  [ANI] -> szAccountNumber [ANI]
                                   GC Subledger [SBL] -> szSubledger [SBL]
                                   GC Sub Type [SBLT] -> cSubledgerType [SBLT]
                                   GC Phase [WR01] -> szPhase [WR01]
                                   GC Equipment [ASII] -> szAssetID [ASII]
                                   VA frm_LastLineNumber_LNID [LNID] <> mnPreviousLinenumber [LNID]
                                   VA frm_FromTo [FRTO] -> cFromTo [FRTO]
                                   FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELine [JELN]
                                   PO cDefaultPrimaryLocation [EV01] -> cDefaultFromPrimaryLocation [EV01]
                                   PO cEverestEventPoint07 [EV07] -> cAllowHeldLots [EV01]
                                   FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
                                   FC Document Type [DCT] -> szDocumentType [DCT]
                                   FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
                                   FC Batch Number [ICU] <> mnBatchNumber [ICU]
                                   FC ev01 - Batch Status (wf) [EV01] <> cBatchStatus [IST]
                                   GC Branch/Plant [MCU] <> szBranchPlant [MCU]
                                   GC Item Number [UITM] <> szItemNumber [UITM]
                                   GC ITM - Short Item No (wf) [ITM] <- mnShortItemNumber [ITM]
                                   GC Location [LOCNE1] <> szDisplayedLocation [LOCNE1]
                                   GC LOCN - Location File (wf) [LOCN] <- szLocation [LOCN]
                                   GC Lot/Serial [LOTN] <> szLotNumber [LOTN]
                                   GC UM [TRUM] <> szTransactionUOM [TRUM]
                                   GC Quantity [TRQT] -> mnTransactionQty [TRQT]
                                   GC Unit Cost [UNCS] <> mnTransactionUnitCost [UNCS]
                                   GC Extended Amount [PAID] <> mnExtendedAmount [PAID]
                                   "1" -> mnTransactionProcessType [MATH01]
                                   FC Document Number [DOC] <> mnDocumentNumber [DOC]
                                   GC Reason Code [RCD] <> szReasonCode [RCD]
                                   FC jobs - F0911 Job no (wf) [JOBS] <> mnF0911JobNumber [JOBS]
                                   FC kco - Doc Key Comp (wf) [KCO] <> szKeyCompany [KCO]
                                   GC STKT - Stocking Type (wf) [STKT] <> cStockingType [STKT]
                                   FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
                                   GC EV09CostEntered(wf) [EV09] -> cCostEntered [ENTC]
                                   GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH02]
                                   "1" -> cProcessJE [EV01]
                                   VA frm_GLMBFVersion_VER [VER] -> szGLMBFVersion [VER]
                                   GC Secondary Quantity [SQOR] -> mnSecondaryQty [SQOR]
                                   GC Sec UoM [UOM2] <> szSecondaryUOM [UOM2]
                                   <Blank> -> cDualCycleCountGLOffset [EV01]
                                   GC CFGSID - Unique Config. ID (wf) [CFGSID] -> szUniqueConfigurationID [CFGSID]
                                   PO szLotGroup [LOTGRP] -> szLotGroup [LOTGRP]
                                   GC License Plate Number [LPNU] -> szFromLicensePlateNumber [LPNU]
                                   GC Production Number [PMPN] -> szProjectManufacturingProd [PMPN]
                                   GC Production Number Short [PNS] -> mnProductionNumberShort [PNS]
                                   GC ProductionNumber ProcessFlag [FLAG] <> cProcessFlag [FLAG]
                                   PO cProductionNoConsumption [EV01] -> cProdNoConsumption [PNCM]
                              //    SAR #4377745 - END
                         End If
                         //
                         //  SAR 3755396 End
                    Else
                         //
                         // SAR 4324900 - Disable all code for SAR 4295491
                         // Begin SAR 4295491
                         ! If VA grd_cCostOverrideCode_CSTO [CSTO] is equal to "1"
                              ! VA evt_TempUnitCost_UNCS [UNCS] = GC Unit Cost [UNCS]
                              ! VA evt_TempExtendedCost_PAID [PAID] = "0"
                         ! Else
                              ! If VA grd_cExtCostOverride_CSTO [CSTO] is equal to "1"
                                   ! VA evt_TempExtendedCost_PAID [PAID] = GC Extended Amount [PAID]
                                   ! VA evt_TempUnitCost_UNCS [UNCS] = "0"
                              ! Else
                                   ! VA evt_TempUnitCost_UNCS [UNCS] = "0"
                                   ! VA evt_TempExtendedCost_PAID [PAID] = "0"
                              ! End If
                         ! End If
                         // End SAR 4295491
                         //
                         // SAR 4295491 - Disable original call to F4114 Edit Line and replace with the
                         // exact same call except that the temp cost and temp extended cost are passed i
                         // instead of the GC fields.
                         // BUG# 11905201 - PMPN Enhancements
                         // Pass PN fields and Retrieve PNProcessFlag to call P42054 to update F41021T
                         F4114EditLine(XT4114Z1.F4114EditLine)
                              FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
                              GC EV01 - Record Written (wf) [EV01] <> cRecordWrittenToWorkFile [EV04]
                              GC lnid - Line Number (wf) [LNID] <> mnLineNumber [LNID]
                              GC G/L Date [DGL] <> jdGLDate [DGL]
                              FC Explanation [TREX] -> szGLExplanation [DSC1]
                              "1" -> cUpdateQuantityOnHand [EV01]
                              PO cEverestEventPoint06 [EV06] -> cAllowQtyOverAvailable [EV01]
                              GC Parent Item No [KIT] -> mnParentShortItemNumber [KIT]
                              GC Account Number  [ANI] -> szAccountNumber [ANI]
                              GC Subledger [SBL] -> szSubledger [SBL]
                              GC Sub Type [SBLT] -> cSubledgerType [SBLT]
                              GC Phase [WR01] -> szPhase [WR01]
                              GC Equipment [ASII] -> szAssetID [ASII]
                              VA frm_LastLineNumber_LNID [LNID] <> mnPreviousLinenumber [LNID]
                              VA frm_FromTo [FRTO] -> cFromTo [FRTO]
                              FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELine [JELN]
                              PO cDefaultPrimaryLocation [EV01] -> cDefaultFromPrimaryLocation [EV01]
                              PO cEverestEventPoint07 [EV07] -> cAllowHeldLots [EV01]
                              FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
                              FC Document Type [DCT] -> szDocumentType [DCT]
                              FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
                              FC Batch Number [ICU] <> mnBatchNumber [ICU]
                              FC ev01 - Batch Status (wf) [EV01] <> cBatchStatus [IST]
                              GC Branch/Plant [MCU] <> szBranchPlant [MCU]
                              GC Item Number [UITM] <> szItemNumber [UITM]
                              GC ITM - Short Item No (wf) [ITM] <- mnShortItemNumber [ITM]
                              GC Location [LOCNE1] <> szDisplayedLocation [LOCNE1]
                              GC LOCN - Location File (wf) [LOCN] <- szLocation [LOCN]
                              GC Lot/Serial [LOTN] <> szLotNumber [LOTN]
                              GC UM [TRUM] <> szTransactionUOM [TRUM]
                              GC Quantity [TRQT] -> mnTransactionQty [TRQT]
                              GC Unit Cost [UNCS] <> mnTransactionUnitCost [UNCS]
                              GC Extended Amount [PAID] <> mnExtendedAmount [PAID]
                              "1" -> mnTransactionProcessType [MATH01]
                              FC Document Number [DOC] <> mnDocumentNumber [DOC]
                              GC Reason Code [RCD] <> szReasonCode [RCD]
                              FC jobs - F0911 Job no (wf) [JOBS] <> mnF0911JobNumber [JOBS]
                              FC kco - Doc Key Comp (wf) [KCO] <> szKeyCompany [KCO]
                              GC STKT - Stocking Type (wf) [STKT] <> cStockingType [STKT]
                              FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
                              GC EV09CostEntered(wf) [EV09] -> cCostEntered [ENTC]
                              GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH02]
                              "1" -> cProcessJE [EV01]
                              VA frm_GLMBFVersion_VER [VER] -> szGLMBFVersion [VER]
                              GC Secondary Quantity [SQOR] -> mnSecondaryQty [SQOR]
                              GC Sec UoM [UOM2] <> szSecondaryUOM [UOM2]
                              <Blank> -> cDualCycleCountGLOffset [EV01]
                              GC CFGSID - Unique Config. ID (wf) [CFGSID] -> szUniqueConfigurationID [CFGSID]
                              PO szLotGroup [LOTGRP] -> szLotGroup [LOTGRP]
                              GC License Plate Number [LPNU] -> szFromLicensePlateNumber [LPNU]
                              GC Production Number [PMPN] -> szProjectManufacturingProd [PMPN]
                              GC Production Number Short [PNS] -> mnProductionNumberShort [PNS]
                              GC ProductionNumber ProcessFlag [FLAG] <> cProcessFlag [FLAG]
                              PO cProductionNoConsumption [EV01] -> cProdNoConsumption [PNCM]
                         ! F4114EditLine(XT4114Z1.F4114EditLine)
                         !      UNDEFINED <> cLineAction [ACTN]
                         !      FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
                         !      UNDEFINED <> cErrorConditions [EV03]
                         !      GC EV01 - Record Written (wf) [EV01] <> cRecordWrittenToWorkFile [EV04]
                         !      GC lnid - Line Number (wf) [LNID] <> mnLineNumber [LNID]
                         !      GC G/L Date [DGL] <> jdGLDate [DGL]
                         !      FC Explanation [TREX] -> szGLExplanation [DSC1]
                         !      "1" -> cUpdateQuantityOnHand [EV01]
                         !      UNDEFINED <> cSuppressErrorMessage [EV01]
                         !      PO cEverestEventPoint06 [EV06] -> cAllowQtyOverAvailable [EV01]
                         !      GC Parent Item No [KIT] -> mnParentShortItemNumber [KIT]
                         !      GC Account Number  [ANI] -> szAccountNumber [ANI]
                         !      GC Subledger [SBL] -> szSubledger [SBL]
                         !      GC Sub Type [SBLT] -> cSubledgerType [SBLT]
                         !      GC Phase [WR01] -> szPhase [WR01]
                         !      GC Equipment [ASII] -> szAssetID [ASII]
                         !      FC lnid - Prev Line Number (wf) [LNID] <> mnPreviousLinenumber [LNID]
                         !      UNDEFINED <> szAgreementNumber [DMCT]
                         !      UNDEFINED <> mnAgreementSupplement [DMCS]
                         !      UNDEFINED <> cContractBalancesUpdate [BALU]
                         !      UNDEFINED <> mnAgreementSequence [LDSQ]
                         !      UNDEFINED <> mnTransactionLineNumber [TRNO]
                         !      VA frm_FromTo [FRTO] -> cFromTo [FRTO]
                         !      UNDEFINED <> szParentLotNumber [PLOT]
                         !      FC jeln - Last JE Line No (wf) [JELN] <> mnLastJELine [JELN]
                         !      PO cDefaultPrimaryLocation [EV01] -> cDefaultFromPrimaryLocation [EV01]
                         !      PO cEverestEventPoint07 [EV07] -> cAllowHeldLots [EV01]
                         !      FC Order Date [TRDJ] <> jdTransactionDate [TRDJ]
                         !      FC Document Type [DCT] -> szDocumentType [DCT]
                         !      FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
                         !      FC Batch Number [ICU] <> mnBatchNumber [ICU]
                         !      FC ev01 - Batch Status (wf) [EV01] <> cBatchStatus [IST]
                         !      GC Branch/Plant [MCU] <> szBranchPlant [MCU]
                         !      GC Item Number [UITM] <> szItemNumber [UITM]
                         !      GC ITM - Short Item No (wf) [ITM] <- mnShortItemNumber [ITM]
                         !      GC Location [LOCNE1] <> szDisplayedLocation [LOCNE1]
                         !      GC LOCN - Location File (wf) [LOCN] <- szLocation [LOCN]
                         !      GC Lot/Serial [LOTN] <> szLotNumber [LOTN]
                         !      GC UM [TRUM] <> szTransactionUOM [TRUM]
                         !      GC Quantity [TRQT] -> mnTransactionQty [TRQT]
                         !      VA evt_TempUnitCost_UNCS [UNCS] <> mnTransactionUnitCost [UNCS]
                         !      VA evt_TempExtendedCost_PAID [PAID] <> mnExtendedAmount [PAID]
                         !      "1" -> mnTransactionProcessType [MATH01]
                         !      UNDEFINED <> mnLotPotency [LOTP]
                         !      UNDEFINED <> szLotGrade [LOTG]
                         !      UNDEFINED <> cLotStatusCode [LOTS]
                         !      UNDEFINED <> jdLotExpirationDate [MMEJ]
                         !      FC Document Number [DOC] <> mnDocumentNumber [DOC]
                         !      UNDEFINED <> szSupplierLotNumber [RLOT]
                         !      UNDEFINED <> szLotDescription [LDSC]
                         !      GC Reason Code [RCD] <> szReasonCode [RCD]
                         !      UNDEFINED <> mnCycleCountNumber [CYNO]
                         !      UNDEFINED <> mnTagNumber [TGG]
                         !      UNDEFINED <> cGetNextCountDate [EV01]
                         !      FC jobs - F0911 Job no (wf) [JOBS] <> mnF0911JobNumber [JOBS]
                         !      FC kco - Doc Key Comp (wf) [KCO] <> szKeyCompany [KCO]
                         !      Cannot resolve GC  Object: 267 Could not find member in DSTR
                         !      GC STKT - Stocking Type (wf) [STKT] <> cStockingType [STKT]
                         !      FC JOBS - Inv Job Number (wf) [JOBS] <> mnInvJobNumber [JOBS]
                         !      UNDEFINED <> szMemoLot1 [LOT1]
                         !      UNDEFINED <> szMemoLot2 [LOT2]
                         !      UNDEFINED <> szMemoLot3 [LOT3]
                         !      GC EV09CostEntered(wf) [EV09] -> cCostEntered [ENTC]
                         !      GC WMS Line (wf) [MATH05] <> mnWMSLineNumber [MATH02]
                         !      UNDEFINED <> cAgreementSearchMethod [EV01]
                         !      UNDEFINED <> cMultipleAgreementFound [EV05]
                         !      "1" -> cProcessJE [EV01]
                         !      VA frm_GLMBFVersion_VER [VER] -> szGLMBFVersion [VER]
                         !      UNDEFINED <> szTransactionReference [TREF]
                         //
                         // SAR 4295491
                         ! GC Unit Cost [UNCS] = VA evt_TempUnitCost_UNCS [UNCS]
                         ! GC Extended Amount [PAID] = VA evt_TempExtendedCost_PAID [PAID]
                    End If
                    //
                    If FC Batch Number [ICU] is not equal to "0"
                         Show Control(FC Group Box 27)
                         Show Control(FC Batch Number [ICU])
                    End If
                    //
                    // SAR 7576301 - Delete this code.
                    // Begin SAR 7333203 - Initialize begin Doc Flag and F0911 Job No if JELN
                    // Blank/Null/Zero.
                    ! If FC jeln - Last JE Line No (wf) [JELN] is equal to <Blank>
                    ! OrFC jeln - Last JE Line No (wf) [JELN] is equal to <NULL>
                    ! OrFC jeln - Last JE Line No (wf) [JELN] is equal to "0"
                         ! FC jobs - F0911 Job no (wf) [JOBS] = 0
                         ! FC ev04 - Begin Doc One Time (wf) [EV04] = "0"
                    ! End If
                    // End SAR 7333203
               End If
               //
               VA grd_Old_UnitCost [UNCS] = GC Unit Cost [UNCS]
               VA grd_Old_ItemNumber [UITM] = GC Item Number [UITM]
               // SAR 4295491
               ! VA grd_SavedExtendedCost_PAID [PAID] = GC Extended Amount [PAID]
               //
               // ***********************************************************************
               // Verificar se a Cia da conta é igual à Cia do branch/Plant
               // ***********************************************************************
               If GC Account Number  [ANI] is not equal to <Blank>
               And GC Account Number  [ANI] is not equal to <NULL>
                    F0006.FetchSingle  [Index 1: Cost Center]
                         GC Branch/Plant [MCU] = TK Business Unit [MCU]
                         VA frm_CompanyMCU [CO] <- TK Company [CO]
                         VA frm_CostCenterSubsequent [MCUS] <- TK Business Unit - Subsequent [MCUS]
                    If SV File_IO_Status is equal to CO ERROR
                         VA frm_CompanyMCU [CO] = "               "
                    End If
                    ValidateAccountNumber(XX0901.ValidateAccountNumber)
                         GC Account Number  [ANI] -> szAccountNumber [ANI]
                         VA frm_CostCenterConta [MCU] <- szDatabaseBusinessUnit [MCU]
                         "7" -> cBasedOnFormat [EV01]
                         VA frm_CompanyConta [CO] <- szAccountCompany [CO]
                    If VA frm_CompanyConta [CO] is not equal to <Blank>
                    And VA frm_CompanyConta [CO] is not equal to VA frm_CompanyMCU [CO]
                    And VA frm_CompanyConta [CO] is not equal to <NULL>
                         Set Grid Cell Error(FC Grid,  <Currently Selected Row>, GC Account Number, "E5543001")
                    End If
               End If
          End If
     End If
End If
//
// BUG# 11904715 - PMPN Enhancements - Begin
// Inventory Tag file Integrity - Call P42054 for PN Consumption
If VA frm_cPMPNInstalled_EV01 [EV01] is equal to "1"
     If GC ProductionNumber ProcessFlag [FLAG] is equal to "1"
          If GC Production Number [PMPN] is not equal to <Blank>
          And GC Production Number [PMPN] is not equal to <NULL>
               Disable Control(HC Prod No. Consumption)
               ! Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity, "41OHT")
          Else
               Enable Control(HC Prod No. Consumption)
               ConvertNumericToString(B0000045.ConvertNumericToString)
                    FC JOBS - Inv Job Number (wf) [JOBS] -> mnMathNumeric01 [MATH01]
                    VA frm_szProdNoJobNumber_JOB [JOB] <- szVideoConstant30A [VC30A]
               Call App:P42054 Form:W42054A Version:Undefined
                    GC ITM - Short Item No (wf) [ITM] -> mnIdentifierShortItem [ITM]
                    GC Branch/Plant [MCU] -> szCostCenter [MCU]
                    GC LOCN - Location File (wf) [LOCN] -> szLocation [LOCN]
                    GC Lot/Serial [LOTN] -> szLot [LOTN]
                    GC Production Number [PMPN] -> szProductionNumber [PMPN]
                    GC Quantity [TRQT] -> mnQuantityTransaction [TRQT]
                    VA frm_szProdNoJobNumber_JOB [JOB] <> szJobNumber [JOB]
                    GC ProdNumConsumption Cancelled [EV01] <- cCancelButtonclicked [EV01]
                    GC lnid - Line Number (wf) [LNID] -> mnLineNumber [LNID]
                    GC UM [TRUM] -> szTransUnitOfMeasure [UM]
               If GC ProdNumConsumption Cancelled [EV01] is equal to "1"
                    Set Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity, "34401R")
               Else
                    Clear Grid Cell Error(FC Grid, <Currently Selected Row>, GC Quantity)
               End If
          End If
     Else
          If GC ProductionNumber ProcessFlag [FLAG] is equal to "3"
               Enable Control(HC Prod No. Consumption)
          Else
               Disable Control(HC Prod No. Consumption)
          End If
     End If
End If
// BUG# 11904715 - PMPN Enhancements - End


=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Object: FC math01 - SelectedGridRow (wf)
Event: Button Clicked
Event GUID: f57e08b1-a23a-11d0-a204-0000f6728a56
=============================================
//   
// Call Journal Entries 
//  
Call App:P0911 Form:W0911I Version:
     "N" <> Batchtype [ICUT]
     FC Batch Number [ICU] <> Batchnumber [ICU]
     FC Document Type [DCT] <> Documenttype [DCT]
     FC Document Number [DOC] <> Docvoucherinvoicee [DOC]
     FC kco - Doc Key Comp (wf) [KCO] <> Companykey [KCO]



=============================================
EVENTS
=============================================
Form: Inventory Issues - W4112A
Event: Dialog is Initialized
Event GUID: f57dfc69-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_EnhancementExistance_MEOW [MEOW]
----------------------------------------
// //////////////////// DOCUMENTAÇÃO ////////////////////
// ISSUE 6900 - Marília - Incluídos campos CHIS + EXR no GRID
GetAuditInfo(B9800100.GetAuditInfo)
     VA frm_UserId_USER [USER] <- szUserName [USER]
     VA frm_DateUpdated_UPMJ [UPMJ] <- jdDate [DTE]
     VA frm_TimeLastUpdated_UPMT [UPMT] <- mnTime [TME0]
     VA frm_WorkStationId_JOBN [JOBN] <- szWorkstation_UserId [JOBN]
VA frm_ProgramId_PID [PID] = "P4112"
VA frm_TAM_GRID [MATH08] = "0"
// /////////////////////////////////////////////////////////////////////////
//   REVISION LOG
//
// Date             SAR       Programmer   Description
// 11/02/00  4590116  EF5613421      Pinnacle - Dual UoM
// 10/06/03  6849056  IC8562930       G/L default on P4112
// 12/12/03  6880205  CA6859852       UKID and Post Commit
// 03/26/04  7070212   IC8562930     Error Post Different Currency
// 07/28/04  7247719   TT5459806    Process Allowed Lot Status
// 07/29/04  7257546   CA6859852    License Plate Enhancement (LPN)
// 08/09/04  7190353    IC8866327    To ensure the correct Ledger Type is
// populated in F0911during inventory issue reversal
// 03/23/05  7571957    IC8996050    Lot/Location blanked out
//  01/16/07  8249695   AP9050291    Zero Quantity Adjustments
// 05/31/07  8485920  RK9050936  Secondary Qty and UOM not save
// 08/29/07   8506313   RN9050944   Inventory issue and Deleting R
// 10/23/07   8599417   AP9050291    P4114 Matrix Parent
// 08/20/08    8849105    RK9050936      TRDJ updated as blank at F4111
// 04/26/11   11905201   RV9056609   PMPN Enhancements
//
Disable Control(HC &Journal Entries)
// _________________________________________________
//                                SAR #  2113607 dt  04/21/98
//                          If the PO for subledger info. is blank then the
//                          control is disabled.
// ___________________________________________________
If PO cDisplayOptions [EV02] is equal to <Blank>
     Disable Control(HC &Subledger Info)
End If
// _____________________________________________________
//
// Load Form Interconnects
//
FC uitm - BOM Item (wf) [UITM] = "  "
FC mmcu - BOM Branch (wf) [MMCU] = "  "
FC trqt - BOM Qty (wf) [TRQT] = "  "
//
// Initialize fields
//
FC ev01 - Copy From (wf) [EV01] = "0"
FC ev04 - Begin Doc One Time (wf) [EV04] = "0"
//
// SAR 7576301 - Initialize variable.
VA frm_cDisableGlDate_EV01 [EV01] = "0"
//
// Retrieve the system constant to determine if batch control is on.  If so,
// call Open Batch.
// Begin Batch processing by calling OpenBatch for the F0911
//
GetDistributionSystemConstant(B4002040.GetDistributionSystemConstant)
     "41" <> szSystemCode [SY]
     UNDEFINED <> cManagerApproval [IARI]
     FC icri - Batch Control (wf) [ICRI] <> cBatchControl [ICRI]
If FC icri - Batch Control (wf) [ICRI] is equal to "Y"
     FC ev08 - Cancel Batch Control (wf) [EV08] = "0"
Else
     FC ev08 - Cancel Batch Control (wf) [EV08] = "1"
End If
VA frm_EV10_DoNotCloseBatch [EV10] = "0"
If FI Batchnumber [ICU] is not equal to "0"
Or FC icri - Batch Control (wf) [ICRI] is equal to "Y"
     ! FSOpenBatch(B0000042.FSOpenBatch)
     !      FC ev01 - Batch Status (wf) [EV01] <> cPrevBatchstatus [IST]
     !      "N" <> szBatchtype [ICUT]
     !      FC Batch Number [ICU] <> mnBatchnumber [ICU]
     !      FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
     !      FC ev08 - Cancel Batch Control (wf) [EV08] <> cCancelBatchControl [EV01]
     ! BatchOpenOnInitialization(B0000004.BatchOpenOnInitialization)
     !      "N" -> szBatchType [ICUT]
     !      FC Batch Number [ICU] <> mnBatchNumber [ICU]
     !      FC ev01 - Batch Status (wf) [EV01] <> cPreviousBatchStatus [IST]
     !      UNDEFINED <> cPostOutOfBalance [POB]
     !      UNDEFINED <> cFLAGSuppressBatchControl [EV01]
     !      FC dicj - Batch Date (wf) [DICJ] <> jdBatchDate [DICJ]
     !      FC ev08 - Cancel Batch Control (wf) [EV08] <> cBatchControlCancelFlag [EV01]
     BatchOpenBatchControlProcessing(N0000001.BatchOpenBatchControlProcessing)
          "N" -> szBatchType [ICUT]
          FC Batch Number [ICU] <> mnBatchNumber [ICU]
          FC dicj - Batch Date (wf) [DICJ] <> jdDateBatchJulian [DICJ]
          FC ev01 - Batch Status (wf) [EV01] <- cPreviousBatchStatus [IST]
          <Blank> -> cSuppressBatchControl [EV01]
          FC ev08 - Cancel Batch Control (wf) [EV08] <- cBatchControlCancelFlag [EV01]
     If SV Error_Status is not equal to CO SUCCESS
          VA frm_EV10_DoNotCloseBatch [EV10] = "1"
     End If
Else
     Hide Control(FC Batch Number [ICU])
     Hide Control(FC Group Box 27)
End If
Hide Control(FC Prev Document No [DOC])
Hide Control(FC Prev Doc Type [DCTO])
//
// Hide and show based on processing option for account info
//
If PO cDisplayOptions [EV02] is equal to or empty <Blank>
     Hide Grid Column(FC Grid, GC Equipment)
End If
If PO cDisplayOptions [EV02] is equal to "1"
Or PO cDisplayOptions [EV02] is equal to or empty <Blank>
     Hide Grid Column(FC Grid, GC Account Number)
     Hide Grid Column(FC Grid, GC Subledger)
     Hide Grid Column(FC Grid, GC SubType)
     Hide Grid Column(FC Grid, GC Phase)
End If
If PO cDisplayOptions [EV02] is equal to "2"
     Hide Grid Column(FC Grid, GC Equipment)
End If
//
// Based on mode, set the close batch mode
//
If SV Form_ Mode is equal to CO ADD_MODE
     FC ev06 - Close Batch Mode (wf) [EV06] = "A"
Else
     FC ev06 - Close Batch Mode (wf) [EV06] = "C"
End If
// SAR 8485920 - Moving the "Get Local Computer ID" function from "Dialog is
// Initialized" event to "Post Dialog is Initialized" event. This change is
// required because in some cases, the function may not execute as the form is
// still loading in the "Dialog is Initialized" event, which can lead to
// incorrect results. Hence, it is safer to move the function to "Post Dialog
// is Initialized" event.
! GetLocalComputerId(B9800181.GetLocalComputerId)
!      FC ctid - Computer Id (wf) [CTID] <> szMachineKey [MKEY]
//
//   Begin 4590116 - Dual UoM
//
VerticalFeature(B4002670.VerticalFeature)
     "01" -> szVerticalEnhancement [CACTN]
     VA evt_EnhancementExistance_MEOW [MEOW] <- cEnhancementExistance [MEOW]
//
If VA evt_EnhancementExistance_MEOW [MEOW] is not equal to "1"
     Hide Grid Column(FC Grid, GC SecondaryQuantity)
     Hide Grid Column(FC Grid, GC SecUoM)
End If
//   End 4590116
//
// 8951274  -    Apparel Integration
// Determine if Apparel is installed and turned on
GetEnvironmentValue(B9900410.GetEnvironmentValue)
     "SY41F" -> szDataItem [DTAI]
     VA frm_cApparelActive_EV01 [EV01] <- cModuleExistance [MEOW]
// Set Default ZJDE0001 if PCW10VERSION blank
If PO szVersion [VERS] is equal to <Blank>
Or PO szVersion [VERS] is equal to <NULL>
     PO szVersion [VERS] = "ZJDE0001"
End If
// BUG# 11905201 - PMPN Enhancements
// Determine if PMPN is installed
GetEnvironmentValue(B9900410.GetEnvironmentValue)
     "SY31MP" -> szDataItem [DTAI]
     VA frm_cPMPNInstalled_EV01 [EV01] <- cModuleExistance [MEOW]
// Hide PMPN Fields if PMPN is not installed
If VA frm_cPMPNInstalled_EV01 [EV01] is not equal to "1"
     Hide Grid Column(FC Grid, GC Project MfgProduction Number)
End If
//
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Inicio - 12/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
VA frm_szNameObject_OBNM [OBNM] = "P4112"
F55QUEUE.Delete  [Index 1: OBNM, TDAY, DL011]
     VA frm_szNameObject_OBNM [OBNM] = TK Object Name [OBNM]
VA frm_mnNN_TDAY [TDAY] = 0
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Fim - 12/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=============================================
Form: Inventory Issues - W4112A
Event: Post Dialog is Initialized
Event GUID: f57dfc6a-a23a-11d0-a204-0000f6728a56
=============================================
//
// SAR 8485920 - Moving the "Get Local Computer ID" from "Dialog is
// Initialized" event to "Post Dialog is Initialized" event.
GetLocalComputerId(B9800181.GetLocalComputerId)
     FC ctid - Computer Id (wf) [CTID] <> szMachineKey [MKEY]
// If in add mode, retrieve the default branch plant.
//
// Sar 8968691 - Initialise a variable to check in Event "Row Exit & Changed -
// Asynch" if just now Post dialog is initialized
VA frm_isPostDiaInitialised_EV01 [EV01] = "1"
If SV Form_ Mode is equal to CO ADD_MODE
     //
     GetDefaultBranch(B4000370.GetDefaultBranch)
          FC Business Unit [MCU] <> szBranch [MCU]
          UNDEFINED <> szApprovalRouteCode [ARTG]
     FC Document Type [DCT] = PO szDocumenttype [DCT]
     //
     Enable Control(FC Order Date [TRDJ])
     Enable Control(FC Business Unit [MCU])
     Enable Control(FC Explanation [TREX])
     Enable Control(FC Document Type [DCT])
     Enable Control(FC Document Number [DOC])
     //
     VA frm_EV09_ValidateF4111DocNo [EV09] = "1"
     //
     // SAR - 7190353  Move this function call so it is done regardless of form
     // mode
     ! GetGLMBFVersionFromJEVersion(B4101430.GetGLMBFVersionFromJEVersion)
     !      UNDEFINED <> szBatchType [ICUT]
     !      UNDEFINED <> cDebitCreditFormat [EV01]
     !      VA frm_GLMBFVersion_VER [VER] <- szGLMBFVersion [VER]
     !      UNDEFINED <> cAssetIDRequired [EV01]
     !      PO szJournalEntriesVersion [VL01] -> szJEVersion [VER]
     //
     // SAR - 7190353 End
     //
     // LPN Enhancement
     Enable Grid(FC Grid,  <All Rows>, GC License PlateNumber)
     //
Else
     Disable Control(FC Document Number [DOC])
     Disable Control(FC Explanation [TREX])
     Disable Control(FC Business Unit [MCU])
     Disable Control(FC Document Type [DCT])
     // SAR 4514076 - Do not disable the G/L Date and do not use it as a filter field
     ! Disable Control(FC G/L Date [DGL])
     // SAR# 6484392, Blank out the GL date to default it to today's date in
     // begindoc.
     FC G/L Date [DGL] = <NULL>
     // END SAR# 6484392
     //
     // SAR 7576301 - Default todays date into this field.
     FC G/L Date [DGL] = date_today()
     //
     FC Explanation [TREX] = FI Explanationtransaction [TREX]
     If FI Batchnumber [ICU] is not equal to "0"
          Show Control(FC Group Box 27)
          Show Control(FC Batch Number [ICU])
     End If
     //
     // LPN Enhancement
     Disable Grid(FC Grid,  <All Rows>, GC License PlateNumber)
     //
End If
//
// SAR - 7190353  - Retrieve GLMBF Version regardless of form mode
GetGLMBFVersionFromJEVersion(B4101430.GetGLMBFVersionFromJEVersion)
     UNDEFINED <> szBatchType [ICUT]
     UNDEFINED <> cDebitCreditFormat [EV01]
     VA frm_GLMBFVersion_VER [VER] <- szGLMBFVersion [VER]
     UNDEFINED <> cAssetIDRequired [EV01]
     PO szJournalEntriesVersion [VL01] -> szJEVersion [VER]
// SAR - 7190353 End
//
// Protect costs or non display if processing option set
//
If PO cProtectCosts [EV04] is equal to "1"
     Disable Grid(FC Grid,  <All Rows>, GC UnitCost)
     Disable Grid(FC Grid,  <All Rows>, GC ExtendedAmount)
     Disable Control(HC &Zero Cost)
     Disable Control(HC Canc&el Zero Cost)
End If
If PO cProtectCosts [EV04] is equal to "2"
     Hide Grid Column(FC Grid, GC UnitCost)
     Hide Grid Column(FC Grid, GC ExtendedAmount)
     Disable Control(HC &Zero Cost)
     Disable Control(HC Canc&el Zero Cost)
End If
//
FC JOBS - Inv Job Number (wf) [JOBS] = "0"
//
// SAR 7823755 - The properties for this have the next numbering disabled but
// it is still defaulting a value when the form is loaded to intialize it to
// prevent bugs.
FC jobs - F0911 Job no (wf) [JOBS] = "0"
//
// DO not allow entry of G/L date in grid
//
Disable Grid(FC Grid, <All Rows>, GC G/LDate)
Disable Control(FC Batch Number [ICU])
Disable Control(FC Prev Document No [DOC])
Disable Control(FC Prev Doc Type [DCTO])
//
// -----------------------------------------------------------------------------
//      SAR #2770527      02/22/1999    CDL
//
//      If the Batch has been opened by other application,  cannot
//      reverse or add in new lines.  All rows and form exit must be disable
//      to prevent the new lines being created.  Can only form exit to Item
//      Ledger since it's a display only.
// -----------------------------------------------------------------------------
//
If VA frm_EV10_DoNotCloseBatch [EV10] is equal to "1"
     //
     Disable Grid(FC Grid,  <All Rows>,  <All Columns>)
     Disable Control(FC Order Date [TRDJ])
     Disable Control(FC G/L Date [DGL])
     //
     Hide Control(HC &Location Search)
     Hide Control(HC Wareho &Loc Detail)
     Hide Control(HC Re&verse)
     Hide Control(HC &Delete)
     Hide Control(HC Canc&el Zero Cost)
     Hide Control(HC &Zero Cost)
     Hide Control(HC &Journal Entries)
     Hide Control(HC &Item Search)
     Hide Control(HC &Copy Bill of Mat)
     Hide Control(HC &Subledger Info)
     Hide Control(HC &OK/&Select)
End If
If FI Batchnumber [ICU] is not equal to "0"
Or FC icri - Batch Control (wf) [ICRI] is equal to "Y"
End If
// SAR 4410921Begin: Initialize WMS reversal variable
VA frm_mnRevQuantity_MATH01 [MATH01] = 0
VA frm_cReversalOn_EV01 [EV01] = "0"
// SAR 4410921End

=============================================
Form: Inventory Issues - W4112A
Event: Grid Record is Fetched
Event GUID: f57dfc6b-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_cFirstPIDChar_EV01 [EV01]
evt_szChave_MCU [MCU]
evt_szChave_OBJ [OBJ]
evt_szChave_SUB [SUB]
----------------------------------------
//
// -----------------------------------------------------------------------------
//      SAR #1914074     1/23/1998
//      Suppress Grid From Display for the following lines:
//      1.   Standard Cost Change
//      2.   Zero Balance Adjustment
// -----------------------------------------------------------------------------
//
If BC Explanation - Transaction (F4111.0) [TREX] is equal to "Standard Cost Change"
Or BC Explanation - Transaction (F4111.0) [TREX] is equal to "Zero Balance Adjustment"
     Suppress Grid Line(FC Grid)
Else
     //
     // Display the primary item number in the grid
     //
     GC EV02-F4111 Record (wf) [EV02] = "1"
     //
     ReturnPrimaryItemNumber(X4101.ReturnPrimaryItemNumber)
          BC Item Number - Short (F4111.0) [ITM] -> mnShortItemNumber [ITM]
          BC 2nd Item Number (F4111.0) [LITM] -> sz2ndItemNumber [LITM]
          BC 3rd Item Number (F4111.0) [AITM] -> sz3rdItemNumber [AITM]
          UNDEFINED <> cSymbolShortItem [SYM1]
          UNDEFINED <> cSymbol2ndItem [SYM2]
          UNDEFINED <> cSymbol3rdItem [SYM3]
          BC Business Unit (F4111.0) [MCU] -> szBranchPlant [MCU]
          GC Item Number [UITM] <> szPrimaryItemNumber [UITM]
          UNDEFINED <> cSymbolidentifier [SYMID]
          UNDEFINED <> cErrorCode [ERRC]
          "1" -> cSuppressErrorMsg [EV01]
          UNDEFINED <> szErrorMsgID [DTAI]
          UNDEFINED <> idPtrToF41001Record [GENLNG]
          UNDEFINED <> szTemplate [TMPL]
          UNDEFINED <> szSegment1 [SEG1]
          UNDEFINED <> szSegment2 [SEG2]
          UNDEFINED <> szSegment3 [SEG3]
          UNDEFINED <> szSegment4 [SEG4]
          UNDEFINED <> szSegment5 [SEG5]
          UNDEFINED <> szSegment6 [SEG6]
          UNDEFINED <> szSegment7 [SEG7]
          UNDEFINED <> szSegment8 [SEG8]
          UNDEFINED <> szSegment9 [SEG9]
          UNDEFINED <> szSegment10 [SEG0]
          UNDEFINED <> cMatrixControlled [MIC]
          UNDEFINED <> cSymToIdentSegItem [SYM6]
          UNDEFINED <> cSegmentSeparator [SEPS]
     //
     // Format the location in the grid
     //
     FormatLocation(B4000310.FormatLocation)
          BC Business Unit (F4111.0) [MCU] -> szCostCenter [MCU]
          GC Location [LOCNE1] <> szDisplayFormatLocation [WL01]
          BC Location (F4111.0) [LOCN] -> szFileFormatLocation [LOCN]
          UNDEFINED <> cValidate [MODE]
          UNDEFINED <> szAisle [AISL]
          UNDEFINED <> szBin [BIN]
          UNDEFINED <> szLocation3 [LA03]
          UNDEFINED <> szLocation4 [LA04]
          UNDEFINED <> szLocation5 [LA05]
          UNDEFINED <> szLocation6 [LA06]
          UNDEFINED <> szLocation7 [LA07]
          UNDEFINED <> szLocation8 [LA08]
          UNDEFINED <> szLocation9 [LA09]
          UNDEFINED <> szLocation10 [LA10]
          "1" -> cMode [MODE]
          UNDEFINED <> idBranchConstantRecord [GENLNG]
     //
     // If the reference field is not blank, an account number was entered
     // previously.  Need to retrieve from the F0911
     //
     If BC Transaction Reference (F4111.0) [TREF] is not equal to "0000"
     And BC Transaction Reference (F4111.0) [TREF] is not equal to <Blank>
          //
          // Add 1 to JE line number to get correct account from GL
          //
          // SAR 7510871 - If the program id begins with E, this not was entered in
          // World so add 1 to the JELN. If it is not E, it was entered in World so
          // subtract 1 from the JELN.
          RetrieveStringElement(B4002410.RetrieveStringElement)
               BC Program ID (F4111.0) [PID] -> szString [CALCIT]
               "0" -> nPosition [INT01]
               VA evt_cFirstPIDChar_EV01 [EV01] <- cCharacter [EV01]
          //
          If VA evt_cFirstPIDChar_EV01 [EV01] is equal to "E"
               BC Journal Entry Line Number (F4111.0) [JELN] = [BC Journal Entry Line Number (F4111.0) [JELN]]+1
          Else
               BC Journal Entry Line Number (F4111.0) [JELN] = [BC Journal Entry Line Number (F4111.0) [JELN]]-1
          End If
          //
          GetF0911Information(B4100470.GetF0911Information)
               BC Document Type (F4111.0) [DCT] -> szDocumentType [DCT]
               BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC] -> mnDocumentNumber [DOC]
               BC Document Company (F4111.0) [KCO] -> szDocumentCompany [KCO]
               BC Journal Entry Line Number (F4111.0) [JELN] -> mnJournalEntryLineNo [JELN]
               BC Date - For G/L (and Voucher) (F4111.0) [DGL] -> jdGLDate [DGL]
               GC Account Number  [ANI] <> szAccountNumber [ANI]
               GC Subledger [SBL] <> szSubledger [SBL]
               GC Sub Type [SBLT] <> cSubledgerType [SBLT]
               GC Phase [WR01] <> szPhase [WR01]
               GC Equipment [ASII] <> szAssetIDEquipment [ASII]
               "1" -> cSuppressErrorMsg [EV01]
               UNDEFINED <> szErrorMsgID [DTAI]
               UNDEFINED <> szLedgerType [LT]
               FC Explanation [TREX] <> szExplanation [EXA]
               UNDEFINED <> szCurrencyCode [CRCD]
               UNDEFINED <> mnCurrencyConversionRate [CRR]
          //
          // SAR 6558128 - If the GC Equipment field is not blank, retrieve the correct
          // value for display.
          If GC Equipment [ASII] is not equal to <Blank>
          And GC Equipment [ASII] is not equal to <NULL>
               F1201ValidateAssetNumber(X1202.F1201ValidateAssetNumber)
                    GC Equipment [ASII] <> szPrimaryAssetNumber [ASII]
                    "1" -> cSymbolIdentifier [SYMID]
                    "1" -> cSuppressErrorMessages [EV02]
          End If
          //
          // Subtract 1 to JE line number to restore original number
          //
          // SAR 7510871 - Add condition to determine if entered by World or not.
          If VA evt_cFirstPIDChar_EV01 [EV01] is equal to "E"
               BC Journal Entry Line Number (F4111.0) [JELN] = [BC Journal Entry Line Number (F4111.0) [JELN]]-1
          Else
               BC Journal Entry Line Number (F4111.0) [JELN] = [BC Journal Entry Line Number (F4111.0) [JELN]]+1
          End If
     End If
     //
     If FC kco - Doc Key Comp (wf) [KCO] is equal to or empty <Blank>
          FC kco - Doc Key Comp (wf) [KCO] = BC Document Company (F4111.0) [KCO]
     End If
     //
End If
//
// Check for existing media object and display a paperclip
//
Media Object Structures(GT4111,  <Default Media Object>,  <Exist>, VA frm_Media_Objects_Status, BC Document (Voucher, Invoice, (F4111) etc.), BC Document (F4111) Type, BC Document (F4111) Company, ...)
If VA frm_Media_Objects_Status [EV01] is equal to "1"
     Set Grid Text Indicator(FC Grid,  <Current Row>,  <Yes>)
Else
     Set Grid Text Indicator(FC Grid, <Current Row>,  <No>)
End If
// SAR 2490955 Begin
// Business Function B4001040 is used to input Item Description into the Grid.
GetItemMasterDescUOM(B4001040.GetItemMasterDescUOM)
     BC Item Number - Short (F4111.0) [ITM] -> mnShortItemNumber [ITM]
     UNDEFINED <> szPrimaryItemNumber [UITM]
     UNDEFINED <> szSecondItemNumber [LITM]
     UNDEFINED <> szThirdItemNumber [AITM]
     GC Item Description [DSC1] <- szDescription [DSC1]
     UNDEFINED <> szDescriptionLine2 [DSC2]
     UNDEFINED <> szItemFlashMessage [IFLA]
     UNDEFINED <> szPrimaryUOM [UOM1]
     UNDEFINED <> szSecondaryUOM [UOM2]
     UNDEFINED <> szPurchasingUOM [UOM3]
     UNDEFINED <> szPricingUOM [UOM4]
     UNDEFINED <> szShippingUOM [UOM6]
     UNDEFINED <> szWeightUOM [UWUM]
     UNDEFINED <> szVolumeUOM [UVM1]
     UNDEFINED <> cSuppressErrorMessage [EV01]
     UNDEFINED <> szErrorMessageID [DTAI]
     UNDEFINED <> szBranchPlant [MCU]
     UNDEFINED <> cBackOrdersAllowedYN [BACK]
     UNDEFINED <> cStockingType [STKT]
     UNDEFINED <> cBulkPackedFlag [BPFG]
     UNDEFINED <> cInventoryCostLevel [CLEV]
     UNDEFINED <> szLineType [LNTY]
     UNDEFINED <> cLotProcessType [SRCE]
     UNDEFINED <> mnShelfLifeDays [SLD]
     UNDEFINED <> szGLClassCode [GLPT]
     UNDEFINED <> cContractItem [CONT]
     UNDEFINED <> szProductionUOM [UOM8]
     UNDEFINED <> szFromGrade [FRGD]
     UNDEFINED <> szThruGrade [THGD]
     UNDEFINED <> mnFromPotency [FRMP]
     UNDEFINED <> mnThruPotency [THRP]
     UNDEFINED <> cPriceLevel [PLEV]
     UNDEFINED <> cGradePotencyPricing [PRPO]
     UNDEFINED <> cRoundToWholeNumber [SNS]
     UNDEFINED <> cKitPricingMethod [PMTH]
     UNDEFINED <> szComponentUOM [UOM9]
     UNDEFINED <> szStandardUOMConversion [TFLA]
     UNDEFINED <> mnBuyer [BUYR]
     UNDEFINED <> mnPlannerNumber [ANPL]
     UNDEFINED <> szPrintMessage [INMG]
     UNDEFINED <> cCommitmentMethod [CMGL]
     UNDEFINED <> cCheckAvailability [CKAV]
     UNDEFINED <> cSerialNumberReqsted [SRNR]
     UNDEFINED <> cLotStatusCode [LOTS]
     UNDEFINED <> cPurchasePriceLevel [PPLV]
     UNDEFINED <> szTemplate [TMPL]
     UNDEFINED <> szSegment1 [SEG1]
     UNDEFINED <> szSegment2 [SEG2]
     UNDEFINED <> szSegment3 [SEG3]
     UNDEFINED <> szSegment4 [SEG4]
     UNDEFINED <> szSegment5 [SEG5]
     UNDEFINED <> szSegment6 [SEG6]
     UNDEFINED <> szSegment7 [SEG7]
     UNDEFINED <> szSegment8 [SEG8]
     UNDEFINED <> szSegment9 [SEG9]
     UNDEFINED <> szSegment10 [SEG0]
     UNDEFINED <> cMatrixControlled [MIC]
     UNDEFINED <> cDualUnitOfMeasureItem [DUAL]
     UNDEFINED <> cDualPickingProcessOption [DPPO]
     UNDEFINED <> mnDualTolerance [DLTL]
// SAR 2490955 End
//
// -----------------------------------------------------------------------------
// INICIO - ISSUE 6900 - Marília - Consistência CHIS x Descr. Histórico
//                                              Acessa lançamento para consistir
// -----------------------------------------------------------------------------
VA frm_LinhaOBJDigitado_JELN [JELN] = [BC Journal Entry Line Number (F4111.0) [JELN]]+1
! F0911.Select  [Index 1: Doc Type, Number, +]
!      BC Document Company (F4111.0) [KCO] = TK Document Company [KCO]
!      BC Document Type (F4111.0) [DCT] = TK Document Type [DCT]
!      BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
!      BC Date - For G/L (and Voucher) (F4111.0) [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
!      BC Journal Entry Line Number (F4111.0) [JELN] = TK Journal Entry Line Number [JELN]
F0911.Select  [Index 1: Doc Type, Number, +]
     BC Document Company (F4111.0) [KCO] = TK Document Company [KCO]
     BC Document Type (F4111.0) [DCT] = TK Document Type [DCT]
     BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC] = TK Document (Voucher, Invoice, etc.) [DOC]
     BC Date - For G/L (and Voucher) (F4111.0) [DGL] = TK Date - For G/L (and Voucher) - Julian [DGJ]
     VA frm_LinhaOBJDigitado_JELN [JELN] = TK Journal Entry Line Number [JELN]
F0911.FetchNext  [Index 1: Doc Type, Number, +]
     VA frm_F0911CompanyKey_KCO [KCO] <- TK Document Company [KCO]
     VA frm_LinhaF0911_JELN [JELN] <- TK Journal Entry Line Number [JELN]
     VA frm_F0911ObjectAccount_OBJ [OBJ] <- TK Object Account [OBJ]
     VA frm_F0911Subsidiary_SUB [SUB] <- TK Subsidiary [SUB]
     GC Explanation -Remark- [EXR] <- TK Name - Remark Explanation [EXR]
     VA frm_NroAlocacaoR3 [R3] <- TK Reference 3 - Account Reconciliation [R3]
     GC Projeto Rubrica [CN] <- TK Payment Number [CN]
GC Numero Alocação [N001] = VA frm_NroAlocacaoR3 [R3]
VA frm_HistoricoGCAA03 [AA03] = substr([GC Explanation -Remark- [EXR]], "0", "3")
F5509HIS.Select  [Index 1: Índice]
     VA frm_F0911ObjectAccount_OBJ [OBJ] = TK Object Account [OBJ]
F5509HIS.FetchNext  [Index 1: Índice]
     VA frm_CompanyHIS [CO] <- TK Company [CO]
     VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
     VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
     VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
While SV File_IO_Status is equal to CO SUCCESS
     If VA frm_ExigeAA01 [AA01] is equal to "S"
          If VA frm_SubsidiaryHIS [SUB] is equal to VA frm_F0911Subsidiary_SUB [SUB]
          Or VA frm_SubsidiaryHIS [SUB] is equal to "*"
               If VA frm_CompanyHIS [CO] is equal to VA frm_F0911CompanyKey_KCO [KCO]
               Or VA frm_CompanyHIS [CO] is equal to "*"
                    If VA frm_HistoricoAA03 [AA03] is equal to VA frm_HistoricoGCAA03 [AA03]
                    Or VA frm_HistoricoAA03 [AA03] is equal to "*"
                         VA frm_HIST4POS [EV01] = substr([GC Explanation -Remark- [EXR]], "3", "1")
                         ! If VA frm_HIST4POS [EV01] is equal to ("*","+")
                              VA frm_SY [SY] = "55"
                              VA frm_RT [RT] = "HI"
                              VA frm_KY [KY] = concat("       ", lpad([VA frm_HistoricoGCAA03 [AA03]], "0", "3"))
                              F0005.FetchSingle  [Index 1: System, Type, Code]
                                   VA frm_SY [SY] = TK Product Code [SY]
                                   VA frm_RT [RT] = TK User Defined Codes [RT]
                                   VA frm_KY [KY] = TK User Defined Code [KY]
                                   VA frm_UDC_HIST_PADRAO [DL02] <- TK Description 02 [DL02]
                              If SV File_IO_Status is equal to CO SUCCESS
                                   GC CHIS [CHIS] = substr([GC Explanation -Remark- [EXR]], "0", "3")
                              End If
                         ! End If
                    End If
               End If
          End If
     End If
     F5509HIS.FetchNext  [Index 1: Índice]
          VA frm_CompanyHIS [CO] <- TK Company [CO]
          VA frm_SubsidiaryHIS [SUB] <- TK Subsidiary [SUB]
          VA frm_ExigeAA01 [AA01] <- TK Alpha Spec. Data 01 [AA01]
          VA frm_HistoricoAA03 [AA03] <- TK Alpha Spec. Data 03 [AA03]
End While
// -----------------------------------------------------------------------------
// FIM  - ISSUE 6900 - Marília - Consistência CHIS x Descr. Histórico
// -----------------------------------------------------------------------------
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Inicio - 07/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
F4111.Select  [Index 1: Unique Key ID]
     BC Unique Key ID (Internal) (F4111.0) [UKID] = TK Unique Key ID (Internal) [UKID]
F4111.FetchNext  [Index 1: Unique Key ID]
     VA evt_szChave_MCU [MCU] <- TK Business Unit - Alt [MCUZ]
     VA evt_szChave_OBJ [OBJ] <- TK Object Account [OBJ]
     VA evt_szChave_SUB [SUB] <- TK Subsidiary [SUB]
ValidateAccountNumber(XX0901.ValidateAccountNumber)
     GC Account Number  [ANI] <> szAccountNumber [ANI]
     VA evt_szChave_MCU [MCU] -> szDatabaseBusinessUnit [MCU]
     VA evt_szChave_OBJ [OBJ] -> szDatabaseObject [OBJ]
     VA evt_szChave_SUB [SUB] -> szDatabaseSubsidiary [SUB]
     "5" -> cBasedOnFormat [EV01]
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// Giovani Perotto Mesquita - Fim - 07/06/19
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

=============================================
Form: Inventory Issues - W4112A
Event: Write Grid Line-Before
Event GUID: f57dfc6c-a23a-11d0-a204-0000f6728a56
=============================================
//
// Do not allow changes to existing records.
//
Disable Grid(FC Grid,  <Current Row>,  <All Columns>)
FC lnid - Prev Line Number (wf) [LNID] = BC Line Number (F4111.0) [LNID]
GC lnid - Line Number (wf) [LNID] = BC Line Number (F4111.0) [LNID]

=============================================
Form: Inventory Issues - W4112A
Event: Last Grid Record Has Been Read
Event GUID: 129327b1-ca88-11d2-b025-00105a1c01a8
=============================================
//
// -----------------------------------------------------------------------------
//      SAR #2770527      02/22/1999    CDL
// -----------------------------------------------------------------------------
//
If VA frm_EV10_DoNotCloseBatch [EV10] is equal to "1"
     Hide Grid Row(FC Grid,  <Current Row>)
End If

=============================================
Form: Inventory Issues - W4112A
Event: Post Commit
Event GUID: e22f363b-7f14-4292-93b5-b69dfba5f5ea
=============================================
// SAR 6612745
If SV TP_Commit_Status is equal to CO TP_ACTION_FAIL
     ProcessF41021WFRecords(B4101810.ProcessF41021WFRecords)
          FC ctid - Computer Id (wf) [CTID] -> szComputerID [CTID]
          VA frm_TPJobnumberA [JOBS] -> mnJobnumberA [JOBS]
          VA frm_mnUniqueKeyIDF41021WF_UKID [UKID] -> mnUniqueKeyIDInternal [UKID]
End If




=============================================
EVENTS
=============================================
Form: Copy Bill of Material - W4112B
Object: HC OK/Select
Event: Button Clicked
Event GUID: f57dfc7b-a23a-11d0-a204-0000f6728a56
=============================================
//
// Validate the item number entered
//
VerifyAndGetItemMaster(X4101.VerifyAndGetItemMaster)
     FC Item Number [UITM] -> szPrimaryItemNumber [UITM]
     FC Branch [MMCU] -> szBranchPlant [MCU]
     UNDEFINED <> szDescription [DSC1]
     UNDEFINED <> szDescription2 [DSC2]
     UNDEFINED <> cSymbolidentifier [SYMID]
     UNDEFINED <> idF4101LongRowPtr [GENLNG]
     FC itm - Short Item (wf) [ITM] <> mnShortItemNumber [ITM]
     UNDEFINED <> cErrorcode [ERRC]
     UNDEFINED <> szLanguagepreference [LNGP]
     UNDEFINED <> mnAddressnumber [AN8]
     UNDEFINED <> szSystemcode [SY]
     UNDEFINED <> szLongItemNumber [LITM]
     UNDEFINED <> szThirdItemNumber [AITM]
     UNDEFINED <> szItemFlashMsg [IFLA]
     UNDEFINED <> cReturnPtr [EV01]
     UNDEFINED <> cSuppressErrorMsg [EV02]
     UNDEFINED <> szErrorMsgID [DTAI]
     "1" <> cCallType [EV01]
     UNDEFINED <> idPtrToF41001Record [GENLNG]
     UNDEFINED <> szBaseLngDesc1 [DSC1]
     UNDEFINED <> szBaseLngDesc2 [DSC2]
     UNDEFINED <> cCrossRefMode [MODE]
     UNDEFINED <> cLngPrefType [EV01]
     UNDEFINED <> jdExpirationDate [EXDJ]
     UNDEFINED <> szStandardUOMConversion [TFLA]
     UNDEFINED <> szTemplate [TMPL]
     UNDEFINED <> szSegment1 [SEG1]
     UNDEFINED <> szSegment2 [SEG2]
     UNDEFINED <> szSegment3 [SEG3]
     UNDEFINED <> szSegment4 [SEG4]
     UNDEFINED <> szSegment5 [SEG5]
     UNDEFINED <> szSegment6 [SEG6]
     UNDEFINED <> szSegment7 [SEG7]
     UNDEFINED <> szSegment8 [SEG8]
     UNDEFINED <> szSegment9 [SEG9]
     UNDEFINED <> szSegment10 [SEG0]
     UNDEFINED <> cMatrixControlled [MIC]
//
//      Verify if the Item Exist in F3002
//      Load Form interconnects
//
FC DTAI_ErrorMsgID (wf) [DTAI] = <Blank>
//
// Sar 5478071 Copy BOM enhancement
// Pass back Batch Quantity UOM
VerifyAndGetBillOfMaterial(B3000510.VerifyAndGetBillOfMaterial)
     FC Branch [MMCU] -> szParentBranch [MMCU]
     FC itm - Short Item (wf) [ITM] -> mnParentItem [KIT]
     UNDEFINED <> szTypeOfBill [TBM]
     UNDEFINED <> mnBatchQuantity [BQTY]
     UNDEFINED <> mnSubstituteItemSequence [SBNT]
     "1" -> cCallType [EV01]
     "0" -> cReturnPointer [EV01]
     "1" -> cSuppressErrorMessages [EV01]
     UNDEFINED <> idF3002Pointer [GENLNG]
     FC DTAI_ErrorMsgID (wf) [DTAI] <> szErrorMessageID [DTAI]
     UNDEFINED <> mnComponent [ITM]
     UNDEFINED <> szComponentBranch [CMCU]
     UNDEFINED <> mnOperationSequence [OPSQ]
     FI szUOMBatchQty [UOM] <- szUOMBatchQuantity [UOM]
     UNDEFINED <> cCoByProducts [COBY]
     UNDEFINED <> mnQuantityRequired [QNTY]
     UNDEFINED <> szUnitOfMeasure [UM]
     UNDEFINED <> cFixedVariable [FORV]
     UNDEFINED <> szLineType [LNTY]
     UNDEFINED <> jdEffectiveFrom [EFFF]
     UNDEFINED <> jdEffectiveThru [EFFT]
     UNDEFINED <> cFixedOrVariableQty [FORQ]
     "1" -> szIndex [DTAI]
     "2" -> szKeys [DTAI]
     UNDEFINED <> szComponentRevisionLevel [CMRV]
     UNDEFINED <> szBillRevisionLevel [BREV]
     UNDEFINED <> mnLineNO [CPNB]
If FC DTAI_ErrorMsgID (wf) [DTAI] is not equal to <Blank>
     Set Edit Control Error(FC Item Number, FC DTAI_ErrorMsgID (wf))
End If


=============================================
EVENTS
=============================================
Form: Copy Bill of Material - W4112B
Object: HC Cancel/Close
Event: Button Clicked
Event GUID: 90932cd7-a23d-11d0-a204-0000f6728a56
=============================================
FC itm - Short Item (wf) [ITM] = "0"


=============================================
EVENTS
=============================================
Form: Copy Bill of Material - W4112B
Object: FC Branch
Event: Control Exited/Changed-Inline
Event GUID: 5ef15ed7-e064-11d1-9ac9-00600832fe19
=============================================
Clear Edit Control Error(FC Branch [MMCU])



=============================================
EVENTS
=============================================
Form: Copy Bill of Material - W4112B
Event: Post Dialog is Initialized
Event GUID: 90932cd6-a23d-11d0-a204-0000f6728a56
=============================================
FC Branch [MMCU] = FI Costcenteralt [MMCU]
FC Transaction Quantity [TRQT] = "1"

=============================================
Form: Copy Bill of Material - W4112B
Event: End Dialog
Event GUID: f57dfc7a-a23a-11d0-a204-0000f6728a56
=============================================
// -----------------------------------------------------------------------------
// 
//      The FI-ShortItemNumber is now a BC fields.
//      In Order to passed back a Short Item Number, the BC-ShortItemNumber must
//      have a value in it. Otherwise FI-ShortItemNumber will ALWAYS return 0
// -----------------------------------------------------------------------------
BC Item Number - Short (F4111.0) [ITM] = FC itm - Short Item (wf) [ITM]
FI Identifiershortitem [ITM] = BC Item Number - Short (F4111.0) [ITM]
FI Costcenteralt [MMCU] = FC Branch [MMCU]
FI Quantitytransaction [TRQT] = FC Transaction Quantity [TRQT]




=============================================
EVENTS
=============================================
Form: Account Information - W4112C
Object: HC OK/Select
Event: Button Clicked
Event GUID: f57dfc79-a23a-11d0-a204-0000f6728a56
=============================================
//   
// Load form interconnects to be returned 
//  
If FC Subledger [SBL] is equal to or empty <Blank>
And FC Subledger Type [SBLT] is not equal to <Blank>
     Set Edit Control Error(FC Subledger, "0003")
     Stop Processing
End If
// 
If FC Subledger [SBL] is not equal to <Blank>
And FC Subledger Type [SBLT] is equal to or empty <Blank>
     Set Edit Control Error(FC Subledger Type, "0003")
     Stop Processing
End If
// 
FI AccountNumber [ANI] = FC Account Number [ANI]
FI Subledger [SBL] = FC Subledger [SBL]
FI Subledgertype [SBLT] = FC Subledger Type [SBLT]
FI Phase [WR01] = FC Phase [WR01]
FI Equipment [ASII] = FC Equipment [ASII]
FI Cancel [EV01] = "0"


=============================================
EVENTS
=============================================
Form: Account Information - W4112C
Object: HC Cancel/Close
Event: Button Clicked
Event GUID: f57df762-a23a-11d0-a204-0000f6728a56
=============================================
FI Cancel [EV01] = "1"



=============================================
EVENTS
=============================================
Form: Account Information - W4112C
Event: Dialog is Initialized
Event GUID: f57dfc78-a23a-11d0-a204-0000f6728a56
=============================================
If PO cDisplayOptions [EV02] is equal to "1"
     //    
     // If processing option is set to a '1', hide account number and subledger
     // information. 
     //  
     Hide Control(FC Account Number [ANI])
     Hide Control(FC Subledger [SBL])
     Hide Control(FC Subledger Type [SBLT])
     Hide Control(FC Phase [WR01])
End If
//   
// If processing option is set to a '2', hide the item number field. 
//  
If PO cDisplayOptions [EV02] is equal to "2"
     Hide Control(FC Equipment [ASII])
End If

=============================================
Form: Account Information - W4112C
Event: Post Dialog is Initialized
Event GUID: 90933bf7-a23d-11d0-a204-0000f6728a56
=============================================
FC Subledger [SBL] = FI Subledger [SBL]
FC Account Number [ANI] = FI AccountNumber [ANI]
FC Phase [WR01] = FI Phase [WR01]
FC Subledger Type [SBLT] = FI Subledgertype [SBLT]
FC Equipment [ASII] = FI Equipment [ASII]




=============================================
Form: Work With Inventory Issues - W4112D
Event: Form Variables
Event GUID: 5ef15ed6-e064-11d1-9ac9-00600832fe19
=============================================
frm_ICU_BatchNumber [ICU]
frm_ICUT_BatchType [ICUT]
frm_IST_BatchStatus [IST]

=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC OK/Select
Event: Button Clicked
Event GUID: f57dfc76-a23a-11d0-a204-0000f6728a56
=============================================
----------------------------------------
Event Level Variables
----------------------------------------
evt_GLInterfaceOn [GLPO]
----------------------------------------
// SAR 5864836 - Pass the GC DocCo to the next form instead of BC Document
// Company because the BC field contained the company of the last grid line,
// which is not necessarily the correct company. 
Call App:P4112 Form:W4112A Version:Undefined
     GC Document Number [DOC] -> Docvoucherinvoicee [DOC]
     GC Do Ty [DCT] -> Documenttype [DCT]
     GC Doc Co [KCO] -> Companykey [KCO]
     GC G/L Date [DGL] -> Dtforglandvouch1 [DGL]
     GC Branch/ Plant [MCU] -> Costcenter [MCU]
     GC Transaction Date [TRDJ] -> Datetransactionjulian [TRDJ]
     GC Transaction Explanation [TREX] -> Explanationtransaction [TREX]
     GC Batch Number [ICU] -> Batchnumber [ICU]
     UNDEFINED <> szItemNoUnknownFormat [UITM]
     UNDEFINED <> mnUniqueKeyIDInternal [UKID]


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Find records
Event: Button Clicked
Event GUID: 90933bf6-a23d-11d0-a204-0000f6728a56
=============================================
FC kco - Prev Key Comp (wf) [KCO] = <Blank>
FC doc - Prev Doc No (wf) [DOC] = "0"
FC dct - Prev Doc Type (wf) [DCT] = <Blank>
FC dct - Def Doc Type (wf) [DCT] = "*"
If PO szDocumenttype [DCT] is not equal to <Blank>
And PO szDocumenttype [DCT] is not equal to <NULL>
     FC dct - Def Doc Type (wf) [DCT] = PO szDocumenttype [DCT]
End If
If QC Do Ty [DCT] is not equal to <Blank>
And QC Do Ty [DCT] is not equal to <NULL>
     FC dct - Def Doc Type (wf) [DCT] = QC Do Ty [DCT]
End If


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Add record
Event: Button Clicked
Event GUID: f57dfc77-a23a-11d0-a204-0000f6728a56
=============================================
//   
// Call Inventory Issues in Add mode 
//  
Call App:P4112 Form:W4112A Version: 
     UNDEFINED <> Docvoucherinvoicee [DOC]
     UNDEFINED <> Documenttype [DCT]
     UNDEFINED <> Companykey [KCO]
     UNDEFINED <> Dtforglandvouch1 [DGL]
     UNDEFINED <> Costcenter [MCU]
     UNDEFINED <> Datetransactionjulian [TRDJ]
     UNDEFINED <> Explanationtransaction [TREX]
     UNDEFINED <> Batchnumber [ICU]
     UNDEFINED <> szItemNoUnknownFormat [UITM]
     UNDEFINED <> mnUniqueKeyIDInternal [UKID]


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Review Inventory Issues
Event: Button Clicked
Event GUID: f57e1272-a23a-11d0-a204-0000f6728a56
=============================================
Press Button(FC )


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Item Ledger
Event: Button Clicked
Event GUID: 909333c5-a23d-11d0-a204-0000f6728a56
=============================================
Call App:P4111 Form:W4111A Version:PO szItemLedgerVersion
     UNDEFINED <> UniqueKeyIDInternal [UKID]
     GC Branch/ Plant [MCU] -> Costcenter [MCU]
     UNDEFINED <> Location [LOCN]
     UNDEFINED <> Lot [LOTN]
     UNDEFINED <> Itemnounknownformat [UITM]


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Journal Entries
Event: Button Clicked
Event GUID: 909333c4-a23d-11d0-a204-0000f6728a56
=============================================
If GC Batch Number [ICU] is not equal to "0"
     GetF0911Information(B4100470.GetF0911Information)
          GC Do Ty [DCT] -> szDocumentType [DCT]
          GC Document Number [DOC] -> mnDocumentNumber [DOC]
          GC Doc Co [KCO] -> szDocumentCompany [KCO]
          "1" -> mnJournalEntryLineNo [JELN]
          GC G/L Date [DGL] -> jdGLDate [DGL]
          UNDEFINED <> szAccountNumber [ANI]
          UNDEFINED <> szSubledger [SBL]
          UNDEFINED <> cSubledgerType [SBLT]
          UNDEFINED <> szPhase [WR01]
          UNDEFINED <> szAssetIDEquipment [ASII]
          "1" -> cSuppressErrorMsg [EV01]
          UNDEFINED <> szErrorMsgID [DTAI]
          FC LT-F0911 Ledger Type (wf) [LT] <> szLedgerType [LT]
          FC EXA-F0911 Explanation [EXA] <> szExplanation [EXA]
          FC CRCD-F0911 Currency Code (wf) [CRCD] <> szCurrencyCode [CRCD]
          FC CRR-F0911Exchange Rate (wf) [CRR] <> mnCurrencyConversionRate [CRR]
     Call App:P0911 Form:W0911A Version:PO szJournalEntriesVersion
          GC Do Ty [DCT] -> Documenttype [DCT]
          GC Document Number [DOC] -> Docvoucherinvoicee [DOC]
          GC Doc Co [KCO] -> Companykey [KCO]
          FC EXA-F0911 Explanation [EXA] -> Namealphaexplanation [EXA]
          GC Batch Number [ICU] -> Batchnumber [ICU]
          FC CRCD-F0911 Currency Code (wf) [CRCD] -> Currencycodefrom [CRCD]
          FC CRR-F0911Exchange Rate (wf) [CRR] -> Currencyconverrateov [CRR]
          GC G/L Date [DGL] -> Dateforglandvoucherjulia [DGJ]
          "N" -> Batchtype [ICUT]
          UNDEFINED <> SurpressBatchControl [EV01]
          FC LT-F0911 Ledger Type (wf) [LT] -> LedgerType [LT]
          UNDEFINED <> ModelFlag [EV02]
          "Y" -> InquiryOnlyFlag [EV03]
          UNDEFINED <> mnHistorical_Currency_Conversi [HCRR]
          UNDEFINED <> jdHistorical_Date__Julian_F091 [HDGJ]
          UNDEFINED <> cCurrency_Update_F0911 [ALT9]
          UNDEFINED <> cReverse_or_Void_RV_F0911 [RE]
End If


=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Object: HC Review General Accounting Batches
Event: Button Clicked
Event GUID: f57e1273-a23a-11d0-a204-0000f6728a56
=============================================
Call App:P0011 Form:W0011A Version:ZJDE0001
     "N" <> BatchType [ICUT]
     GC Batch Number [ICU] <> BatchNumber [ICU]
     UNDEFINED <> mnKeyValueSerialNumber [SERK]



=============================================
EVENTS
=============================================
Form: Work With Inventory Issues - W4112D
Event: Dialog is Initialized
Event GUID: f57dfc74-a23a-11d0-a204-0000f6728a56
=============================================
// -----------------------------------------------------------------
// Date           Programmer  SAR       Description
// -----------------------------------------------------------------
// 10/21/05   IC8996050 7841662   Replicate batches and NN
// -----------------------------------------------------------------
//   
// Load default document type with processing option 
//  
FC dct - Def Doc Type (wf) [DCT] = PO szDocumenttype [DCT]
// -----------------------------------------------------------------------------
//      If Processing Option Versions for each application are blank, load each
//      versions with the default version of ZJDE0001.
// -----------------------------------------------------------------------------
If PO szJournalEntriesVersion [VL01] is equal to or empty <Blank>
     PO szJournalEntriesVersion [VL01] = "ZJDE0001"
End If
If PO szItemLedgerVersion [VL03] is equal to or empty <Blank>
     PO szItemLedgerVersion [VL03] = "ZJDE0001"
End If
If PO szWarehouseRequestVersion [VL04] is equal to or empty <Blank>
     PO szWarehouseRequestVersion [VL04] = "ZJDE0001"
End If

=============================================
Form: Work With Inventory Issues - W4112D
Event: Grid Record is Fetched
Event GUID: f57dfc75-a23a-11d0-a204-0000f6728a56
=============================================
//    
// -----------------------------------------------------------------------------
//      SAR #1914074      1/23/1998
//      Suppress Grid Record from Displaying for the following lines:
//      1.    Standard Cost Change
//      2.    Zero Balance Adjustment
// -----------------------------------------------------------------------------
// 
If BC Explanation - Transaction (F4111.0) [TREX] is equal to "Standard Cost Change"
Or BC Explanation - Transaction (F4111.0) [TREX] is equal to "Zero Balance Adjustment"
     Suppress Grid Line(FC Grid)
Else
     // If document number, type and company are the same as the previous record,
     // suppress writing the record to the grid. 
     //  
     If BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC] is equal to FC doc - Prev Doc No (wf) [DOC]
     And BC Document Type (F4111.0) [DCT] is equal to FC dct - Prev Doc Type (wf) [DCT]
     And BC Document Company (F4111.0) [KCO] is equal to FC kco - Prev Key Comp (wf) [KCO]
     And BC Batch Number (F4111.0) [ICU] is equal to VA frm_ICU_BatchNumber [ICU]
          Suppress Grid Line(FC Grid)
     End If
     //   
     // Save the current doc number, type and company 
     //  
     // 
     VA frm_ICU_BatchNumber [ICU] = BC Batch Number (F4111.0) [ICU]
     FC doc - Prev Doc No (wf) [DOC] = BC Document (Voucher, Invoice, etc.) (F4111.0) [DOC]
     FC dct - Prev Doc Type (wf) [DCT] = BC Document Type (F4111.0) [DCT]
     FC kco - Prev Key Comp (wf) [KCO] = BC Document Company (F4111.0) [KCO]
     //   
End If







