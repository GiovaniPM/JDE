<!DOCTYPE html><html lang = "en"><head><meta charset = "utf-8"><meta name = "viewport" content = "width=device-width, initial-scale=1"><title>JDE Object Browser HTML Extract</title>
<style type='text/css'>body,th{font-family: Courier New, Courier, mono;font-size: 12px; width:auto}
.section{font-family: Arial, Helvetica, sans-serif;font-size: 12px;font-weight: bold;border: thin groove #CC9966;width: 100%;padding-left: 5px;padding-top: 5px;padding-bottom: 5px; padding-right: 5px; box-sizing: border-box }
.objectheader {font-family: Arial, Helvetica, sans-serif;font-size: 12px;font-weight: bold;border: thin groove #CC9966;width:auto;background-color: #FFFFCC;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; box-sizing: border-box }
.details{font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;border: thin groove #CC9966;width:100%;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px;box-sizing: border-box }
.er {background-color: #FFFFFF;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal; border: thin solid #CCCCCC; width:auto; padding-left: 5px;padding-top: 5px;padding-bottom: 5px; padding-right: 5px; box-sizing: border-box }
.dstrmembers {background-color: #FFFDDD;font-family: Courier New, Courier, mono;font-size: 12px;border: thin groove #CC9966;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; box-sizing: border-box }
.disabled {font-family: Courier New, Courier, mono;font-size: 12px;	font-style: italic; color:#CC9933}
.parameters {font-family: Courier New, Courier, mono;font-size: 12px; color:#3333FF}
.comment {font-family: Courier New, Courier, mono;font-size: 12px;	color: #339933}
.subtable {font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;width:100%}
.lineno {color:#6E6E6E;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.iokey {color:#FF6905;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.logicline {color:#000000;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.versionoverride {background-color: #FFCC99;}
.overrideflags{font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;border: thin groove #CC9966;width:auto;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; background-color: #FFCC99; box-sizing: border-box }
.bsfnprops {font-family: Courier New, Courier, mono;font-size: 12px; color:#E01B4C}
.searchresult {font-family: Courier New, Courier, mono;font-size: 12px; font-weight: bold; background-color:#8BF3A0}
.expand {font-family: Courier New, Courier, mono;font-size: 11px; font-weight: bold; cursor:pointer; border: 1px solid gray; position: relative; left: -3px; display:inline; line-height:8px;}
.expand2 { display:inline; cursor:pointer; font-size: 9px; border: 1px solid gray; position: relative; left: -3px;}
</style>
<script type='text/javascript'>function load(){location.href = '#result';}</script>
<script language='JavaScript' type='text/javascript'>function ExpandCollapse(ElementId){ var ClickedElement = document.getElementById(ElementId); var SectionName = ElementId + ':hide'; var Section = document.getElementById(SectionName); if (ClickedElement.innerHTML == '-') { 	 ClickedElement.innerHTML = '+';	Section.style.display = 'none'; }  else  { 		ClickedElement.innerHTML = '-'; 	Section.style.display = 'inline';}} </script>
<base target = "_parent"></head><body onload='load()'>
<div class ='objectheader'>Business Function: B5503136 - As Of Aging Server - para arquivos purge<BR>Function Type: C</div><div class='section'>EVENTS<div class='objectheader'>C Function: As Of Aging Server - para arquivos purge - [ASOfPurge]</div><div class='er'><div class='dstrmembers'><B>Data Structure: D5503136 - As Of Aging Server - arquivos purge                         </B><BR>BF jdDateForGLandVoucherJULIA [DGJ]<BR>BF jdDateAgeAsOf [DAG]<BR>BF jdDateInvoiceClosed [JCL]<BR>BF mnDocVoucherInvoiceE [DOC]<BR>BF szDocumentType [DCT]<BR>BF szCompanyKey [KCO]<BR>BF szDocumentPayItem [SFX]<BR>BF mnAmountGross [AG]<BR>BF mnAmountCurrency [ACR]<BR>BF mnAmountOpen [AAP]<BR>BF mnAmountForeignOpen [FAP]<BR>BF cPaymentFlag [EV01]<BR>BF mnAmtDiscountAvailable [ADSC]<BR>BF mnForeignDiscountAvail [CDS]<BR>BF cARPostToCashManagement [ISTC]<BR></div><pre><div class='dstrmembers'><B>Header File: b5503136.h</B><BR></div><br/>/*****************************************************************************<br/> *    Header File:  B5503136.h<br/> *<br/> *    Description:  A/R As Of Aging Server Header File - arquivos purge<br/> *<br/> *        History:<br/> *          Date        Programmer  SAR# - Description<br/> *          ----------  ----------  -------------------------------------------<br/> *   Author 01/24/1997  Unknown     1478663  - Created  <br/> *          06/21/1999  S. Harris   3106708  - Logic to handle voided invoices (F03B112p).<br/> *<br/> * Copyright (c) J.D. Edwards World Source Company, 1996<br/> *<br/> * This unpublished material is proprietary to J.D. Edwards World Source <br/> * Company.  All rights reserved.  The methods and techniques described <br/> * herein are considered trade secrets and/or confidential.  Reproduction<br/> * or distribution, in whole or in part, is forbidden except by express<br/> * written permission of J.D. Edwards World Source Company.<br/> ****************************************************************************/<br/><br/>#ifndef __B5503136_H<br/>#define __B5503136_H<br/><br/>/*****************************************************************************<br/> * Table Header Inclusions<br/> ****************************************************************************/<br/><br/>#include &ltf55b11p.h&gt<br/><br/>#include &ltf55b13p.h&gt<br/><br/>#include &ltf55b14p.h&gt<br/><br/>#include &ltf55b112p.h&gt<br/><br/>/*****************************************************************************<br/> * External Business Function Header Inclusions<br/> ****************************************************************************/<br/><br/>#include &ltjdeapp.h&gt<br/><br/>/*****************************************************************************<br/> * Global Definitions<br/> ****************************************************************************/<br/><br/>/*****************************************************************************<br/> * Structure Definitions<br/> ****************************************************************************/<br/><br/>/* F03B14P Requested Columns */<br/><br/>typedef struct<br/>{<br/>   MATH_NUMERIC   rzdoc;<br/>   JCHAR           rzdct[3];           <br/>   JCHAR           rzkco[6];           <br/>   JCHAR           rzsfx[4];            <br/>   MATH_NUMERIC   rzpyid;             <br/>   MATH_NUMERIC   rzrc5;             <br/>   JDEDATE        rzdgj;<br/>   MATH_NUMERIC   rzpaap;             <br/>   MATH_NUMERIC   rzpfap;             <br/>   MATH_NUMERIC   rzadsa;             <br/>   MATH_NUMERIC   rzcdsa;<br/>   MATH_NUMERIC   rzaaaj;             <br/>   MATH_NUMERIC   rzfchg;             <br/>   MATH_NUMERIC   rzecba;             <br/>   MATH_NUMERIC   rzecbf;<br/>   MATH_NUMERIC   rzdda;             <br/>   MATH_NUMERIC   rzfda;<br/>   MATH_NUMERIC   rzagl;<br/>} DSb5503136ColsF03B14P, FAR *LPDSb5503136ColsF03B14P;<br/><br/><br/>/* F03B112P Requested Columns */<br/><br/>typedef struct<br/>{<br/>   MATH_NUMERIC   rwdoc;<br/>   JCHAR           rwdct[3];<br/>   JCHAR           rwkco[6];<br/>   JCHAR           rwsfx[4];<br/>   MATH_NUMERIC   rwsfxe;<br/>   MATH_NUMERIC   rwaap;<br/>   MATH_NUMERIC   rwfap;<br/>      <br/>} DSb5503136ColsF03B112P, FAR *LPDSb5503136ColsF03B112P;<br/><br/>/* F03B13P Requested Columns */<br/><br/>typedef struct<br/>{<br/>   MATH_NUMERIC   rypyid;<br/>   MATH_NUMERIC   ryckam;<br/>   MATH_NUMERIC   ryfcam;<br/>   JDEDATE		  ryvdgj;<br/>      <br/>} DSb5503136ColsF03B13P, FAR *LPDSb5503136ColsF03B13P;<br/><br/>/* F03B11P Requested Columns */<br/><br/>typedef struct<br/>{<br/>   MATH_NUMERIC   rpdoc;<br/>   JCHAR           rpdct[3];<br/>   JCHAR           rpkco[6];<br/>   JCHAR           rpsfx[4];<br/>   JDEDATE        rpdgj;<br/>   MATH_NUMERIC   rppyid;<br/>   JDEDATE        rpjcl;<br/>         <br/>} DSb5503136ColsF03B11P, FAR *LPDSb5503136ColsF03B11P;<br/><br/>/*****************************************************************************<br/> * DS Template Type Definitions<br/> ****************************************************************************/<br/>/*****************************************<br/> * TYPEDEF for Data Structure<br/> *    Template Name: F03B14P As Of Aging Server<br/> *    Template ID:   D5503136<br/> *    Generated:     Mon Feb 16 13:03:37 1998<br/> *<br/> * DO NOT EDIT THE FOLLOWING TYPEDEF<br/> *    To make modifications, use the Everest Data Structure<br/> *    Tool to Generate a revised version, and paste from<br/> *    the clipboard.<br/> *<br/> **************************************/<br/><br/>#ifndef DATASTRUCTURE_D5503136<br/>#define DATASTRUCTURE_D5503136<br/><br/>typedef struct tagDSD5503136<br/>{<br/>  JDEDATE           jdDateForGLandVoucherJULIA;          <br/>  JDEDATE           jdDateAgeAsOf;                       <br/>  JDEDATE           jdDateInvoiceClosed;                 <br/>  MATH_NUMERIC      mnDocVoucherInvoiceE;                <br/>  JCHAR              szDocumentType[3];                   <br/>  JCHAR              szCompanyKey[6];                     <br/>  JCHAR              szDocumentPayItem[4];                <br/>  MATH_NUMERIC      mnAmountGross;                       <br/>  MATH_NUMERIC      mnAmountCurrency;                    <br/>  MATH_NUMERIC      mnAmountOpen;                        <br/>  MATH_NUMERIC      mnAmountForeignOpen;                 <br/>  JCHAR              cPaymentFlag;                        <br/>  MATH_NUMERIC      mnAmtDiscountAvailable;              <br/>  MATH_NUMERIC      mnForeignDiscountAvail;              <br/>  JCHAR              cARPostToCashManagement;             <br/>} DSD5503136, *LPDSD5503136;<br/><br/>#define IDERRjdDateForGLandVoucherJULIA_1         1L<br/>#define IDERRjdDateAgeAsOf_2                      2L<br/>#define IDERRjdDateInvoiceClosed_3                3L<br/>#define IDERRmnDocVoucherInvoiceE_4               4L<br/>#define IDERRszDocumentType_5                     5L<br/>#define IDERRszCompanyKey_6                       6L<br/>#define IDERRszDocumentPayItem_7                  7L<br/>#define IDERRmnAmountGross_8                      8L<br/>#define IDERRmnAmountCurrency_9                   9L<br/>#define IDERRmnAmountOpen_10                      10L<br/>#define IDERRmnAmountForeignOpen_11               11L<br/>#define IDERRcPaymentFlag_12                      12L<br/>#define IDERRmnAmtDiscountAvailable_13            13L<br/>#define IDERRmnForeignDiscountAvail_14            14L<br/>#define IDERRcARPostToCashManagement_16           16L<br/><br/>#endif<br/><br/>/*****************************************************************************<br/> * Source Preprocessor Definitions<br/> ****************************************************************************/<br/>#if defined (JDEBFRTN)<br/>	#undef JDEBFRTN<br/>#endif<br/><br/>#if defined (WIN32)<br/>	#if defined (WIN32)<br/>		#define JDEBFRTN(r) __declspec(dllexport) r<br/>	#else<br/>		#define JDEBFRTN(r) __declspec(dllimport) r<br/>	#endif<br/>#else<br/>	#define JDEBFRTN(r) r<br/>#endif<br/><br/>/*****************************************************************************<br/> * Business Function Prototypes<br/> ****************************************************************************/<br/>JDEBFRTN (ID) JDEBFWINAPI ASOfPurge                  (LPBHVRCOM lpBhvrCom, LPVOID lpVoid, LPDSD5503136 lpDS);<br/><br/><br/>/*****************************************************************************<br/> * Internal Function Prototypes<br/> ****************************************************************************/<br/><br/>#endif    /* __B5503136_H */<br/><br/></pre><BR/><pre><div class='dstrmembers'><B>Source File: b5503136.c</B><BR></div>#include &ltjde.h&gt<br/><br/>#define b5503136_c<br/><br/><br/>/*****************************************************************************<br/> *    Source File:  b5503136.c<br/> *<br/> *    Description:  A/R As Of Aging Server Source File<br/> *<br/> *          History:<br/> *          Date        Programmer  SAR# - Description<br/> *          ----------  ----------  -------------------------------------------<br/> *   Author 01/24/1997  C. Walsh    1478663  - Created  <br/> *          06/21/1999  S. Harris   3106708  - Logic to handle voided invoices (F03B112P).<br/> *			12/21/2000	G. Brown	4521022  - As Of doesn't show AR Drafts<br/> *         <br/> * Copyright (c) J.D. Edwards World Source Company, 1996<br/> *<br/> * This unpublished material is proprietary to J.D. Edwards World Source Company.<br/> * All rights reserved.  The methods and techniques described herein are<br/> * considered trade secrets and/or confidential.  Reproduction or<br/> * distribution, in whole or in part, is forbidden except by express<br/> * written permission of J.D. Edwards World Source Company.<br/> ****************************************************************************/<br/>/**************************************************************************<br/> * Notes:<br/> *<br/> **************************************************************************/<br/><br/>#include &ltb5503136.h&gt<br/><br/><br/>/**************************************************************************<br/> *  Business Function:  AsOfAgingServer<br/> *<br/> *        Description:  A/R As Of Aging Server<br/> *<br/> *         Parameters:<br/> *           LPBHVRCOM           lpBhvrCom    Business Function Communications<br/> *           LPVOID              lpVoid       Void Parameter - DO NOT USE!<br/> *           LPDSD5503136        lpDS         Parameter Data Structure Pointer  <br/> *<br/> *************************************************************************/<br/><br/>JDEBFRTN (ID) JDEBFWINAPI ASOfPurge (LPBHVRCOM lpBhvrCom, LPVOID lpVoid, LPDSD5503136 lpDS)<br/>{<br/>   /************************************************************************<br/>    *  Variable declarations<br/>    ************************************************************************/<br/>	HUSER                   hUser;<br/>	HREQUEST                hRequestF03B14P    =  (HREQUEST)NULL;<br/>	HREQUEST                hRequestF03B112P   =  (HREQUEST)NULL;<br/>	HREQUEST                hRequestF03B13P    =  (HREQUEST)NULL;<br/>	HREQUEST                hRequestF03B11P    =  (HREQUEST)NULL;<br/><br/>	NID                     szCol14[18] =	 {NID_DOC,  NID_DCT, <br/>	                                          NID_KCO,  NID_SFX,<br/>	  								          NID_PYID,<br/>									          NID_RC5,  NID_DGJ,<br/>											  NID_PAAP, NID_PFAP,<br/>                                              NID_ADSA, NID_CDSA,<br/>                                              NID_AAAJ, NID_FCHG,<br/>                                              NID_ECBA, NID_ECBF,<br/>                                              NID_DDA,  NID_FDA,<br/>                                              NID_AGL};<br/><br/>	NID                     szCol112[7]   =  {NID_DOC,   NID_DCT,<br/>                                              NID_KCO,   NID_SFX,<br/>                                              NID_SFXE,  NID_AAP,<br/>                                              NID_FAP};<br/><br/>	NID                     szCol13[4]    =  {NID_PYID,  NID_CKAM,<br/>											  NID_FCAM,  NID_VDGJ};<br/><br/>	NID                     szCol11[7]    =  {NID_DOC,   NID_DCT,<br/>                                              NID_KCO,   NID_SFX,<br/>                                              NID_DGJ,	 NID_PYID,  <br/>											  NID_JCL};<br/><br/>	ID                      idJDBReturn;<br/>	MATH_NUMERIC            mnTotalPAAP;                        <br/>	MATH_NUMERIC            mnTotalPFAP;                        <br/>	MATH_NUMERIC            mnTotalADSA;                        <br/>	MATH_NUMERIC            mnTotalCDSA;                        <br/>	MATH_NUMERIC            mnZero; <br/>	MATH_NUMERIC			mnThirty		= {0};<br/>	int						i;	/* counter */<br/>	MATH_NUMERIC            mnMiscSelectOne;<br/><br/>	/************************************************************************<br/>     * Declare structures<br/>     ************************************************************************/<br/>   <br/>	DSb5503136ColsF03B112P   dsF03B112P;<br/>	DSb5503136ColsF03B14P    dsF03B14P; <br/>	KEY1_F03B13P				dsKeyF03B13P				= {0};<br/>	KEY1_F03B11P				dsKeyF03B11P				= {0};<br/>	DSb5503136ColsF03B11P    dsF03B11P;<br/>	DSb5503136ColsF03B13P    dsF03B13P;<br/>	SELECTSTRUCT            Select[7];<br/>	SELECTSTRUCT            dsSelectF03B112P[6];<br/>	DSDE0022                dsDE0022;		/* new error message structure */<br/><br/>    /************************************************************************<br/>     * Declare pointers<br/>     ************************************************************************/<br/><br/>	/************************************************************************<br/>     * Check for NULL pointers<br/>     ************************************************************************/<br/><br/>	if ((lpBhvrCom == (LPBHVRCOM) NULL) ||<br/>		(lpVoid    == (LPVOID)    NULL) ||<br/>		(lpDS      == (LPDSD5503136)	NULL))<br/>	{<br/>			jdeErrorSet (lpBhvrCom, lpVoid, (ID) 0, _J("4363"), (LPVOID) NULL);<br/>			return ER_ERROR;<br/>	}<br/><br/>	/************************************************************************<br/>	 * Set pointers<br/>	 ************************************************************************/<br/><br/>	/************************************************************************<br/>     * Clear Structures<br/>     ************************************************************************/<br/>	<br/>	memset((void *)(&dsF03B112P), (int)(_J('\0')), sizeof(DSb5503136ColsF03B112P));<br/>	memset((void *)(&dsF03B14P),  (int)(_J('\0')), sizeof(DSb5503136ColsF03B14P));<br/>	memset((void *)(&dsF03B11P), (int)(_J('\0')),  sizeof(szCol11));<br/>	memset((void *)(&dsF03B13P), (int)(_J('\0')),  sizeof(szCol13));<br/>	ZeroMathNumeric(&mnTotalPAAP);<br/>	ZeroMathNumeric(&mnTotalPFAP);<br/>	ZeroMathNumeric(&mnTotalADSA);<br/>	ZeroMathNumeric(&mnTotalCDSA);<br/>	ZeroMathNumeric(&mnZero);<br/>	<br/>   /**************************************************************************<br/>    * Initialize Behavior Routine<br/>    **************************************************************************/<br/>   <br/>	idJDBReturn = JDB_InitBhvr(lpBhvrCom,<br/>                               &hUser,<br/>                               (JCHAR *)NULL,<br/>                               JDEDB_COMMIT_AUTO);<br/><br/>	if (idJDBReturn != JDEDB_PASSED)<br/>	{<br/>		jdeSetGBRError (lpBhvrCom, lpVoid,(ID) 0, _J("078S"));<br/>		return  ER_ERROR;<br/>	}<br/><br/>	/************************************************************************<br/>	 * Main Processing<br/>	 ************************************************************************/<br/>	<br/><br/>	/*	This code has been entered to allow for the As Of Aging process to recalculate<br/>		the open amount on drafts also. The aging process is completely different from <br/>		the regualar invoice process, so it is its own process.   */<br/><br/>	if (jdeStrncmp((JCHAR *)(lpDS-&gtszDocumentType), (JCHAR *)(_J("R1")), <br/>				DIM(lpDS-&gtszDocumentType)) == 0) 	<br/>	{<br/><br/>		idJDBReturn = JDB_OpenTable(hUser,<br/>									NID_F03B11P,<br/>									ID_F03B11P_DOC_NUMBER__DOC_TYPE___A,<br/>									szCol11,<br/>									(ushort) 7,<br/>									(JCHAR *) NULL,<br/>									&hRequestF03B11P);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			memset((void *)(&dsDE0022), (int)(_J('\0')), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription, (const JCHAR *)(_J("F03B11P")), DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom, lpVoid, (ID) 0, _J("078D"), &dsDE0022);<br/>  			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/>		<br/>		idJDBReturn = JDB_OpenTable(hUser,<br/>									NID_F03B13P,<br/>									ID_F03B13P_PAYMENT_ID,<br/>									szCol13,<br/>									(ushort) 4,<br/>									(JCHAR *) NULL,<br/>									&hRequestF03B13P);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			memset((void *)(&dsDE0022), (int)(_J('\0')), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription, (const JCHAR *)(_J("F03B13P")), DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom, lpVoid, (ID) 0, _J("078D"), &dsDE0022);<br/>  			JDB_CloseTable(hRequestF03B11P);<br/>			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/><br/>		idJDBReturn = JDB_OpenTable(hUser,<br/>									NID_F03B14P,<br/>									ID_F03B14P_DOC_DCT___A,<br/>									szCol14,<br/>									(ushort) 18,<br/>									(JCHAR *) NULL,<br/>									&hRequestF03B14P);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			memset((void *)(&dsDE0022), (int)(_J('\0')), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription, (const JCHAR *)(_J("F03B14P")), DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom, lpVoid, (ID) 0, _J("078D"), &dsDE0022);<br/>			JDB_CloseTable(hRequestF03B11P);<br/>			JDB_CloseTable(hRequestF03B13P);<br/>  			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/><br/>		MathCopy(&dsKeyF03B11P.rpdoc, &lpDS-&gtmnDocVoucherInvoiceE);<br/>		jdeStrncpy(dsKeyF03B11P.rpdct, (const JCHAR *)(lpDS-&gtszDocumentType), DIM(dsKeyF03B11P.rpdct));<br/>		jdeStrncpy(dsKeyF03B11P.rpkco, (const JCHAR *)(lpDS-&gtszCompanyKey), DIM(dsKeyF03B11P.rpkco));<br/>		jdeStrncpy(dsKeyF03B11P.rpsfx, (const JCHAR *)(lpDS-&gtszDocumentPayItem), DIM(dsKeyF03B11P.rpsfx));<br/>		<br/>		idJDBReturn = JDB_FetchKeyed(hRequestF03B11P,<br/>									(ID)0,<br/>									(void *) &dsKeyF03B11P,<br/>									(short) 4,<br/>									(void *) &dsF03B11P,<br/>									FALSE);<br/><br/>		if (idJDBReturn == JDEDB_FAILED)<br/>		{<br/>			memset((void *) &dsDE0022, (int)_J('\0'), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription,_J("F03B13P"),DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom,lpVoid,(ID)0,_J("078I"),&dsDE0022);<br/>			JDB_CloseTable(hRequestF03B11P);<br/>			JDB_CloseTable(hRequestF03B13P);<br/>			JDB_CloseTable(hRequestF03B14P);			<br/>			JDB_FreeBhvr(hUser);<br/>			return (ER_ERROR);<br/>		}		<br/><br/>		MathCopy(&dsKeyF03B13P.rypyid, &dsF03B11P.rppyid);<br/>		<br/>		idJDBReturn = JDB_FetchKeyed(hRequestF03B13P,<br/>									(ID)0,<br/>									(void *)&dsKeyF03B13P,<br/>									(short) 1,<br/>									(void *) &dsF03B13P,<br/>									FALSE);<br/><br/>		if (idJDBReturn == JDEDB_FAILED)<br/>		{<br/>			memset((void *) &dsDE0022, (int)_J('\0'), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription,_J("F03B13P"),DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom,lpVoid,(ID)0,_J("078I"),&dsDE0022);<br/>			JDB_CloseTable(hRequestF03B11P);<br/>			JDB_CloseTable(hRequestF03B13P);<br/>			JDB_CloseTable(hRequestF03B14P);<br/>			JDB_FreeBhvr(hUser);<br/>			return (ER_ERROR);<br/>		}<br/><br/>		MathCopy (&mnTotalPAAP, &dsF03B13P.ryckam);<br/>		MathCopy (&mnTotalPFAP, &dsF03B13P.ryfcam);<br/>		MathCopy (&lpDS-&gtmnAmountOpen, &dsF03B13P.ryckam);<br/>		MathCopy (&lpDS-&gtmnAmountForeignOpen, &dsF03B13P.ryfcam);  <br/><br/>		/* If the VDGJ is not blank, then there could be a NSF record for this Draft. Find the <br/>		   associated 14 records to calculate the unreceived amount  */<br/><br/>		if (IsJDEDATENull(&dsF03B13P.ryvdgj) != TRUE)<br/>		{<br/><br/>			/* Set Selection Parameters  */<br/>			i = 0;<br/><br/>			jdeNIDcpy(Select[i].Item1.szDict, NID_PYID);<br/>			jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>			Select[i].lpValue        =  &dsKeyF03B13P.rypyid;<br/>			Select[i].nValues        =  1;<br/>			Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>			Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>			i++;<br/><br/>			ParseNumericString(&mnThirty,_J("30"));<br/>			jdeNIDcpy(Select[i].Item1.szDict, NID_UTIC);<br/>			jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>			Select[i].lpValue        =  &mnThirty;<br/>			Select[i].nValues        =  1;<br/>			Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>			Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>			i++;<br/><br/>			jdeNIDcpy(Select[i].Item1.szDict, NID_DGJ);<br/>			jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>			Select[i].lpValue        =  &lpDS-&gtjdDateAgeAsOf;<br/>			Select[i].nValues        =  1;<br/>			Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>			Select[i].nCmp           =  JDEDB_CMP_LE;<br/>			i++;<br/>	<br/>			if (lpDS-&gtcARPostToCashManagement == _J('1'))<br/>			{<br/>				/* only get records posted to the F03B16 */<br/>				jdeNIDcpy(Select[i].Item1.szDict, NID_ISTC);<br/>				jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>				Select[i].lpValue        =  _J("1");<br/>				Select[i].nValues        =  1;<br/>				Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>				Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>				i++;<br/>			}<br/><br/>			idJDBReturn = JDB_SetSelection(hRequestF03B14P,<br/>								  (LPSELECT)Select,<br/>								  (ushort)i,<br/>								  JDEDB_SET_REPLACE);<br/><br/>			if (idJDBReturn != JDEDB_PASSED)<br/>			{<br/>				jdeSetGBRError(lpBhvrCom, lpVoid, (ID) 0, _J("0037"));<br/>				JDB_CloseTable(hRequestF03B11P);<br/>				JDB_CloseTable(hRequestF03B13P);<br/>				JDB_CloseTable(hRequestF03B14P);<br/>				JDB_FreeBhvr(hUser);<br/>				return ER_ERROR;<br/>			}<br/><br/>			idJDBReturn = JDB_SelectKeyed(hRequestF03B14P,<br/>	    								(ID) 0, <br/>										(void *) NULL, <br/>										(short) 0);<br/><br/>			if (idJDBReturn == JDEDB_PASSED)<br/>			{<br/><br/>   				lpDS-&gtcPaymentFlag = _J('0');<br/><br/>				/* Accumulate payment amounts prior to As Of date */<br/><br/>				while (idJDBReturn == JDEDB_PASSED)<br/>				{<br/>					idJDBReturn = JDB_Fetch(hRequestF03B14P, (void *) &dsF03B14P,(int)0);<br/>					if (idJDBReturn == JDEDB_PASSED)<br/>					{<br/>   						MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzpaap);<br/>	   					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzadsa);<br/>						MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzaaaj);<br/>   						MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzecba);<br/>	   					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzdda);<br/>						MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzagl);<br/><br/>						MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzpfap);<br/>						MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzcdsa);<br/>						MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzfchg);<br/>						MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzecbf);<br/>						MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzfda);<br/><br/>   						MathAdd (&mnTotalADSA, &mnTotalADSA, &dsF03B14P.rzadsa);<br/>   						MathAdd (&mnTotalCDSA, &mnTotalCDSA, &dsF03B14P.rzcdsa);<br/>						lpDS-&gtcPaymentFlag = _J('1');<br/>					}<br/>				}<br/>   <br/>				/* Assign Amount Open with the difference of Original Amount and Total Payments made <br/>					before As Of Date */<br/><br/>				MathAdd (&lpDS-&gtmnAmountOpen, &lpDS-&gtmnAmountGross, &mnTotalPAAP);<br/>				MathAdd (&lpDS-&gtmnAmountForeignOpen, &lpDS-&gtmnAmountCurrency, &mnTotalPFAP);       <br/>				MathAdd (&lpDS-&gtmnAmtDiscountAvailable, &lpDS-&gtmnAmtDiscountAvailable, &mnTotalADSA);<br/>				MathAdd (&lpDS-&gtmnForeignDiscountAvail, &lpDS-&gtmnForeignDiscountAvail, &mnTotalCDSA);<br/><br/>			}<br/><br/>		}<br/><br/>		if (hRequestF03B11P != (HREQUEST) NULL)<br/>		{<br/>			JDB_CloseTable(hRequestF03B11P);<br/>		}<br/><br/>		if (hRequestF03B13P != (HREQUEST) NULL)<br/>		{<br/>			JDB_CloseTable(hRequestF03B13P);<br/>		}<br/><br/>		if (hRequestF03B14P != (HREQUEST) NULL)<br/>		{<br/>			JDB_CloseTable(hRequestF03B14P);<br/>		}<br/><br/>	}	/* If the document type equal to R1  */<br/>	else<br/>	{<br/>		idJDBReturn = JDB_OpenTable(hUser,<br/>									NID_F03B14P,<br/>									ID_F03B14P_DOC_DCT___A,<br/>									szCol14,<br/>									(ushort) 18,<br/>									(JCHAR *) NULL,<br/>									&hRequestF03B14P);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			memset((void *)(&dsDE0022), (int)(_J('\0')), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription, (const JCHAR *)(_J("F03B14P")), DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom, lpVoid, (ID) 0, _J("078D"), &dsDE0022);<br/>  			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/><br/>		idJDBReturn = JDB_OpenTable(hUser,<br/>								NID_F03B112P,<br/>								ID_F03B112P_DOC__TYPE__A,<br/>								szCol112,<br/>								(ushort) 7,<br/>								(JCHAR *) NULL,<br/>								&hRequestF03B112P);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			memset((void *)(&dsDE0022), (int)(_J('\0')), sizeof(dsDE0022));<br/>			jdeStrncpy(dsDE0022.szDescription, (const JCHAR *)(_J("F03B112P")), DIM(dsDE0022.szDescription));<br/>			jdeSetGBRErrorSubText(lpBhvrCom, lpVoid, (ID) 0, _J("078D"), &dsDE0022);<br/>			JDB_CloseTable(hRequestF03B14P);<br/>  			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/><br/>		/* Set Selection Parameters  */<br/>		i = 0;<br/><br/>		jdeNIDcpy(Select[i].Item1.szDict, NID_DOC);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &lpDS-&gtmnDocVoucherInvoiceE;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>		i++;<br/><br/>		jdeNIDcpy(Select[i].Item1.szDict, NID_DCT);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &lpDS-&gtszDocumentType;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>		i++;<br/><br/>		jdeNIDcpy(Select[i].Item1.szDict, NID_KCO);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &lpDS-&gtszCompanyKey;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>		i++;<br/><br/>		jdeNIDcpy(Select[i].Item1.szDict, NID_SFX);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &lpDS-&gtszDocumentPayItem;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>		i++;<br/><br/>	/*	jdeNIDcpy(Select[i].Item1.szDict, NID_RC5);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &mnZero;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_NE;<br/>		i++;   */<br/><br/>		jdeNIDcpy(Select[i].Item1.szDict, NID_DGJ);<br/>		jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>		Select[i].lpValue        =  &lpDS-&gtjdDateAgeAsOf;<br/>		Select[i].nValues        =  1;<br/>		Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>		Select[i].nCmp           =  JDEDB_CMP_LE;<br/>		i++;<br/>	<br/>		if (lpDS-&gtcARPostToCashManagement == _J('1'))<br/>		{<br/>			/* only get records posted to the F03B16 */<br/>			jdeNIDcpy(Select[i].Item1.szDict, NID_ISTC);<br/>			jdeNIDcpy(Select[i].Item1.szTable, NID_F03B14P);<br/>			Select[i].lpValue        =  _J("1");<br/>			Select[i].nValues        =  1;<br/>			Select[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>			Select[i].nCmp           =  JDEDB_CMP_EQ;<br/>			i++;<br/>		}<br/><br/>		idJDBReturn = JDB_SetSelection(hRequestF03B14P,<br/>									  (LPSELECT)Select,<br/>									  (ushort)i,<br/>									  JDEDB_SET_REPLACE);<br/><br/>		if (idJDBReturn != JDEDB_PASSED)<br/>		{<br/>			jdeSetGBRError(lpBhvrCom, lpVoid, (ID) 0, _J("0037"));<br/>			JDB_CloseTable(hRequestF03B14P);<br/>			JDB_CloseTable(hRequestF03B112P);<br/>			JDB_FreeBhvr(hUser);<br/>			return ER_ERROR;<br/>		}<br/><br/>		idJDBReturn = JDB_SelectKeyed(hRequestF03B14P,<br/>	    						 (ID) 0, <br/>								 (void *) NULL, <br/>								 (short) 0);<br/><br/>		if (idJDBReturn == JDEDB_PASSED)<br/>		{<br/>   			lpDS-&gtcPaymentFlag = _J('0');<br/><br/>			/* Accumulate payment amounts prior to As Of date */<br/><br/>			while (idJDBReturn == JDEDB_PASSED)<br/>			{<br/>				idJDBReturn = JDB_Fetch(hRequestF03B14P, (void *) &dsF03B14P,(int)0);<br/>				if (idJDBReturn == JDEDB_PASSED)<br/>				{<br/>   					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzpaap);<br/>	   				MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzadsa);<br/>					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzaaaj);<br/>   					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzecba);<br/>	   				MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzdda);<br/>					MathAdd (&mnTotalPAAP, &mnTotalPAAP, &dsF03B14P.rzagl);<br/><br/>					MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzpfap);<br/>					MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzcdsa);<br/>					MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzfchg);<br/>					MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzecbf);<br/>					MathAdd (&mnTotalPFAP, &mnTotalPFAP, &dsF03B14P.rzfda);<br/><br/>   					MathAdd (&mnTotalADSA, &mnTotalADSA, &dsF03B14P.rzadsa);<br/>   					MathAdd (&mnTotalCDSA, &mnTotalCDSA, &dsF03B14P.rzcdsa);<br/>					lpDS-&gtcPaymentFlag = _J('1');<br/>				}<br/>			}<br/>   <br/>			/* Assign Amount Open with the difference of Original Amount and Total Payments made <br/>				before As Of Date */<br/><br/>			if (jdeStrncmp((JCHAR *)(lpDS-&gtszDocumentType), (JCHAR *)(_J("RU")), <br/>				DIM(lpDS-&gtszDocumentType)) == 0) 	<br/>			{<br/>				<br/>				MathCopy(&lpDS-&gtmnAmountOpen, &mnTotalPAAP);<br/>				MathCopy(&lpDS-&gtmnAmountForeignOpen, &mnTotalPFAP);<br/>				MathCopy(&lpDS-&gtmnAmtDiscountAvailable, &mnTotalADSA);<br/>				MathCopy(&lpDS-&gtmnForeignDiscountAvail, &mnTotalCDSA);<br/><br/>			}<br/>			else<br/>			{<br/><br/>				MathAdd (&lpDS-&gtmnAmountOpen, &lpDS-&gtmnAmountGross, &mnTotalPAAP);<br/>				MathAdd (&lpDS-&gtmnAmountForeignOpen, &lpDS-&gtmnAmountCurrency, &mnTotalPFAP);       <br/>				MathAdd (&lpDS-&gtmnAmtDiscountAvailable, &lpDS-&gtmnAmtDiscountAvailable, &mnTotalADSA);<br/>				MathAdd (&lpDS-&gtmnForeignDiscountAvail, &lpDS-&gtmnForeignDiscountAvail, &mnTotalCDSA);<br/>			}<br/><br/><br/>		}<br/><br/>		/*This section will process voided invoices. If an invoice is voided, the gross amount<br/>			will always be zero.  We must then find the corresponding F03B112P record to use for<br/>			as of processing*/<br/>   <br/>		ParseNumericString (&mnMiscSelectOne, _J("0"));<br/>   <br/>		/*If the Amount gross is equal to zero*/<br/>   <br/>		if ( MathCompareAbsolute( &lpDS-&gtmnAmountGross, &mnMiscSelectOne) == 0 )<br/>		{<br/>			/* Set Selection Parameters  */<br/>			i = 0;<br/><br/>			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,   NID_DOC);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable,  NID_F03B112P);<br/>   			dsSelectF03B112P[i].lpValue        =  &lpDS-&gtmnDocVoucherInvoiceE;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>   			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_EQ;<br/>   			i++;<br/><br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,   NID_DCT);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable,  NID_F03B112P);<br/>			dsSelectF03B112P[i].lpValue        =  &lpDS-&gtszDocumentType;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>   			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_EQ;<br/>   			i++;<br/><br/>			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,   NID_KCO);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable,  NID_F03B112P);<br/>			dsSelectF03B112P[i].lpValue        =  &lpDS-&gtszCompanyKey;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_EQ;<br/>			i++;<br/><br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,   NID_SFX);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable,  NID_F03B112P);<br/>   			dsSelectF03B112P[i].lpValue        =  &lpDS-&gtszDocumentPayItem;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>   			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_EQ;<br/>   			i++;<br/>      <br/>			ParseNumericString (&mnMiscSelectOne, _J("1"));<br/><br/>			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,   NID_SFXE);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable,  NID_F03B112P);<br/>   			dsSelectF03B112P[i].lpValue        =  &mnMiscSelectOne;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>   			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_EQ;<br/>   			i++;<br/><br/>			jdeNIDcpy(dsSelectF03B112P[i].Item1.szDict,  NID_DGJ);<br/>   			jdeNIDcpy(dsSelectF03B112P[i].Item1.szTable, NID_F03B112P);<br/>   			dsSelectF03B112P[i].lpValue        =  &lpDS-&gtjdDateAgeAsOf;<br/>   			dsSelectF03B112P[i].nValues        =  1;<br/>   			dsSelectF03B112P[i].nAndOr         =  JDEDB_ANDOR_AND;<br/>   			dsSelectF03B112P[i].nCmp           =  JDEDB_CMP_GT;<br/>			i++;<br/><br/>			/* Set Selection */<br/><br/>   			idJDBReturn = JDB_SetSelection(hRequestF03B112P,<br/>								      (LPSELECT)dsSelectF03B112P,<br/>								      (ushort)i,<br/>								      JDEDB_SET_REPLACE);<br/><br/>			if (idJDBReturn != JDEDB_PASSED)<br/>   			{<br/>	   			jdeSetGBRError(lpBhvrCom, lpVoid, (ID) 0, _J("0037"));<br/>				JDB_CloseTable(hRequestF03B14P);<br/>    			JDB_CloseTable(hRequestF03B112P);<br/>   				JDB_FreeBhvr(hUser);<br/>	   			return ER_ERROR;<br/>   			}<br/><br/>			/* Select Keyed */<br/><br/>			idJDBReturn = JDB_SelectKeyed(hRequestF03B112P,<br/>	          	                     (ID) 0, <br/>				            		 (void *) NULL, <br/>								     (short) 0);<br/><br/>			if (idJDBReturn == JDEDB_PASSED)<br/>			{  <br/>				/*Perform the Fetch*/<br/>				idJDBReturn = JDB_Fetch(hRequestF03B112P, (void *) &dsF03B112P,(int)0);<br/>				if (idJDBReturn == JDEDB_PASSED)<br/>				{<br/>					ParseNumericString (&mnMiscSelectOne, _J("-1"));<br/><br/>					/*Multiply the open amounts in the F03B112P by a negative one,<br/>						as they are stored as negative numbers.*/<br/>					/*   MathMultiply(&lpDS-&gtmnAmountOpen, &mnMiscSelectOne, &dsF03B112P.rwaap);	*/<br/><br/>					MathMultiply(&lpDS-&gtmnAmountForeignOpen, &mnMiscSelectOne, &dsF03B112P.rwfap);<br/>					MathMultiply(&lpDS-&gtmnAmountGross, &mnMiscSelectOne, &dsF03B112P.rwaap);<br/>					MathAdd (&lpDS-&gtmnAmountOpen, &lpDS-&gtmnAmountGross, &mnTotalPAAP);<br/>					MathAdd (&lpDS-&gtmnAmountForeignOpen, &lpDS-&gtmnAmountCurrency, &mnTotalPFAP);      <br/><br/>				}<br/>			}<br/>   <br/>		}	/*End processing voided invoices*/<br/>   <br/>		/************************************************************************<br/>		 * Function Clean Up<br/>		 ************************************************************************/<br/><br/>		if (hRequestF03B14P != (HREQUEST) NULL)<br/>		{<br/>			JDB_CloseTable(hRequestF03B14P);<br/>		}<br/><br/>		if (hRequestF03B112P != (HREQUEST) NULL)<br/>		{<br/>			JDB_CloseTable(hRequestF03B112P);<br/>		}<br/><br/>	}	/* If the document type not equal to R1  */<br/><br/>	JDB_FreeBhvr(hUser);<br/><br/>	return (ER_SUCCESS);<br/>}<br/><br/>/* Internal function comment block */<br/>/**************************************************************************<br/> *   Function:  Ixxxxxxx_a   // Replace "xxxxxxx" with source file number<br/> *                           // and "a" with the function name<br/> *      Notes:<br/> *<br/> *    Returns:<br/> *<br/> * Parameters:<br/> **************************************************************************/<br/><br/></pre></div></div></body></html>