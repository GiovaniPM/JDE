<!DOCTYPE html><html lang = "en"><head><meta charset = "utf-8"><meta name = "viewport" content = "width=device-width, initial-scale=1"><title>JDE Object Browser HTML Extract</title>
<style type='text/css'>body,th{font-family: Courier New, Courier, mono;font-size: 12px; width:auto}
.section{font-family: Arial, Helvetica, sans-serif;font-size: 12px;font-weight: bold;border: thin groove #CC9966;width: 100%;padding-left: 5px;padding-top: 5px;padding-bottom: 5px; padding-right: 5px; box-sizing: border-box }
.objectheader {font-family: Arial, Helvetica, sans-serif;font-size: 12px;font-weight: bold;border: thin groove #CC9966;width:auto;background-color: #FFFFCC;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; box-sizing: border-box }
.details{font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;border: thin groove #CC9966;width:100%;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px;box-sizing: border-box }
.er {background-color: #FFFFFF;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal; border: thin solid #CCCCCC; width:auto; padding-left: 5px;padding-top: 5px;padding-bottom: 5px; padding-right: 5px; box-sizing: border-box }
.dstrmembers {background-color: #FFFDDD;font-family: Courier New, Courier, mono;font-size: 12px;border: thin groove #CC9966;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; box-sizing: border-box }
.disabled {font-family: Courier New, Courier, mono;font-size: 12px;	font-style: italic; color:#CC9933}
.parameters {font-family: Courier New, Courier, mono;font-size: 12px; color:#3333FF}
.comment {font-family: Courier New, Courier, mono;font-size: 12px;	color: #339933}
.subtable {font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;width:100%}
.lineno {color:#6E6E6E;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.iokey {color:#FF6905;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.logicline {color:#000000;font-family: Courier New, Courier, mono;font-size: 12px; font-weight: normal;}
.versionoverride {background-color: #FFCC99;}
.overrideflags{font-family: Arial, Helvetica, sans-serif;font-size: 11px;font-weight: normal;border: thin groove #CC9966;width:auto;padding-left: 5px;padding-top: 5px;padding-bottom: 5px;padding-right: 5px; background-color: #FFCC99; box-sizing: border-box }
.bsfnprops {font-family: Courier New, Courier, mono;font-size: 12px; color:#E01B4C}
.searchresult {font-family: Courier New, Courier, mono;font-size: 12px; font-weight: bold; background-color:#8BF3A0}
.expand {font-family: Courier New, Courier, mono;font-size: 11px; font-weight: bold; cursor:pointer; border: 1px solid gray; position: relative; left: -3px; display:inline; line-height:8px;}
.expand2 { display:inline; cursor:pointer; font-size: 9px; border: 1px solid gray; position: relative; left: -3px;}
</style>
<script type='text/javascript'>function load(){location.href = '#result';}</script>
<script language='JavaScript' type='text/javascript'>function ExpandCollapse(ElementId){ var ClickedElement = document.getElementById(ElementId); var SectionName = ElementId + ':hide'; var Section = document.getElementById(SectionName); if (ClickedElement.innerHTML == '-') { 	 ClickedElement.innerHTML = '+';	Section.style.display = 'none'; }  else  { 		ClickedElement.innerHTML = '-'; 	Section.style.display = 'inline';}} </script>
<base target = "_parent"></head><body onload='load()'>
<div class ='objectheader'>Business Function: N5701ZB - WS - Carga de Pedidos do Pre-Faturamento<BR>Function Type: NER</div><div class='section'>EVENTS<div class='objectheader'>NER: CargaPedidosPreFaturamentoBIF <BR>Event GUID: 4b4c037b-ffcb-432e-a815-7d2ae78dc081</div><div class='er'><div class='dstrmembers'><B>Data Structure: D5701ZB - WS - BIF FT - Tabela de Pedidos (F570116)                   </B><BR>BF szDataHora [DATETIME]<BR>BF mnSequencial [55SEQNCL]<BR>BF szChvBilling [CHVBIL]<BR>BF szCodEmpresa [CEMP]<BR>BF mnCodProduto [CODPRODU]<BR>BF szMesCompetencia [MSCP]<BR>BF szAnoCompetencia [ANCP]<BR>BF mnNroPedidoBilling [IA10]<BR>BF cCliAge [CLIAGE]<BR>BF mnCodAgencia [CMC1]<BR>BF mnCodRepresent [URAB]<BR>BF szCodCadastroOrigem [55CDCADO]<BR>BF jdDataInicialCompet [SVDB]<BR>BF jdDataFinalCompet [SVDE]<BR>BF mnVlrTotalBruto [VLRTOTBR]<BR>BF mnVlrTotalLiquido [VLRTOTLI]<BR>BF szCodTipoVenda [CODTPVEN]<BR>BF cCarteiraBanco [CARBAN]<BR>BF szNumeroBancario [AA15]<BR>BF jdDataVencimento [DDU]<BR>BF szCondPagto [PTC]<BR>BF szNrAutorizacao [NRAUTORI]<BR>BF cIndCarga [EV01]<BR>BF cIndBruLiq [BRULIQ]<BR>BF szCodOrigem [CODORIGE]<BR>BF szCentroCusto [MCU]<BR>BF mnCodVendedor [AN8R]<BR>BF szAutorizador [AUTORIZA]<BR>BF szContrato [CTRT]<BR>BF szParcelaProtesto [SFX]<BR>BF mnValorTabela [ANQT]<BR>BF cIndFatMinimo [FATMIN]<BR>BF cIndBasket [ACTAPP]<BR>BF cIndDesconto [EV02]<BR>BF szNomeAutorizador [AUTA]<BR>BF szTexto1 [DQ01]<BR>BF szTexto2 [DQ02]<BR>BF cInd1 [AA01]<BR>BF szMensagem [MGTX]<BR>BF cOperacao [C9TYTT]<BR>BF szStatus [LDCS]<BR>BF szUserId [USER]<BR>BF szWorkStationId [JOBN]<BR>BF szProgramId [PID]<BR>BF jdDateUpdated [UPMJ]<BR>BF mnTimeLastUpdated [UPMT]<BR>BF mnNrPedido [NRPEDIDO]<BR>BF mnQtdExemplares [QTDEXEM]<BR></div>----------------------------------------</BR>Event Level Variables</BR>----------------------------------------</BR>evt_Insere [EV01]<br>evt_VlrTotalLiquidoOriginal [VLRTOTLI]<br>evt_F570116_AN8 [AN8]<br>evt_F570112_DCT [DCT]<br>evt_NrPedido [NRPEDIDO]<br>evt_Company [CO]<br>evt_Automatica [AUTOMATI]<br>evt_ChvBilling [CHVBIL]<br>evt_RetemIRRF_SOLCALC [SOLCALC]<br>evt_CliAge [CLIAGE]<br>evt_BruLiq [BRULIQ]<br>evt_PercComissaoF570112 [PERCCOM]<br>evt_DiasPagto [DIASPAGT]<br>evt_CodTipoPeriodo [CODTPPER]<br>evt_ContabAberta_EV02 [EV02]<br>evt_AnoMesEntrada [ANMESENT]<br>evt_ConsisteEmail_EV14 [EV14]<br>evt_PrintOptions [PRTOP]<br>evt_NrPedidoBilling [NRPEDBIL]<br>evt_CodStatusBLQ [CODSTAT]<br>evt_AnoMesEntradaPedido [ANMESENT]<br>evt_AnoMesEntradaNOK [ANMESENT]<br>evt_CodStatus [CODSTAT]<br>evt_Midia [MIDIA]<br>evt_ProjetoMercado_EV03 [EV03]<br>evt_PercIRRF_FW05 [FW05]<br>evt_NovaRegraFat_EV02 [EV02]<br>evt_MinimoIRRF [MATH01]<br>evt_DataString [AA10]<br>evt_DataContabilidade [DGJ]<br>evt_CodErro [CODERRO]<br>evt_Aglutinador_A301 [A301]<br>evt_CodOrigem [CODORIGE]<br>evt_bRetornoValidaUDC [EV01]<br>evt_AddressNumberParent [PA8]<br>evt_AddressNumber [AN8]<br>evt_PessoaJurCliente [TAXC]<br>evt_CliAgeAux [CLIAGE]<br>evt_ReportCodeAddBook006 [AC06]<br>evt_ClienteSemRetencaoIR [EV01]<br>evt_ClienteOrigemString [AA07]<br>evt_CNPJCliente [TAX]<br>evt_PersonCorporationCode [TAXC]<br>evt_ArHoldInvoices [HDAR]<br>evt_FlagRetencao [EV01]<br>evt_EmpresaNumerica [AN8]<br>evt_CNPJEmpresa [TAX]<br>evt_CNPJEmpresa_8Dig [AA08]<br>evt_CNPJCliente_8Dig [AA08]<br>evt_BankTransitRecordType [BKTP]<br>evt_BankTransitNumberF0030 [TNST]<br>evt_LineNumberID [IDLN]<br>evt_EmailAddressow [EMAL]<br>evt_ElectronicAddressType [ETP]<br>evt_DelCredere_AC05 [AC05]<br>evt_CommissionCode1 [CMC1]<br>evt_AddressType1 [AT1]<br>evt_PercComissao [PERCCOM]<br>evt_CiaExcecao [EV01]<br>evt_CFOP [BRCFOP]<br>evt_CodFormPagto [CDFRMPGT]<br>evt_DataHoje [DGJ]<br>evt_DataEmissao [DATAEMIS]<br>evt_DataVencimento [DATAVENC]<br>evt_NetDaysToPay [NDTP]<br>evt_ProxDateMonth [PXDM]<br>evt_DataFutura [DGJ]<br>evt_DataVencimentoAux [DATAVENC]<br>evt_ValorTotalProdutos [VLRTOTBR]<br>evt_NrPublicacoesF5711ZB [NRPUBLI]<br>evt_CentroCusto_AA07 [AA07]<br>evt_ValorProduto [VLRTOTBR]<br>evt_SubledgerF5711ZB [SBL]<br>evt_CompanyMCU [CO]<br>evt_DateUpdated [UPMJ]<br>evt_TimeLastUpdated [UPMT]<br>evt_NrAutoriza [NRAUTORI]<br>evt_NrCartaoCredito [NRCCRED]<br>evt_AlphaSpecData08 [AA08]<br>evt_AnoMesInicio [AA06]<br>evt_AnoMesFim [AA06]<br>evt_VlrComissao [VLRCOMIS]<br>evt_ZeraValores [EV01]<br>evt_Basket_EV01 [EV01]<br>evt_Desconto_EV02 [EV02]<br>evt_ValorBasket_AA [AA]<br>evt_Basket_DL02 [DL02]<br>evt_Desconto_SPHD [SPHD]<br>evt_CalculaIRRF [EV01]<br>evt_ValorIRRFPedido [AA]<br>evt_AcumulaIRRF_F570152 [AA]<br>evt_ValorIRRF_F570152 [AA]<br>evt_ProdutoDetalhe [NRPUBLI]<br>evt_Subledger [SBL]<br>evt_CompanyProdDetalhe [CO]<br>evt_SubledgerType [SBLT]<br>evt_CostCenter [MCU]<br>evt_UserId [USER]<br>evt_ValorTabelaRateio [ANQT]<br>evt_ValorDiferenca [VLRTOTBR]<br>evt_NrPublicacoesUpdate [NRPUBLI]<br>evt_SubledgerUpdate [SBL]<br>evt_DiaPublicacao [DIAPUB]<br>evt_ProgramId [PID]<br>evt_WorkStationId [JOBN]<br>evt_DataCriacao [DATACRI]<br>evt_mnUm [NRPREST]<br>evt_mnZero [NRPREST]<br>evt_Cobertura [COBERTU]<br>evt_Contrato_CTRT [CTRT]<br>evt_UDC_SY [SY]<br>evt_UDC_RT [RT]<br>evt_UDC_CodProduto_KY [KY]<br>evt_ValorTotalPedidos [VLRTOTBR]<br>evt_QtdDiasTotal [IA08]<br>evt_QtdDiasMes [IA08]<br>evt_PrimeiroDiaMes [DGJ]<br>evt_UltimoDiaMes [DGJ]<br>evt_AnoMesEntradaRateio [ANMESENT]<br>evt_ValorProdRateio [VLRTOTBR]<br>evt_VlrTotalLiquidoF5701ZB [VLRTOTLI]<br>evt_VlrProdutosBruto [VLRTOTBR]<br>evt_VlrTotalBrutoAcum [VLRTOTBR]<br>evt_AnoMesEntradaUpdate [ANMESENT]<br>evt_NrPedidoUpdate [NRPEDIDO]<br>evt_VlrTotalBrutoF570116 [VLRTOTBR]<br>evt_VlrTotalBrutoUpdate [VLRTOTBR]<br>evt_DiferencaBruto [VLRTOTBR]<br>evt_VlrTotalLiquidoAcumF570116 [VLRTOTLI]<br>evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR]<br>evt_Atualizar [EV01]<br>evt_mnNumAux [IA07]<br>evt_Mensal_N [MENSAL]<br>evt_TimeLastUpdAux [UPMT]<br>evt_szStringAux [AA10]<br>evt_ProductCode [SY]<br>evt_UserDefinedCodes [RT]<br>evt_ChvBil_AA10 [AA10]<br>evt_BillingExcecao [EV01]<br>evt_EmailString [AA06]<br>evt_TemEmail [EV01]<br>----------------------------------------</BR><span class='comment'>  //</span><span class='comment'><br>  // Carga de Pedidos do Pré-Faturamento - Gravação BIF</span><span class='comment'><br>  // Baseada na ube R5701011V referente a Carga dos Pedidos do CRM</span><span class='comment'><br>  //</span><span class='comment'><br>  // Inicializações</span><span class='comment'><br>  //</span><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:7' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:7:hide' style='display: inline;'><span class='parameters'><br>       VA evt_UserId [USER] &#60;- szUserName [USER]<br>       VA evt_DateUpdated [UPMJ] &#60;- jdDate [DTE]<br>       VA evt_TimeLastUpdated [UPMT] &#60;- mnTime [TME0]<br>       VA evt_WorkStationId [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><span class='comment'><br>  //</span><br>  VA evt_ProgramId [PID] = "N5701ZB"<br>  VA evt_DataCriacao [DATACRI] = date_today()<br>  VA evt_Mensal_N [MENSAL] = "N"<br>  VA evt_Atualizar [EV01] = "N"<br>  VA evt_Cobertura [COBERTU] = "LOC"<span class='comment'><br>  //</span><br>  VA evt_Insere [EV01] = "S"<br>  VA evt_VlrTotalLiquidoOriginal [VLRTOTLI] = BF mnVlrTotalLiquido [VLRTOTLI]<span class='comment'><br>  //</span><br>  VA evt_F570116_AN8 [AN8] = "0"<br>  VA evt_F570112_DCT [DCT] = &#60;Blank&#62;<br>  VA evt_NrPedido [NRPEDIDO] = "0"<span class='comment'><br>  //</span><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:22' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:22:hide' style='display: inline;'><br>       <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>       VA evt_Company [CO] &#60;- TK Company [CO]<br>       VA evt_Automatica [AUTOMATI] &#60;- TK Automática [AUTOMATI]<br>       VA evt_ChvBilling [CHVBIL] &#60;- TK Chave no Billing [CHVBIL]<br>       VA evt_RetemIRRF_SOLCALC [SOLCALC] &#60;- TK Solicitação de Alçadas [SOLCALC]<br>       VA evt_CliAge [CLIAGE] &#60;- TK Identificador de Cliente ou Agência [CLIAGE]<br>       VA evt_BruLiq [BRULIQ] &#60;- TK Identificador de Bruto ou Líquido [BRULIQ]<br>       VA evt_PercComissaoF570112 [PERCCOM] &#60;- TK Percentual de Comissão [PERCCOM]<br>       VA evt_DiasPagto [DIASPAGT] &#60;- TK Quantidade de dias para pagamento [DIASPAGT]<br>       VA evt_CodTipoPeriodo [CODTPPER] &#60;- TK Código do tipo do Período [CODTPPER]<br>       VA evt_ContabAberta_EV02 [EV02] &#60;- TK J.D. EnterpriseOne Event Point 02 [EV02]<br>       VA evt_F570112_DCT [DCT] &#60;- TK Document Type [DCT]<br>       VA evt_AnoMesEntrada [ANMESENT] &#60;- TK Ano/mês de Emissão [ANMEEMI]<br>       VA evt_ConsisteEmail_EV14 [EV14] &#60;- TK EnterpriseOne Event Point 14 [EV14]<br>       VA evt_PrintOptions [PRTOP] &#60;- TK Print Options [PRTOP]</div><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:23' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:23:hide' style='display: inline;'><span class='comment'><br>       // Seta erro 001 que é verificado após testar se o pedido está Bloqueado</span><span class='comment'><br>       // ATENÇÃO: essa variável não deve ser alterada até lá</span><br>       VA evt_CodErro [CODERRO] = "001"<span class='comment'><br>       //</span><br>       VA evt_Insere [EV01] = "N"<br>       VA evt_F570112_DCT [DCT] = &#60;Blank&#62;</div><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:30' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:30:hide' style='display: inline;'><br>       VA evt_CodErro [CODERRO] = &#60;Blank&#62;</div><br>  End If<span class='comment'><br>  // Pedido no Billing bloquedo no JDE</span><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:34' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertNumericToString(B0000045.ConvertNumericToString)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:34:hide' style='display: inline;'><span class='parameters'><br>       BF mnNroPedidoBilling [IA10] -&#62; mnMathNumeric01 [MATH01]<br>       VA evt_NrPedidoBilling [NRPEDBIL] &#60;- szVideoConstant30A [VC30A]</span></div><br>  VA evt_CodStatusBLQ [CODSTAT] = "BLQ"<br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:36' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:36:hide' style='display: inline;'><br>       <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>       <span class='iokey'>VA evt_AnoMesEntrada [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>       <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span><br>       <span class='iokey'>VA evt_CodStatusBLQ [CODSTAT] = TK Código de Status [CODSTAT]</span></div><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:37' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:37:hide' style='display: inline;'><br>       VA evt_CodStatusBLQ [CODSTAT] &#60;- TK Código de Status [CODSTAT]</div><br> <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:38' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>  And BF cIndCarga [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:38:hide' style='display: inline;'><br>       VA evt_szStringAux [AA10] = "*"<br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:40' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szAnoCompetencia [ANCP] is equal to VA evt_szStringAux [AA10]<br>       And BF szMesCompetencia [MSCP] is equal to VA evt_szStringAux [AA10]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:40:hide' style='display: inline;'><br>            VA evt_szStringAux [AA10] = [VA evt_AnoMesEntrada [ANMESENT]]<br>            BF szAnoCompetencia [ANCP] = substr([VA evt_szStringAux [AA10]], "0", "4")<br>            BF szMesCompetencia [MSCP] = substr([VA evt_szStringAux [AA10]], "4", "2")</div><br>       End If<span class='comment'><br>       // Ano Mês Entrada Informado no Pedido</span><br>       VA evt_AnoMesEntradaPedido [ANMESENT] = [BF szAnoCompetencia [ANCP]]<br>       VA evt_AnoMesEntradaPedido [ANMESENT] = [VA evt_AnoMesEntradaPedido [ANMESENT]]*100<br>       VA evt_AnoMesEntradaPedido [ANMESENT] = [VA evt_AnoMesEntradaPedido [ANMESENT]]+[BF szMesCompetencia [MSCP]]<br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:49' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:49:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>            <span class='iokey'>VA evt_AnoMesEntradaPedido [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>            <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span></div><br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:50' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:50:hide' style='display: inline;'><br>            VA evt_AnoMesEntradaNOK [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>            VA evt_NrPedido [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>            VA evt_CodStatus [CODSTAT] &#60;- TK Código de Status [CODSTAT]</div><br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:51' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:51:hide' style='display: inline;'><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:52' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodStatus [CODSTAT] is equal to ("NFT","NOK","OK","PFT")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:52:hide' style='display: inline;'><span class='comment'><br>                 // Limpa cargas anteriores</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:54' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570109.Delete  [Index 1: Untitled]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:54:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:55' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Delete  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:55:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_AnoMesEntradaNOK [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:56' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570113.Delete  [Index 2: CodProd, NrPed, DiaPub]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:56:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:57' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570120.Delete  [Index 1: CodProduto,NrPedido,AnoMesEnt]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:57:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span><br>                      <span class='iokey'>VA evt_AnoMesEntradaNOK [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:58' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Delete  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:58:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:59' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701011.Delete  [Index 1: CodProdu,AnMesEnt,NrPedido]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:59:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_AnoMesEntradaNOK [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:60' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570364.Delete  [Index 1: Indice]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:60:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_AnoMesEntradaNOK [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                      <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:61' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:61:hide' style='display: inline;'><span class='comment'><br>                 // Se FAT, mantem o pedido anterior e não insere esse</span><br>                 VA evt_Insere [EV01] = "N"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:65' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:65:hide' style='display: inline;'><br>                 VA evt_AnoMesEntradaNOK [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>                 VA evt_NrPedido [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>                 VA evt_CodStatus [CODSTAT] &#60;- TK Código de Status [CODSTAT]</div></div><br>       End While<br>       VA evt_Midia [MIDIA] = "RBS"<br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:68' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570500.FetchSingle  [Index 1: Midia]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:68:hide' style='display: inline;'><br>            <span class='iokey'>VA evt_Midia [MIDIA] = TK Mídia [MIDIA]</span><br>            VA evt_PercIRRF_FW05 [FW05] &#60;- TK Factor Weight % 5 [FW05]<br>            VA evt_NovaRegraFat_EV02 [EV02] &#60;- TK J.D. EnterpriseOne Event Point 02 [EV02]<br>            VA evt_ProjetoMercado_EV03 [EV03] &#60;- TK J.D. EnterpriseOne Point 03 [EV03]<br>            VA evt_MinimoIRRF [MATH01] &#60;- TK Math Numeric 01 [MATH01]</div><br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:69' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is not equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:69:hide' style='display: inline;'><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:70' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_AnoMesEntradaPedido [ANMESENT] is greater than VA evt_AnoMesEntrada [ANMESENT]<br>            And BF szCondPagto [PTC] is not equal to "NFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:70:hide' style='display: inline;'><br>                 VA evt_Insere [EV01] = "N"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:73' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataInicialCompet [SVDB] is greater than SL DateToday<br>            And BF szCondPagto [PTC] is not equal to "NFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:73:hide' style='display: inline;'><br>                 VA evt_Insere [EV01] = "N"</div><br>            End If</div><br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:76' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:76:hide' style='display: inline;'><span class='comment'><br>            // Projeto Mercado</span><span class='comment'><br>            // a informação de não faturamento passa a vir em campo próprio</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:79' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_AnoMesEntradaPedido [ANMESENT] is greater than VA evt_AnoMesEntrada [ANMESENT]<br>            And BF cIndFatMinimo [FATMIN] is not equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:79:hide' style='display: inline;'><br>                 VA evt_Insere [EV01] = "N"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:82' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataInicialCompet [SVDB] is greater than SL DateToday<br>            And BF cIndFatMinimo [FATMIN] is not equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:82:hide' style='display: inline;'><br>                 VA evt_Insere [EV01] = "N"</div><br>            End If</div><br>       End If<span class='comment'><br>       // 679132 - Sue Helen - Considerações para pedidos NFT</span><br>      <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:87' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Insere [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:87:hide' style='display: inline;'><span class='comment'><br>            // Carrega a Data Contábil</span><br>            VA evt_DataString [AA10] = [VA evt_AnoMesEntrada [ANMESENT]]<br>            VA evt_DataString [AA10] = concat(substr([VA evt_DataString [AA10]], "4", "2"), concat("/01/", substr([VA evt_DataString [AA10]], "0", "4")))<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:91' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertStringToDate(B0800013.ConvertStringToDate)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:91:hide' style='display: inline;'><span class='parameters'><br>                 VA evt_DataContabilidade [DGJ] &#60;- jdDateConvertedDate [DRQJ]<br>                 VA evt_DataString [AA10] -&#62; szStringToConvert [VC10A]</span></div><br>            VA evt_DataContabilidade [DGJ] = last_day([VA evt_DataContabilidade [DGJ]])<span class='comment'><br>            // Carrega o NrPedido ( Next Number 57 / 2 )</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:94' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>X0010GetNextNumber(X0010.X0010GetNextNumber)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:94:hide' style='display: inline;'><span class='parameters'><br>                 "57" -&#62; szSystemCode [SY]<br>                 "2" -&#62; mnNextNumberingIndexNo [NNIX]<br>                 VA evt_NrPedido [NRPEDIDO] &#60;- mnNextNumber001 [N001]</span></div><br>            BF mnNrPedido [NRPEDIDO] = VA evt_NrPedido [NRPEDIDO]<span class='comment'><br>            // Consistência Produto</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:97' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodErro [CODERRO] is equal to "001"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:97:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:98' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:98:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:100' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:100:hide' style='display: inline;'><span class='comment'><br>                 // Projeto Mercado</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:102' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is not equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:102:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:103' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to "NFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:103:hide' style='display: inline;'><br>                           VA evt_CodStatus [CODSTAT] = "NFT"</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:105' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:105:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:106' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Automatica [AUTOMATI] is equal to "S"<br>                           Or BF szCodTipoVenda [CODTPVEN] is equal to ("D","R","V")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:106:hide' style='display: inline;'><br>                                VA evt_CodStatus [CODSTAT] = "PFT"</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:108' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:108:hide' style='display: inline;'><br>                                VA evt_CodStatus [CODSTAT] = "OK"</div><br>                           End If</div><br>                      End If</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:112' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:112:hide' style='display: inline;'><span class='comment'><br>                      // Basket sem Faturamento</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:114' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:114:hide' style='display: inline;'><br>                           VA evt_CodStatus [CODSTAT] = "NFT"</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:116' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:116:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:117' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Automatica [AUTOMATI] is equal to "S"<br>                           Or BF szCodTipoVenda [CODTPVEN] is equal to ("D","R","V")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:117:hide' style='display: inline;'><br>                                VA evt_CodStatus [CODSTAT] = "PFT"</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:119' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:119:hide' style='display: inline;'><br>                                VA evt_CodStatus [CODSTAT] = "OK"</div><br>                           End If</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            // Considerações para pedidos NFT</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:126' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_AnoMesEntradaPedido [ANMESENT] is not equal to VA evt_AnoMesEntrada [ANMESENT]<br>            And VA evt_CodStatus [CODSTAT] is not equal to "NFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:126:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "002"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:128' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:128:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:131' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnVlrTotalBruto [VLRTOTBR] is equal to "0"<br>            Or BF mnVlrTotalLiquido [VLRTOTLI] is equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:131:hide' style='display: inline;'><br>                 VA evt_CodStatus [CODSTAT] = "NFT"</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Consistência Origem</span><br>            VA evt_Aglutinador_A301 [A301] = &#60;Blank&#62;<br>            VA evt_CodOrigem [CODORIGE] = BF szCodOrigem [CODORIGE]<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:138' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUpdateUDCDescription(B4002070.GetUpdateUDCDescription)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:138:hide' style='display: inline;'><span class='parameters'><br>                 "R" -&#62; cMode [MODE]<br>                 "01" -&#62; szSystemCode [SY]<br>                 "03" -&#62; szUserDefinedCodes [RT]<br>                 "3" -&#62; mnCodeLength [CDL]<br>                 VA evt_bRetornoValidaUDC [EV01] &#60;- cErrorCode [ERRC]<br>                 "1" -&#62; cSuppressErrorMessage [EV01]<br>                 VA evt_CodOrigem [CODORIGE] -&#62; szUDCCode [KY]</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:139' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_bRetornoValidaUDC [EV01] is not equal to "0"<br>            Or VA evt_CodOrigem [CODORIGE] is less than or equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:139:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "016"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:141' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:141:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:143' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:143:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:144' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:144:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:145' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570184.FetchSingle  [Index 1: Chave1]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:145:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_CodOrigem [CODORIGE] = TK Código de Origem [CODORIGE]</span><br>                           VA evt_Aglutinador_A301 [A301] &#60;- TK Generic String 01 [A301]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:146' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:146:hide' style='display: inline;'><br>                           VA evt_Aglutinador_A301 [A301] = &#60;Blank&#62;</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Consistência Tipo de Venda</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:153' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "B"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:153:hide' style='display: inline;'><br>                 BF szCodTipoVenda [CODTPVEN] = "P"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:155' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:155:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:156' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "C"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:156:hide' style='display: inline;'><br>                      BF szCodTipoVenda [CODTPVEN] = "R"</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:158' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:158:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:159' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is not equal to("D","P","R")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:159:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "011"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:161' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:161:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If</div><br>                 End If</div><br>            End If<br>            VA evt_AddressNumberParent [PA8] = "0"<br>            VA evt_AddressNumber [AN8] = "0"<br>            VA evt_PessoaJurCliente [TAXC] = &#60;Blank&#62;<span class='comment'><br>            // Consistência Cliente</span><br>            VA evt_CliAgeAux [CLIAGE] = "C"<br>            VA evt_ReportCodeAddBook006 [AC06] = &#60;Blank&#62;<br>            VA evt_ClienteSemRetencaoIR [EV01] = "N"<br>            BF szCodCadastroOrigem [55CDCADO] = ltrim([BF szCodCadastroOrigem [55CDCADO]], &#60;Blank&#62;)<br>            BF szCodCadastroOrigem [55CDCADO] = rtrim([BF szCodCadastroOrigem [55CDCADO]], &#60;Blank&#62;)<br>            VA evt_ClienteOrigemString [AA07] = lpad([BF szCodCadastroOrigem [55CDCADO]], "0", "7")<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:176' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F550106.FetchSingle  [Index 1: Indice]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:176:hide' style='display: inline;'><br>                 <span class='iokey'>VA evt_ChvBilling [CHVBIL] = TK Alpha Spec. Data 02 [AA02]</span><br>                 <span class='iokey'>VA evt_ClienteOrigemString [AA07] = TK Alpha Spec. Data 07 [AA07]</span><br>                 <span class='iokey'>VA evt_CliAgeAux [CLIAGE] = TK Alpha Spec. Data 01 [AA01]</span><br>                 VA evt_AddressNumber [AN8] &#60;- TK Address Number [AN8]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:177' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:177:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "003"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:179' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:179:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:181' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:181:hide' style='display: inline;'><span class='comment'><br>                 // Lê o Cliente</span><br>                 VA evt_DelCredere_AC05 [AC05] = &#60;Blank&#62;<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:184' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:184:hide' style='display: inline;'><br>                      <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span><br>                      VA evt_CNPJCliente [TAX] &#60;- TK Tax ID [TAX]<br>                      VA evt_PersonCorporationCode [TAXC] &#60;- TK Person/Corporation Code [TAXC]<br>                      VA evt_DelCredere_AC05 [AC05] &#60;- TK Category Code - Address Book 05 [AC05]<br>                      VA evt_ReportCodeAddBook006 [AC06] &#60;- TK Category Code - Address Book 06 [AC06]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:185' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:185:hide' style='display: inline;'><br>                      VA evt_CodErro [CODERRO] = "003"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:187' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:187:hide' style='display: inline;'><span class='parameters'><br>                           BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                           VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                      VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:189' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:189:hide' style='display: inline;'><span class='comment'><br>                      // Lê o pai, sobrescrevendo o AC05 e AC06 do Cliente</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:191' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0150.FetchSingle  [Index 4: Address Number]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:191:hide' style='display: inline;'><br>                           VA evt_AddressNumberParent [PA8] &#60;- TK Address Number - Parent [PA8]<br>                           <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:192' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:192:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:193' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:193:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_AddressNumberParent [PA8] = TK Address Number [AN8]</span><br>                                VA evt_DelCredere_AC05 [AC05] &#60;- TK Category Code - Address Book 05 [AC05]<br>                                VA evt_ReportCodeAddBook006 [AC06] &#60;- TK Category Code - Address Book 06 [AC06]</div></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:194' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:194:hide' style='display: inline;'><br>                           VA evt_AddressNumberParent [PA8] = VA evt_AddressNumber [AN8]</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:197' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_PersonCorporationCode [TAXC] is equal to "2"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:197:hide' style='display: inline;'><br>                           VA evt_PessoaJurCliente [TAXC] = "2"<br>                           VA evt_ArHoldInvoices [HDAR] = &#60;Blank&#62;<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:200' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F03012.FetchSingle  [Index 1: ADDRESS_COMPANY]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:200:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span><br>                                VA evt_ArHoldInvoices [HDAR] &#60;- TK Hold Invoices [HDAR]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:201' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<br>                           And VA evt_ArHoldInvoices [HDAR] is equal to "Y"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:201:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "035"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:203' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:203:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:206' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701018.FetchSingle  [Index 1: CNPJ]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:206:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_CNPJCliente [TAX] = TK Tax ID [TAX]</span><br>                                VA evt_FlagRetencao [EV01] &#60;- TK J.D. EnterpriseOne Event Point 01 [EV01]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:207' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<br>                           And VA evt_FlagRetencao [EV01] is equal to ("I","T")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:207:hide' style='display: inline;'><br>                                VA evt_ClienteSemRetencaoIR [EV01] = "S"</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      // Consistência Auto Faturamento</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:212' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertStringToMathNumeric(B0000580.ConvertStringToMathNumeric)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:212:hide' style='display: inline;'><span class='parameters'><br>                           VA evt_Company [CO] -&#62; szInputString [AA15]<br>                           VA evt_EmpresaNumerica [AN8] &#60;- mnOutputMathNumeric [MATH01]</span></div><span class='comment'><br>                      // Lê a Cia</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:214' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:214:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_EmpresaNumerica [AN8] = TK Address Number [AN8]</span><br>                           VA evt_CNPJEmpresa [TAX] &#60;- TK Tax ID [TAX]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:215' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:215:hide' style='display: inline;'><br>                           VA evt_CNPJEmpresa_8Dig [AA08] = substr([VA evt_CNPJEmpresa [TAX]], "0", "8")<br>                           VA evt_CNPJCliente_8Dig [AA08] = substr([VA evt_CNPJCliente [TAX]], "0", "8")<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:218' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CNPJCliente_8Dig [AA08] is equal to VA evt_CNPJEmpresa_8Dig [AA08]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:218:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "039"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:220' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:220:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      //</span><span class='comment'><br>                      // Consistência Cadastro Conta Bancária</span><br>                      VA evt_BankTransitRecordType [BKTP] = "C"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:227' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "D"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:227:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:228' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.Select  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:228:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_BankTransitRecordType [BKTP] = TK Record Type - Bank Transit [BKTP]</span><br>                                <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:229' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.FetchNext  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:229:hide' style='display: inline;'><br>                                VA evt_BankTransitNumberF0030 [TNST] &#60;- TK Transit Number - Bank [TNST]</div><span class='comment'><br>                           // Passar a fazer um like na Agência e Conta Bancária</span><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:231' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:231:hide' style='display: inline;'><br>                                VA evt_BankTransitNumberF0030 [TNST] = concat("%", concat(substr([VA evt_BankTransitNumberF0030 [TNST]], "0", "9"), "%"))<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:233' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F550101.FetchSingle  [Index 1: BancoAgencia]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:233:hide' style='display: inline;'><br>                                     <span class='iokey'>VA evt_BankTransitNumberF0030 [TNST] Is Like TK Transit Number - Bank [TNST]</span></div><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:234' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:234:hide' style='display: inline;'><br>                                     VA evt_CodErro [CODERRO] = "045"<br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:236' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:236:hide' style='display: inline;'><span class='parameters'><br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                          VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                     VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                End If</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:239' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:239:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "045"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:241' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:241:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      // Consistência de Email</span><br>                      VA evt_LineNumberID [IDLN] = 0<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:247' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_F570112_DCT [DCT] is equal to ("EM","NW")<br>                      Or VA evt_ConsisteEmail_EV14 [EV14] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:247:hide' style='display: inline;'><br>                           VA evt_EmailAddressow [EMAL] = &#60;Blank&#62;<br>                           VA evt_ElectronicAddressType [ETP] = "E"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:250' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F01151.Select  [Index 3: Add #, Line #, E Add Type]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:250:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span><br>                                <span class='iokey'>VA evt_LineNumberID [IDLN] = TK Who's Who Line Number - ID [IDLN]</span><br>                                <span class='iokey'>VA evt_ElectronicAddressType [ETP] = TK Electronic Address Type [ETP]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:251' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F01151.FetchNext  [Index 3: Add #, Line #, E Add Type]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:251:hide' style='display: inline;'><br>                                VA evt_EmailAddressow [EMAL] &#60;- TK Electronic Address [EMAL]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:252' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:252:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "056"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:254' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:254:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:256' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:256:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:257' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:257:hide' style='display: inline;'><br>                                     VA evt_CodErro [CODERRO] = "056"<br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:259' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:259:hide' style='display: inline;'><span class='parameters'><br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                          VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                     VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                End If</div><br>                           End If</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Consistência Cadastro Conta Cartão</span><br>            VA evt_BankTransitRecordType [BKTP] = "D"<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:269' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "R"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:269:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:270' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.Select  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:270:hide' style='display: inline;'><br>                      <span class='iokey'>VA evt_BankTransitRecordType [BKTP] = TK Record Type - Bank Transit [BKTP]</span><br>                      <span class='iokey'>VA evt_AddressNumber [AN8] = TK Address Number [AN8]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:271' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.FetchNext  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:271:hide' style='display: inline;'><br>                      VA evt_BankTransitNumberF0030 [TNST] &#60;- TK Transit Number - Bank [TNST]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:272' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:272:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:273' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.Select  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:273:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_BankTransitRecordType [BKTP] = TK Record Type - Bank Transit [BKTP]</span><br>                           <span class='iokey'>VA evt_AddressNumberParent [PA8] = TK Address Number [AN8]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:274' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0030.FetchNext  [Index 5: Address Number,Record Type,+]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:274:hide' style='display: inline;'><br>                           VA evt_BankTransitNumberF0030 [TNST] &#60;- TK Transit Number - Bank [TNST]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:275' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:275:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "045"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:277' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:277:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><br>            VA evt_CommissionCode1 [CMC1] = 0<br>            VA evt_AddressType1 [AT1] = &#60;Blank&#62;<br>            VA evt_DelCredere_AC05 [AC05] = &#60;Blank&#62;<br>            VA evt_PersonCorporationCode [TAXC] = &#60;Blank&#62;<span class='comment'><br>            // Consistência Agência</span><br>            VA evt_PercComissao [PERCCOM] = 0<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:289' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is greater than "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:289:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:290' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is equal to "99999999"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:290:hide' style='display: inline;'><br>                      BF mnCodAgencia [CMC1] = 0</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:292' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:292:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:293' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:293:hide' style='display: inline;'><br>                           <span class='iokey'>BF mnCodAgencia [CMC1] = TK Address Number [AN8]</span><br>                           VA evt_AddressType1 [AT1] &#60;- TK Search Type [AT1]<br>                           VA evt_PersonCorporationCode [TAXC] &#60;- TK Person/Corporation Code [TAXC]<br>                           VA evt_DelCredere_AC05 [AC05] &#60;- TK Category Code - Address Book 05 [AC05]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:294' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                      Or VA evt_AddressType1 [AT1] is not equal to("E","V")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:294:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "018"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:296' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:296:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:298' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:298:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:299' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_AddressType1 [AT1] is equal to "V"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:299:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:300' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5501007.FetchSingle  [Index 1: Untitled]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:300:hide' style='display: inline;'><br>                                     <span class='iokey'>BF mnCodAgencia [CMC1] = TK Address Number [AN8]</span><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     VA evt_PercComissao [PERCCOM] &#60;- TK Annual Percentage Rate [ANPR]</div><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:301' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                                Or VA evt_PercComissao [PERCCOM] is equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:301:hide' style='display: inline;'><br>                                     VA evt_PercComissao [PERCCOM] = VA evt_PercComissaoF570112 [PERCCOM]</div><br>                                End If</div><br>                           End If</div><br>                      End If</div><br>                 End If</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:308' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndBruLiq [BRULIQ] is equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:308:hide' style='display: inline;'><br>                 VA evt_BruLiq [BRULIQ] = "L"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:310' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:310:hide' style='display: inline;'><br>                 VA evt_BruLiq [BRULIQ] = "B"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:313' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is not equal to("A","C")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:313:hide' style='display: inline;'><br>                 BF cCliAge [CLIAGE] = "C"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:316' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is equal to "A"<br>            And BF mnCodAgencia [CMC1] is equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:316:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "017"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:318' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:318:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:321' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUpdateUDCDescription(B4002070.GetUpdateUDCDescription)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:321:hide' style='display: inline;'><span class='parameters'><br>                 "R" -&#62; cMode [MODE]<br>                 "57" -&#62; szSystemCode [SY]<br>                 "HI" -&#62; szUserDefinedCodes [RT]<br>                 "5" -&#62; mnCodeLength [CDL]<br>                 VA evt_bRetornoValidaUDC [EV01] &#60;- cErrorCode [ERRC]<br>                 "1" -&#62; cSuppressErrorMessage [EV01]<br>                 VA evt_Company [CO] -&#62; szUDCCode [KY]</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:322' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_bRetornoValidaUDC [EV01] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:322:hide' style='display: inline;'><br>                 VA evt_CiaExcecao [EV01] = "N"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:324' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:324:hide' style='display: inline;'><br>                 VA evt_CiaExcecao [EV01] = "S"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:327' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_NovaRegraFat_EV02 [EV02] is equal to "S"<br>            And VA evt_CiaExcecao [EV01] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:327:hide' style='display: inline;'><span class='comment'><br>                 // Mudança Regras do Faturamento</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:329' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is greater than "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:329:hide' style='display: inline;'><span class='comment'><br>                      // Com agente ou agência</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:331' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_PersonCorporationCode [TAXC] is equal to "2"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:331:hide' style='display: inline;'><span class='comment'><br>                           // Pessoa Jurídica</span><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:333' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DelCredere_AC05 [AC05] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:333:hide' style='display: inline;'><span class='comment'><br>                                // Com agência com Del Credere</span><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:335' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is not equal to "A"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:335:hide' style='display: inline;'><br>                                     VA evt_CodErro [CODERRO] = "055"<br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:337' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:337:hide' style='display: inline;'><span class='parameters'><br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                          VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                     VA evt_CodStatus [CODSTAT] = "ERR"</div><br>                                End If<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:340' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:340:hide' style='display: inline;'><br>                                     VA evt_CodErro [CODERRO] = "050"<br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:342' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:342:hide' style='display: inline;'><span class='parameters'><br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                          VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                     VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                End If</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:345' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:345:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:346' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DelCredere_AC05 [AC05] is equal to "N"<br>                                Or VA evt_DelCredere_AC05 [AC05] is equal to &#60;Blank&#62;<br>                                Or VA evt_DelCredere_AC05 [AC05] is equal to &#60;NULL&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:346:hide' style='display: inline;'><span class='comment'><br>                                     // Com agência sem Del Credere</span><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:348' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DelCredere_AC05 [AC05] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:348:hide' style='display: inline;'><br>                                         <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:349' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is not equal to "A"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:349:hide' style='display: inline;'><br>                                               VA evt_CodErro [CODERRO] = "055"<br>                                              <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:351' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:351:hide' style='display: inline;'><span class='parameters'><br>                                                    BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                                    VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                                    VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                               VA evt_CodStatus [CODSTAT] = "ERR"</div><br>                                          End If<br>                                         <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:354' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:354:hide' style='display: inline;'><br>                                               VA evt_CodErro [CODERRO] = "050"<br>                                              <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:356' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:356:hide' style='display: inline;'><span class='parameters'><br>                                                    BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                                    VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                                    VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                               VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                          End If</div><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:359' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:359:hide' style='display: inline;'><br>                                         <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:360' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "L"<br>                                          Or BF cCliAge [CLIAGE] is not equal to "C"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:360:hide' style='display: inline;'><br>                                               VA evt_CodErro [CODERRO] = "054"<br>                                              <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:362' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:362:hide' style='display: inline;'><span class='parameters'><br>                                                    BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                                    VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                                    VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                               VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                          End If</div><br>                                     End If</div><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:366' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:366:hide' style='display: inline;'><span class='comment'><br>                                     // Posto de venda ou exceção</span><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:368' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "B"<br>                                     Or BF cCliAge [CLIAGE] is not equal to "C"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:368:hide' style='display: inline;'><br>                                          VA evt_CodErro [CODERRO] = "051"<br>                                         <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:370' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:370:hide' style='display: inline;'><span class='parameters'><br>                                               BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                               VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                               VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                          VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                     End If</div><br>                                End If</div><br>                           End If</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:375' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:375:hide' style='display: inline;'><span class='comment'><br>                           // Autônomo</span><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:377' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "B"<br>                           Or BF cCliAge [CLIAGE] is not equal to "C"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:377:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "052"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:379' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:379:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                           End If</div><br>                      End If</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:383' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:383:hide' style='display: inline;'><span class='comment'><br>                      // sem Agente</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:385' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is not equal to "B"<br>                      Or BF cCliAge [CLIAGE] is not equal to "C"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:385:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "053"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:387' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:387:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            // Consistência Representante</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:393' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodRepresent [URAB] is greater than "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:393:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:394' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:394:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodRepresent [URAB] = TK Address Number [AN8]</span><br>                      VA evt_AddressType1 [AT1] &#60;- TK Search Type [AT1]<br>                      VA evt_PersonCorporationCode [TAXC] &#60;- TK Person/Corporation Code [TAXC]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:395' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                 Or VA evt_AddressType1 [AT1] is not equal to "V"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:395:hide' style='display: inline;'><br>                      VA evt_CodErro [CODERRO] = "006"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:397' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:397:hide' style='display: inline;'><span class='parameters'><br>                           BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                           VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                      VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                 End If</div><br>            End If<span class='comment'><br>            // Consistência CFOP</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:402' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701016.Select  [Index 1: Codprodu,Cfops]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:402:hide' style='display: inline;'><br>                 <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:403' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701016.FetchNext  [Index 1: Codprodu,Cfops]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:403:hide' style='display: inline;'><br>                 VA evt_CFOP [BRCFOP] &#60;- TK CFOP [BRCFOP]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:404' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:404:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "047"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:406' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:406:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>            End If<span class='comment'><br>            // Consistência Forma de Pagamento</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:410' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is not equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:410:hide' style='display: inline;'><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:411' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCarteiraBanco [CARBAN] is equal to ("B","N")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:411:hide' style='display: inline;'><br>                      VA evt_CodFormPagto [CDFRMPGT] = "Z"</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:413' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:413:hide' style='display: inline;'><br>                      VA evt_CodFormPagto [CDFRMPGT] = "N"</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:416' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to "B"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:416:hide' style='display: inline;'><span class='comment'><br>                      // Quando for enviada uma condição de faturamento = B, considerar o</span><span class='comment'><br>                      // campo forma de pagamento(CDFRMPGT) também = B.</span><br>                      VA evt_CodFormPagto [CDFRMPGT] = "B"</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:421' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodFormPagto [CDFRMPGT] is equal to "B"<br>                 And VA evt_CodStatus [CODSTAT] is equal to "PFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:421:hide' style='display: inline;'><br>                      VA evt_CodStatus [CODSTAT] = "OK"</div><br>                 End If</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:424' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:424:hide' style='display: inline;'><br>                 VA evt_CodFormPagto [CDFRMPGT] = [BF cCarteiraBanco [CARBAN]]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:426' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUpdateUDCDescription(B4002070.GetUpdateUDCDescription)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:426:hide' style='display: inline;'><span class='parameters'><br>                      "R" -&#62; cMode [MODE]<br>                      "57" -&#62; szSystemCode [SY]<br>                      "FP" -&#62; szUserDefinedCodes [RT]<br>                      "3" -&#62; mnCodeLength [CDL]<br>                      VA evt_bRetornoValidaUDC [EV01] &#60;- cErrorCode [ERRC]<br>                      "1" -&#62; cSuppressErrorMessage [EV01]<br>                      VA evt_CodFormPagto [CDFRMPGT] -&#62; szUDCCode [KY]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:427' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_bRetornoValidaUDC [EV01] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:427:hide' style='display: inline;'><br>                      VA evt_CodErro [CODERRO] = "010"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:429' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:429:hide' style='display: inline;'><span class='parameters'><br>                           BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                           VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                      VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:432' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodStatus [CODSTAT] is equal to ("OK","PFT")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:432:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:433' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodFormPagto [CDFRMPGT] is not equal to("H","I","J","K","L","N","P","Z")<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:433:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "010"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:435' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:435:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Venda Cartão</span><span class='comment'><br>            // Consistência Data Emissão</span><br>            VA evt_DataHoje [DGJ] = date_today()<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:444' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DataHoje [DGJ] is greater than VA evt_DataContabilidade [DGJ]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:444:hide' style='display: inline;'><br>                 VA evt_DataEmissao [DATAEMIS] = VA evt_DataContabilidade [DGJ]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:446' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:446:hide' style='display: inline;'><br>                 VA evt_DataEmissao [DATAEMIS] = date_today()</div><br>            End If<span class='comment'><br>            // Consistência Data Vencimento</span><br>            VA evt_ProductCode [SY] = "57"<br>            VA evt_UserDefinedCodes [RT] = "BI"<br>            VA evt_ChvBil_AA10 [AA10] = concat("        ", [VA evt_ChvBilling [CHVBIL]])<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:453' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.FetchSingle  [Index 1: System, Type, Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:453:hide' style='display: inline;'><br>                 <span class='iokey'>VA evt_ProductCode [SY] = TK Product Code [SY]</span><br>                 <span class='iokey'>VA evt_UserDefinedCodes [RT] = TK User Defined Codes [RT]</span><br>                 <span class='iokey'>VA evt_ChvBil_AA10 [AA10] = TK User Defined Code [KY]</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:454' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:454:hide' style='display: inline;'><br>                 VA evt_BillingExcecao [EV01] = "S"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:456' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:456:hide' style='display: inline;'><br>                 VA evt_BillingExcecao [EV01] = "N"</div><br>            End If<br>            VA evt_TemEmail [EV01] = "N"<br>            VA evt_EmailString [AA06] = substr([BF szTexto1 [DQ01]], "0", "6")<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:461' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailString [AA06] is equal to "EMAIL-"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:461:hide' style='display: inline;'><br>                 VA evt_TemEmail [EV01] = "S"</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:463' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:463:hide' style='display: inline;'><br>                 VA evt_EmailString [AA06] = substr([BF szTexto2 [DQ02]], "0", "6")<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:465' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailString [AA06] is equal to "EMAIL-"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:465:hide' style='display: inline;'><br>                      VA evt_TemEmail [EV01] = "S"</div><br>                 End If</div><br>            End If<br>            VA evt_DataVencimento [DATAVENC] = &#60;NULL&#62;<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:470' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataVencimento [DDU] is not equal to Null Date<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:470:hide' style='display: inline;'><br>                 VA evt_DataVencimentoAux [DATAVENC] = BF jdDataVencimento [DDU]<span class='comment'><br>                 // Busca o prazo mínimo para o Vencimento</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:473' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUDC(X0005.GetUDC)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:473:hide' style='display: inline;'><span class='parameters'><br>                      "57" -&#62; szSystemCode [SY]<br>                      "TV" -&#62; szRecordTypeCode [RT]<br>                      BF szCodTipoVenda [CODTPVEN] -&#62; szUserDefinedCode [KY]<br>                      "3,00" -&#62; mnKeyFieldLength [AS]<br>                      VA evt_CodErro [CODERRO] &#60;- szSpecialHandlingCode [SPHD]<br>                      "1" -&#62; cSuppressErrorMessage [EV01]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:474' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>RemoveNonNumericCharsFromStr(N5504601.RemoveNonNumericCharsFromStr)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:474:hide' style='display: inline;'><span class='parameters'><br>                      VA evt_CodErro [CODERRO] &#60;&#62; szString [DS01]</span></div><br>                 VA evt_ValorTotalProdutos [VLRTOTBR] = [VA evt_CodErro [CODERRO]]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:476' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BillingExcecao [EV01] is equal to "S"<br>                 And VA evt_TemEmail [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:476:hide' style='display: inline;'><br>                      VA evt_DataFutura [DGJ] = add_days(date_today(), "2")</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:478' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:478:hide' style='display: inline;'><br>                      VA evt_DataFutura [DGJ] = add_days(date_today(), [VA evt_ValorTotalProdutos [VLRTOTBR]])</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:481' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DataVencimentoAux [DATAVENC] is less than VA evt_DataFutura [DGJ]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:481:hide' style='display: inline;'><br>                      VA evt_CodErro [CODERRO] = "015"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:483' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:483:hide' style='display: inline;'><span class='parameters'><br>                           BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                           VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                      VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                 End If</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:486' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:486:hide' style='display: inline;'><span class='comment'><br>                 // Basket sem Faturamento, foi incluido a condição NFT no I</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:488' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to ("001","B","NFT")<br>                 Or BF cIndFatMinimo [FATMIN] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:488:hide' style='display: inline;'><span class='comment'><br>                      // Basket sem Faturamento, foi incluido a condição NFT no I</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:490' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:490:hide' style='display: inline;'><span class='comment'><br>                      // Carga HAGAH</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:492' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to "V"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:492:hide' style='display: inline;'><br>                           VA evt_CodTipoPeriodo [CODTPPER] = "V"</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:494' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:494:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:495' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to "G"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:495:hide' style='display: inline;'><br>                                VA evt_CodTipoPeriodo [CODTPPER] = "G"</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:497' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:497:hide' style='display: inline;'><br>                                VA evt_CodTipoPeriodo [CODTPPER] = "X"</div><br>                           End If</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:501' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0014.FetchSingle  [Index 1: Payment Terms Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:501:hide' style='display: inline;'><br>                           <span class='iokey'>BF szCondPagto [PTC] = TK Payment Terms Code [PTC]</span><br>                           VA evt_NetDaysToPay [NDTP] &#60;- TK Net Days to Pay [NDTP]<br>                           VA evt_ProxDateMonth [PXDM] &#60;- TK Date - Due Date - MO [PXDM]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:502' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:502:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "022"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:504' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:504:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:506' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:506:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:507' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodFormPagto [CDFRMPGT] is equal to "Z"<br>                           And BF szCodTipoVenda [CODTPVEN] is not equal to"R"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:507:hide' style='display: inline;'><span class='comment'><br>                                //</span><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:509' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CalculaCPGTOS(N5509O02.CalculaCPGTOS)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:509:hide' style='display: inline;'><span class='parameters'><br>                                     BF szCondPagto [PTC] -&#62; CPGTO_informar [PTC]<br>                                     SL DateToday -&#62; DataVencto_Informar [DGJ]<br>                                     VA evt_DataVencimentoAux [DATAVENC] &#60;- Vencto_Volta01 [DGJ]</span></div><span class='comment'><br>                                //</span><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:512' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "D"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:512:hide' style='display: inline;'><br>                                     VA evt_DataFutura [DGJ] = add_days(date_today(), "2")</div><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:514' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:514:hide' style='display: inline;'><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:515' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BillingExcecao [EV01] is equal to "S"<br>                                     And VA evt_TemEmail [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:515:hide' style='display: inline;'><br>                                          VA evt_DataFutura [DGJ] = add_days(date_today(), "2")</div><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:517' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:517:hide' style='display: inline;'><br>                                          VA evt_DataFutura [DGJ] = add_days(date_today(), "7")</div><br>                                     End If</div><br>                                End If<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:521' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_DataVencimentoAux [DATAVENC] is less than VA evt_DataFutura [DGJ]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:521:hide' style='display: inline;'><br>                                     VA evt_CodErro [CODERRO] = "015"<br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:523' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:523:hide' style='display: inline;'><span class='parameters'><br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                          VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                     VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                                End If</div><br>                           End If</div><br>                      End If</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Consistência Centro de Custo</span><br>            VA evt_ValorTotalProdutos [VLRTOTBR] = 0<br>            BF szStatus [LDCS] = "OK"<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:534' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Select  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:534:hide' style='display: inline;'><br>                 <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                 <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                 <span class='iokey'>BF szChvBilling [CHVBIL] = TK Chave no Billing [CHVBIL]</span><br>                 <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                 <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                 <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>                 <span class='iokey'>BF szStatus [LDCS] = TK Status - Confirmed Load [LDCS]</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:535' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:535:hide' style='display: inline;'><br>                 VA evt_NrPublicacoesF5711ZB [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                 VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                 VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                 VA evt_SubledgerF5711ZB [SBL] &#60;- TK Subledger - G/L [SBL]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:536' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:536:hide' style='display: inline;'><br>                 VA evt_ValorTotalProdutos [VLRTOTBR] = [VA evt_ValorTotalProdutos [VLRTOTBR]]+[VA evt_ValorProduto [VLRTOTBR]]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:538' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CentroCusto_AA07 [AA07] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:538:hide' style='display: inline;'></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:539' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:539:hide' style='display: inline;'><br>                      VA evt_CentroCusto_AA07 [AA07] = rtrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                      VA evt_CentroCusto_AA07 [AA07] = ltrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                      VA evt_mnNumAux [IA07] = length([VA evt_CentroCusto_AA07 [AA07]])<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:543' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is less than "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:543:hide' style='display: inline;'><br>                           VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "4")</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:546' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is equal to "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:546:hide' style='display: inline;'><br>                           VA evt_CentroCusto_AA07 [AA07] = concat([BF szCodEmpresa [CEMP]], [VA evt_CentroCusto_AA07 [AA07]])</div><br>                      End If<br>                      VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "7")<br>                      VA evt_CostCenter [MCU] = lpad([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;, "12")<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:551' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0006.FetchSingle  [Index 1: Cost Center]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:551:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_CostCenter [MCU] = TK Business Unit [MCU]</span><br>                           VA evt_CompanyMCU [CO] &#60;- TK Company [CO]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:552' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                      Or VA evt_Company [CO] is not equal to VA evt_CompanyMCU [CO]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:552:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "029"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:554' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:554:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:558' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571599X.Insert  [Index 1: Chave]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:558:hide' style='display: inline;'><br>                      VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                      VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                      BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                      BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                      BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                      BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                      BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                      VA evt_NrPublicacoesF5711ZB [NRPUBLI] -&#62; TK Número total de publicações [NRPUBLI]<br>                      VA evt_CentroCusto_AA07 [AA07] -&#62; TK Alpha Spec. Data 07 [AA07]<br>                      VA evt_ValorProduto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                      VA evt_SubledgerF5711ZB [SBL] -&#62; TK Subledger - G/L [SBL]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:559' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:559:hide' style='display: inline;'><br>                      VA evt_NrPublicacoesF5711ZB [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                      VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                      VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                      VA evt_SubledgerF5711ZB [SBL] &#60;- TK Subledger - G/L [SBL]</div></div><br>            End While<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:561' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorTotalProdutos [VLRTOTBR] is not equal to BF mnVlrTotalLiquido [VLRTOTLI]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:561:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "043"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:563' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:563:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // BBDN</span><br>            VA evt_NrAutoriza [NRAUTORI] = &#60;NULL&#62;<br>            VA evt_NrCartaoCredito [NRCCRED] = &#60;NULL&#62;<br>            VA evt_AlphaSpecData08 [AA08] = &#60;NULL&#62;<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:571' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "R"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:571:hide' style='display: inline;'><br>                 VA evt_NrCartaoCredito [NRCCRED] = BF szNrAutorizacao [NRAUTORI]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:573' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:573:hide' style='display: inline;'><br>                 VA evt_NrAutoriza [NRAUTORI] = BF szNrAutorizacao [NRAUTORI]</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // DATA INÍCIO E FIM DA PUBLICAÇÃO</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:578' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataFinalCompet [SVDE] is less than BF jdDataInicialCompet [SVDB]<br>            Or BF jdDataFinalCompet [SVDE] is equal to Null Date<br>            Or BF jdDataInicialCompet [SVDB] is equal to Null Date<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:578:hide' style='display: inline;'><br>                 VA evt_CodErro [CODERRO] = "041"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:580' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:580:hide' style='display: inline;'><span class='parameters'><br>                      BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                      VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                 VA evt_CodStatus [CODSTAT] = "NOK"</div><br>            End If<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:583' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:583:hide' style='display: inline;'><br>                 VA evt_VlrComissao [VLRCOMIS] = ([BF mnVlrTotalLiquido [VLRTOTLI]]*[VA evt_PercComissao [PERCCOM]])/100<br>                 BF mnVlrTotalLiquido [VLRTOTLI] = [BF mnVlrTotalLiquido [VLRTOTLI]]-[VA evt_VlrComissao [VLRCOMIS]]</div><br>            End If<span class='comment'><br>            // Projeto Mercado</span><br>            VA evt_ZeraValores [EV01] = "N"<br>            VA evt_Basket_EV01 [EV01] = &#60;Blank&#62;<br>            VA evt_Desconto_EV02 [EV02] = &#60;Blank&#62;<br>            VA evt_ValorBasket_AA [AA] = 0<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:592' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:592:hide' style='display: inline;'><br>                 VA evt_Basket_EV01 [EV01] = BF cIndBasket [ACTAPP]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:594' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUDCDescription(N0800031.GetUDCDescription)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:594:hide' style='display: inline;'><span class='parameters'><br>                      "57" -&#62; szSystemCode [SY]<br>                      "DS" -&#62; szUserDefinedCodes [RT]<br>                      VA evt_CodFormPagto [CDFRMPGT] -&#62; szUserDefinedCode [KY]<br>                      VA evt_Basket_DL02 [DL02] &#60;- szDescription02 [DL02]<br>                      VA evt_bRetornoValidaUDC [EV01] &#60;- cErrorCode [ERRC]<br>                      VA evt_Desconto_SPHD [SPHD] &#60;- szSpecialHandlingCode [SPHD]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:595' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_bRetornoValidaUDC [EV01] is equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:595:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:596' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Basket_DL02 [DL02] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:596:hide' style='display: inline;'><br>                           VA evt_ZeraValores [EV01] = "N"</div><br>                      End If</div><br>                 End If<br>                 VA evt_Desconto_EV02 [EV02] = "S"<span class='comment'><br>                 //</span><span class='comment'><br>                 // Exibe com Basket</span><span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:604' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<br>                 And BF cIndBasket [ACTAPP] is equal to "S"<br>                 And BF cIndDesconto [EV02] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:604:hide' style='display: inline;'><br>                      VA evt_Desconto_EV02 [EV02] = "S"</div><br>                 End If<span class='comment'><br>                 //</span><span class='comment'><br>                 // Exibe sem Basket</span><span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:610' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<br>                 And BF cIndBasket [ACTAPP] is equal to "N"<br>                 And BF cIndDesconto [EV02] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:610:hide' style='display: inline;'><br>                      VA evt_Desconto_EV02 [EV02] = "S"</div><br>                 End If<span class='comment'><br>                 //</span><span class='comment'><br>                 // Faturamento</span><span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:616' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "S"<br>                 And BF cIndBasket [ACTAPP] is equal to "N"<br>                 And BF cIndDesconto [EV02] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:616:hide' style='display: inline;'><br>                      VA evt_Desconto_EV02 [EV02] = "N"</div><br>                 End If<span class='comment'><br>                 //</span><span class='comment'><br>                 // Fatura/Exibe</span><span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:622' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "S"<br>                 And BF cIndBasket [ACTAPP] is equal to "S"<br>                 And BF cIndDesconto [EV02] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:622:hide' style='display: inline;'><br>                      VA evt_Desconto_EV02 [EV02] = "S"</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // ********************</span><span class='comment'><br>            // Retenção IRRF - Pedido</span><span class='comment'><br>            // ********************</span><br>            VA evt_CalculaIRRF [EV01] = "N"<br>            VA evt_ValorIRRFPedido [AA] = 0<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:632' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_RetemIRRF_SOLCALC [SOLCALC] is equal to "S"<br>            And VA evt_PessoaJurCliente [TAXC] is equal to "2"<br>            And VA evt_ReportCodeAddBook006 [AC06] is not equal to "OP"<br>            And VA evt_ClienteSemRetencaoIR [EV01] is equal to "N"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:632:hide' style='display: inline;'><br>                 VA evt_ValorIRRFPedido [AA] = ([BF mnVlrTotalLiquido [VLRTOTLI]]*[VA evt_PercIRRF_FW05 [FW05]])/100<br>                 VA evt_ValorIRRFPedido [AA] = round([VA evt_ValorIRRFPedido [AA]], "2")<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:635' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorIRRFPedido [AA] is less than VA evt_MinimoIRRF [MATH01]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:635:hide' style='display: inline;'><br>                      VA evt_ValorIRRFPedido [AA] = 0</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:637' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:637:hide' style='display: inline;'><br>                      VA evt_CalculaIRRF [EV01] = "S"</div><br>                 End If</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // ********************</span><span class='comment'><br>            // Retenção IRRF - Distribuição Contábil</span><span class='comment'><br>            // ********************</span><br>            VA evt_AnoMesInicio [AA06] = (date_year([BF jdDataInicialCompet [SVDB]])*100)+date_month([BF jdDataInicialCompet [SVDB]])<br>            VA evt_AnoMesFim [AA06] = (date_year([BF jdDataFinalCompet [SVDE]])*100)+date_month([BF jdDataFinalCompet [SVDE]])<br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:647' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_AnoMesInicio [AA06] is equal to VA evt_AnoMesFim [AA06]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:647:hide' style='display: inline;'><span class='comment'><br>                 //</span><span class='comment'><br>                 // Puplicação / Veiculação toda dentro do Mês</span><span class='comment'><br>                 //</span><br>                 VA evt_ValorTotalProdutos [VLRTOTBR] = 0<br>                 VA evt_AcumulaIRRF_F570152 [AA] = 0<br>                 VA evt_ValorIRRF_F570152 [AA] = 0<br>                 BF szStatus [LDCS] = "OK"<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:655' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Select  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:655:hide' style='display: inline;'><br>                      <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                      <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                      <span class='iokey'>BF szChvBilling [CHVBIL] = TK Chave no Billing [CHVBIL]</span><br>                      <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>                      <span class='iokey'>BF szStatus [LDCS] = TK Status - Confirmed Load [LDCS]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:656' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:656:hide' style='display: inline;'><br>                      VA evt_ProdutoDetalhe [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                      VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                      VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                      VA evt_Subledger [SBL] &#60;- TK Subledger - G/L [SBL]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:657' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:657:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:658' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:658:hide' style='display: inline;'><br>                           VA evt_VlrComissao [VLRCOMIS] = [VA evt_ValorProduto [VLRTOTBR]]*[VA evt_PercComissao [PERCCOM]]<br>                           VA evt_VlrComissao [VLRCOMIS] = [VA evt_VlrComissao [VLRCOMIS]]/100<br>                           VA evt_ValorProduto [VLRTOTBR] = [VA evt_ValorProduto [VLRTOTBR]]-[VA evt_VlrComissao [VLRCOMIS]]</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:663' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CalculaIRRF [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:663:hide' style='display: inline;'><br>                           VA evt_ValorIRRF_F570152 [AA] = ([VA evt_ValorProduto [VLRTOTBR]]*[VA evt_PercIRRF_FW05 [FW05]])/100<br>                           VA evt_ValorIRRF_F570152 [AA] = round([VA evt_ValorIRRF_F570152 [AA]], "2")<br>                           VA evt_AcumulaIRRF_F570152 [AA] = [VA evt_AcumulaIRRF_F570152 [AA]]+[VA evt_ValorIRRF_F570152 [AA]]<br>                           VA evt_ValorProduto [VLRTOTBR] = [VA evt_ValorProduto [VLRTOTBR]]-[VA evt_ValorIRRF_F570152 [AA]]<br>                           VA evt_ValorProduto [VLRTOTBR] = round([VA evt_ValorProduto [VLRTOTBR]], "2")</div><br>                      End If<br>                      VA evt_ValorTotalProdutos [VLRTOTBR] = [VA evt_ValorTotalProdutos [VLRTOTBR]]+[VA evt_ValorProduto [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:671' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:671:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_ProdutoDetalhe [NRPUBLI] = TK Código do Produto [CODPRODU]</span><br>                           VA evt_CompanyProdDetalhe [CO] &#60;- TK Company [CO]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:672' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                      Or VA evt_CompanyProdDetalhe [CO] is not equal to VA evt_Company [CO]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:672:hide' style='display: inline;'><br>                           VA evt_CodErro [CODERRO] = "042"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:674' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:674:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                           VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:677' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CentroCusto_AA07 [AA07] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:677:hide' style='display: inline;'><br>                           VA evt_CostCenter [MCU] = &#60;Blank&#62;</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:679' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:679:hide' style='display: inline;'><br>                           VA evt_CentroCusto_AA07 [AA07] = rtrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                           VA evt_CentroCusto_AA07 [AA07] = ltrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                           VA evt_mnNumAux [IA07] = length([VA evt_CentroCusto_AA07 [AA07]])<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:683' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is less than "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:683:hide' style='display: inline;'><br>                                VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "4")</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:686' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is equal to "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:686:hide' style='display: inline;'><br>                                VA evt_CentroCusto_AA07 [AA07] = concat([BF szCodEmpresa [CEMP]], [VA evt_CentroCusto_AA07 [AA07]])</div><br>                           End If<br>                           VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "7")<br>                           VA evt_CostCenter [MCU] = lpad([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;, "12")</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:692' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Subledger [SBL] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:692:hide' style='display: inline;'><br>                           VA evt_SubledgerType [SBLT] = &#60;Blank&#62;</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:694' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:694:hide' style='display: inline;'><br>                           VA evt_SubledgerType [SBLT] = "H"</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:697' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Insert  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:697:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           VA evt_ProdutoDetalhe [NRPUBLI] -&#62; TK Número total de publicações [NRPUBLI]<br>                           VA evt_ValorProduto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_Subledger [SBL] -&#62; TK Subledger - G/L [SBL]<br>                           VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                           VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                           VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                           VA evt_SubledgerType [SBLT] -&#62; TK Subledger Type [SBLT]<br>                           VA evt_CostCenter [MCU] -&#62; TK Business Unit [MCU]<br>                           VA evt_ValorIRRF_F570152 [AA] -&#62; TK Math Numeric 01 [MATH01]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:698' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:698:hide' style='display: inline;'><br>                           VA evt_ProdutoDetalhe [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                           VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                           VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_Subledger [SBL] &#60;- TK Subledger - G/L [SBL]</div></div><br>                 End While<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:700' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szNumeroBancario [AA15] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:700:hide' style='display: inline;'><br>                      VA evt_AlphaSpecData08 [AA08] = &#60;Blank&#62;</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:702' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:702:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:703' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701011.Insert  [Index 1: CodProdu,AnMesEnt,NrPedido]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:703:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_AnoMesEntrada [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           BF szNumeroBancario [AA15] -&#62; TK Bank Duplicata Number [BBDN]</div><br>                      VA evt_AlphaSpecData08 [AA08] = rtrim([BF szNumeroBancario [AA15]], &#60;Blank&#62;)<br>                      VA evt_AlphaSpecData08 [AA08] = ltrim([VA evt_AlphaSpecData08 [AA08]], &#60;Blank&#62;)<br>                      VA evt_AlphaSpecData08 [AA08] = lpad([VA evt_AlphaSpecData08 [AA08]], &#60;Blank&#62;, "15")<br>                      VA evt_AlphaSpecData08 [AA08] = substr([VA evt_AlphaSpecData08 [AA08]], "7", "8")</div><br>                 End If<span class='comment'><br>                 //</span><span class='comment'><br>                 // inclusão campo MCU</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:711' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:711:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:712' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<br>                      And VA evt_Basket_EV01 [EV01] is equal to "N"<br>                      And VA evt_ZeraValores [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:712:hide' style='display: inline;'><br>                           BF mnVlrTotalBruto [VLRTOTBR] = 0<br>                           BF mnVlrTotalLiquido [VLRTOTLI] = 0</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:716' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Basket_EV01 [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:716:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:717' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is greater than "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:717:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:718' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CalculoComissao(N5701012.CalculoComissao)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:718:hide' style='display: inline;'><span class='parameters'><br>                                     "S" -&#62; cTpOrigemComissao [TPORICOM]<br>                                     BF mnVlrTotalLiquido [VLRTOTLI] -&#62; mnVlrTotalLiquido [VLRTOTLI]<br>                                     VA evt_BruLiq [BRULIQ] -&#62; cBruLiq [BRULIQ]<br>                                     BF mnCodAgencia [CMC1] -&#62; mnCommissionCode1 [CMC1]<br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_ValorBasket_AA [AA] &#60;- mnVlrExecutadoLiquidez [VLREXLQD]<br>                                     VA evt_AddressNumber [AN8] -&#62; mnAddressNumber [AN8]</span></div></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:719' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:719:hide' style='display: inline;'><br>                                VA evt_ValorBasket_AA [AA] = BF mnVlrTotalLiquido [VLRTOTLI]</div><br>                           End If</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:722' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:722:hide' style='display: inline;'><br>                           VA evt_ValorBasket_AA [AA] = 0</div><br>                      End If</div><br>                 End If<span class='comment'><br>                 //</span><br>                 VA evt_ValorTabelaRateio [ANQT] = BF mnValorTabela [ANQT]<span class='comment'><br>                 //</span><span class='comment'><br>                 // Após calcular a Comissão/Total Líquido, verifica se o novo Total Líquido</span><span class='comment'><br>                 // bate com a soma dos Produtinhos. Se não bater, coloca a diferença no IRRF</span><span class='comment'><br>                 // em um Produtinho qualquer</span><span class='comment'><br>                 // ATENÇÃO: não verifica se o novo IRRF ficou negativo ou menor que o mínimo</span><span class='comment'><br>                 // _ Melhor seria lançar no maior e, mesmo assim, verificar</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:734' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CalculaIRRF [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:734:hide' style='display: inline;'><br>                      BF mnVlrTotalLiquido [VLRTOTLI] = [BF mnVlrTotalLiquido [VLRTOTLI]]-[VA evt_AcumulaIRRF_F570152 [AA]]<br>                      BF mnVlrTotalLiquido [VLRTOTLI] = round([BF mnVlrTotalLiquido [VLRTOTLI]], "2")<br>                      VA evt_ValorDiferenca [VLRTOTBR] = [BF mnVlrTotalLiquido [VLRTOTLI]]-[VA evt_ValorTotalProdutos [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:738' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorDiferenca [VLRTOTBR] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:738:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:739' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Select  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:739:hide' style='display: inline;'><br>                                <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:740' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.FetchNext  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:740:hide' style='display: inline;'><br>                                VA evt_NrPublicacoesUpdate [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                                VA evt_SubledgerUpdate [SBL] &#60;- TK Subledger - G/L [SBL]<br>                                VA evt_ValorIRRF_F570152 [AA] &#60;- TK Math Numeric 01 [MATH01]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:741' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:741:hide' style='display: inline;'><br>                                VA evt_ValorIRRF_F570152 [AA] = [VA evt_ValorIRRF_F570152 [AA]]+[VA evt_ValorDiferenca [VLRTOTBR]]<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:743' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Update  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:743:hide' style='display: inline;'><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     <span class='iokey'>VA evt_NrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span><br>                                     <span class='iokey'>VA evt_NrPublicacoesUpdate [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>                                     <span class='iokey'>VA evt_SubledgerUpdate [SBL] = TK Subledger - G/L [SBL]</span><br>                                     VA evt_ValorIRRF_F570152 [AA] -&#62; TK Math Numeric 01 [MATH01]</div></div><br>                           End If</div><br>                      End If</div><br>                 End If<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:747' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Insert  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:747:hide' style='display: inline;'><br>                      BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                      VA evt_AnoMesEntradaPedido [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                      VA evt_NrPedidoBilling [NRPEDBIL] -&#62; TK Número do pedido no Billing [NRPEDBIL]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                      VA evt_mnZero [NRPREST] -&#62; TK Document (Voucher, Invoice, etc.) [DOC]<br>                      VA evt_AddressNumber [AN8] -&#62; TK Address Number [AN8]<br>                      VA evt_ClienteOrigemString [AA07] -&#62; TK Código do Cliente no Billing [CODCLIBL]<br>                      VA evt_NrAutoriza [NRAUTORI] -&#62; TK Número da Autorização [NRAUTORI]<br>                      BF mnCodAgencia [CMC1] -&#62; TK Commission Code 1 [CMC1]<br>                      BF mnCodRepresent [URAB] -&#62; TK User Reserved Number [URAB]<br>                      VA evt_DataCriacao [DATACRI] -&#62; TK Data de Criação [DATACRI]<br>                      BF jdDataInicialCompet [SVDB] -&#62; TK Data de início da publicação [DATAINPU]<br>                      BF jdDataFinalCompet [SVDE] -&#62; TK Data de fim da publicação [DATAFIPU]<br>                      VA evt_DataEmissao [DATAEMIS] -&#62; TK Data de Emissão [DATAEMIS]<br>                      VA evt_DataVencimentoAux [DATAVENC] -&#62; TK Data de Vencimento [DATAVENC]<br>                      VA evt_Cobertura [COBERTU] -&#62; TK Cobertura [COBERTU]<br>                      VA evt_CodTipoPeriodo [CODTPPER] -&#62; TK Código do tipo do Período [CODTPPER]<br>                      VA evt_CodFormPagto [CDFRMPGT] -&#62; TK Código da Forma de Pagamento [CDFRMPGT]<br>                      BF szCodTipoVenda [CODTPVEN] -&#62; TK Código do Tipo de Venda [CODTPVEN]<br>                      VA evt_CodStatus [CODSTAT] -&#62; TK Código de Status [CODSTAT]<br>                      VA evt_CodOrigem [CODORIGE] -&#62; TK Código de Origem [CODORIGE]<br>                      BF szCentroCusto [MCU] -&#62; TK Business Unit [MCU]<br>                      VA evt_NrCartaoCredito [NRCCRED] -&#62; TK Número do cartão de crédito [NRCCRED]<br>                      VA evt_mnUm [NRPREST] -&#62; TK Quantidade de pagamento [QTDPAGTO]<br>                      VA evt_mnUm [NRPREST] -&#62; TK Número da prestação [NRPREST]<br>                      VA evt_mnUm [NRPREST] -&#62; TK Número total de publicações [NRPUBLI]<br>                      VA evt_DataCriacao [DATACRI] -&#62; TK Data de Carga dos Pedido [DTCRGPED]<br>                      VA evt_Mensal_N [MENSAL] -&#62; TK Mensal [MENSAL]<br>                      BF mnVlrTotalBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                      BF mnVlrTotalLiquido [VLRTOTLI] -&#62; TK Valor Total Líquido [VLRTOTLI]<br>                      VA evt_DiasPagto [DIASPAGT] -&#62; TK Quantidade de dias para pagamento [DIASPAGT]<br>                      BF cCliAge [CLIAGE] -&#62; TK Identificador de Cliente ou Agência [CLIAGE]<br>                      VA evt_BruLiq [BRULIQ] -&#62; TK Identificador de Bruto ou Líquido [BRULIQ]<br>                      VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                      VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                      VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                      VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                      VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                      BF szCondPagto [PTC] -&#62; TK Payment Terms Code [PTC]<br>                      BF mnQtdExemplares [QTDEXEM] -&#62; TK Quantidade de Exemplares [QTDEXEM]<br>                      VA evt_AddressNumberParent [PA8] -&#62; TK Address Number - Parent [PA8]<br>                      VA evt_Basket_EV01 [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                      VA evt_Aglutinador_A301 [A301] -&#62; TK Generic String 01 [A301]<br>                      VA evt_AlphaSpecData08 [AA08] -&#62; TK Alpha Spec. Data 08 [AA08]<br>                      VA evt_mnZero [NRPREST] -&#62; TK Billing - Código do Portador 4 [WBPORTA4]<br>                      VA evt_Desconto_EV02 [EV02] -&#62; TK J.D. EnterpriseOne Event Point 02 [EV02]<br>                      VA evt_ValorBasket_AA [AA] -&#62; TK Amount [AA]<br>                      VA evt_ValorTabelaRateio [ANQT] -&#62; TK Amount - Quoted [ANQT]<br>                      BF cInd1 [AA01] -&#62; TK Alpha Spec. Data 01 [AA01]<br>                      VA evt_ChvBilling [CHVBIL] -&#62; TK Chave no Billing [CHVBIL]<br>                      VA evt_ReportCodeAddBook006 [AC06] -&#62; TK Category Code - Address Book 06 [AC06]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:748' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570364.Insert  [Index 1: Indice]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:748:hide' style='display: inline;'><br>                      BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                      VA evt_AnoMesEntradaPedido [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                      BF mnCodVendedor [AN8R] -&#62; TK Related - Address Number [AN8R]</div><span class='comment'><br>                 // ------</span><br>                 VA evt_DiaPublicacao [DIAPUB] = date_day([VA evt_DataEmissao [DATAEMIS]])<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:751' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570113.Insert  [Index 2: CodProd, NrPed, DiaPub]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:751:hide' style='display: inline;'><br>                      BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                      VA evt_DiaPublicacao [DIAPUB] -&#62; TK Dia de publicação [DIAPUB]<br>                      BF mnVlrTotalLiquido [VLRTOTLI] -&#62; TK Valor da publicação [VLRPUB]<br>                      VA evt_CodStatus [CODSTAT] -&#62; TK Situação da Fatura [SITFAT]<br>                      VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                      VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                      VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                      VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                      VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]</div><span class='comment'><br>                 //</span><span class='comment'><br>                 // &#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;</span><span class='comment'><br>                 // Verifica se o produto se encontra na UDC 55/04 (Parcela para Protesto)</span><span class='comment'><br>                 // Se estiver, gravará 'CONTRATO' no campo CONTRATO</span><span class='comment'><br>                 // &#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;</span><br>                 VA evt_Contrato_CTRT [CTRT] = &#60;Blank&#62;<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:758' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szContrato [CTRT] is equal to "CONTRATO"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:758:hide' style='display: inline;'><br>                      VA evt_UDC_SY [SY] = "55"<br>                      VA evt_UDC_RT [RT] = "04"<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:761' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertNumericToString(B0000045.ConvertNumericToString)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:761:hide' style='display: inline;'><span class='parameters'><br>                           BF mnCodProduto [CODPRODU] -&#62; mnMathNumeric01 [MATH01]<br>                           VA evt_UDC_CodProduto_KY [KY] &#60;- szVideoConstant30A [VC30A]</span></div><br>                      VA evt_UDC_CodProduto_KY [KY] = concat("%", [VA evt_UDC_CodProduto_KY [KY]])<br>                      VA evt_UDC_CodProduto_KY [KY] = concat([VA evt_UDC_CodProduto_KY [KY]], "%")<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:764' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.Select  [Index 1: System, Type, Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:764:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_UDC_SY [SY] = TK Product Code [SY]</span><br>                           <span class='iokey'>VA evt_UDC_RT [RT] = TK User Defined Codes [RT]</span><br>                           <span class='iokey'>VA evt_UDC_CodProduto_KY [KY] Is Like TK User Defined Code [KY]</span><br>                           <span class='iokey'>BF szParcelaProtesto [SFX] = TK Description [DL01]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:765' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.FetchNext  [Index 1: System, Type, Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:765:hide' style='display: inline;'><br>                           VA evt_UDC_SY [SY] &#60;- TK Product Code [SY]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:766' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:766:hide' style='display: inline;'><br>                           VA evt_Contrato_CTRT [CTRT] = "CONTRATO"</div><br>                      End If</div><br>                 End If<span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:771' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570120.Insert  [Index 1: CodProduto,NrPedido,AnoMesEnt]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:771:hide' style='display: inline;'><br>                      BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                      VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                      VA evt_AnoMesEntradaPedido [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                      BF szNomeAutorizador [AUTA] -&#62; TK Nome do Autorizador [AUTORIZA]<br>                      VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                      VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                      VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                      VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                      VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                      BF szTexto1 [DQ01] -&#62; TK AlphaSpec40 [AA40]<br>                      VA evt_Contrato_CTRT [CTRT] -&#62; TK Contrato [CTRT]</div><span class='comment'><br>                 //</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:773' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:773:hide' style='display: inline;'><span class='comment'><br>                 //</span><span class='comment'><br>                 // Puplicação / Veiculação além do Mês (Rateio / Diferimento)</span><span class='comment'><br>                 //</span><br>                 VA evt_ValorTotalPedidos [VLRTOTBR] = 0<br>                 VA evt_QtdDiasTotal [IA08] = days_between([BF jdDataInicialCompet [SVDB]], [BF jdDataFinalCompet [SVDE]])<br>                 VA evt_QtdDiasTotal [IA08] = [VA evt_QtdDiasTotal [IA08]]+1<br>                 VA evt_UltimoDiaMes [DGJ] = last_day([BF jdDataInicialCompet [SVDB]])<br>                 VA evt_PrimeiroDiaMes [DGJ] = BF jdDataInicialCompet [SVDB]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:782' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While VA evt_UltimoDiaMes [DGJ] is less than or equal to BF jdDataFinalCompet [SVDE]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:782:hide' style='display: inline;'><br>                      VA evt_QtdDiasMes [IA08] = days_between([VA evt_PrimeiroDiaMes [DGJ]], [VA evt_UltimoDiaMes [DGJ]])<br>                      VA evt_QtdDiasMes [IA08] = [VA evt_QtdDiasMes [IA08]]+1<span class='comment'><br>                      //</span><span class='comment'><br>                      // Rateio</span><span class='comment'><br>                      //</span><br>                      VA evt_AnoMesEntradaRateio [ANMESENT] = date_year([VA evt_PrimeiroDiaMes [DGJ]])<br>                      VA evt_AnoMesEntradaRateio [ANMESENT] = [VA evt_AnoMesEntradaRateio [ANMESENT]]*100<br>                      VA evt_AnoMesEntradaRateio [ANMESENT] = [VA evt_AnoMesEntradaRateio [ANMESENT]]+date_month([VA evt_PrimeiroDiaMes [DGJ]])<br>                      VA evt_ValorTotalProdutos [VLRTOTBR] = 0<br>                      VA evt_AcumulaIRRF_F570152 [AA] = 0<br>                      VA evt_ValorIRRF_F570152 [AA] = 0<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:794' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Select  [Index 2: Chave]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:794:hide' style='display: inline;'><br>                           <span class='iokey'>BF szChvBilling [CHVBIL] = TK Chave no Billing [CHVBIL]</span><br>                           <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                           <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                           <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>                           <span class='iokey'>BF szStatus [LDCS] = TK Status - Confirmed Load [LDCS]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:795' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 2: Chave]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:795:hide' style='display: inline;'><br>                           VA evt_ProdutoDetalhe [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                           VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                           VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_Subledger [SBL] &#60;- TK Subledger - G/L [SBL]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:796' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:796:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:797' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is equal to "L"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:797:hide' style='display: inline;'><br>                                VA evt_VlrComissao [VLRCOMIS] = [VA evt_ValorProduto [VLRTOTBR]]*[VA evt_PercComissao [PERCCOM]]<br>                                VA evt_VlrComissao [VLRCOMIS] = [VA evt_VlrComissao [VLRCOMIS]]/100<br>                                VA evt_ValorProduto [VLRTOTBR] = [VA evt_ValorProduto [VLRTOTBR]]-[VA evt_VlrComissao [VLRCOMIS]]</div><br>                           End If<br>                           VA evt_ValorProdRateio [VLRTOTBR] = ([VA evt_ValorProduto [VLRTOTBR]]/[VA evt_QtdDiasTotal [IA08]])*[VA evt_QtdDiasMes [IA08]]<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:803' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CalculaIRRF [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:803:hide' style='display: inline;'><br>                                VA evt_ValorIRRF_F570152 [AA] = ([VA evt_ValorProdRateio [VLRTOTBR]]*[VA evt_PercIRRF_FW05 [FW05]])/100<br>                                VA evt_ValorIRRF_F570152 [AA] = round([VA evt_ValorIRRF_F570152 [AA]], "2")<br>                                VA evt_AcumulaIRRF_F570152 [AA] = [VA evt_AcumulaIRRF_F570152 [AA]]+[VA evt_ValorIRRF_F570152 [AA]]<br>                                VA evt_ValorProdRateio [VLRTOTBR] = [VA evt_ValorProdRateio [VLRTOTBR]]-[VA evt_ValorIRRF_F570152 [AA]]<br>                                VA evt_ValorProdRateio [VLRTOTBR] = round([VA evt_ValorProdRateio [VLRTOTBR]], "2")</div><br>                           End If<br>                           VA evt_ValorTotalProdutos [VLRTOTBR] = [VA evt_ValorTotalProdutos [VLRTOTBR]]+[VA evt_ValorProdRateio [VLRTOTBR]]<br>                           VA evt_ValorTotalPedidos [VLRTOTBR] = [VA evt_ValorTotalPedidos [VLRTOTBR]]+[VA evt_ValorProdRateio [VLRTOTBR]]<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:812' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:812:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_ProdutoDetalhe [NRPUBLI] = TK Código do Produto [CODPRODU]</span><br>                                VA evt_CompanyProdDetalhe [CO] &#60;- TK Company [CO]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:813' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO ERROR<br>                           Or VA evt_CompanyProdDetalhe [CO] is not equal to VA evt_Company [CO]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:813:hide' style='display: inline;'><br>                                VA evt_CodErro [CODERRO] = "042"<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:815' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>InsereErroF570109(N5701005.InsereErroF570109)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:815:hide' style='display: inline;'><span class='parameters'><br>                                     BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                     VA evt_NrPedido [NRPEDIDO] -&#62; mnNrPedido [NRPEDIDO]<br>                                     VA evt_CodErro [CODERRO] -&#62; szCodErro [CODERRO]</span></div><br>                                VA evt_CodStatus [CODSTAT] = "NOK"</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:818' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CentroCusto_AA07 [AA07] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:818:hide' style='display: inline;'><br>                                VA evt_CostCenter [MCU] = &#60;Blank&#62;</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:820' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:820:hide' style='display: inline;'><br>                                VA evt_CentroCusto_AA07 [AA07] = rtrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                                VA evt_CentroCusto_AA07 [AA07] = ltrim([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;)<br>                                VA evt_mnNumAux [IA07] = length([VA evt_CentroCusto_AA07 [AA07]])<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:824' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is less than "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:824:hide' style='display: inline;'><br>                                     VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "4")</div><br>                                End If<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:827' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is equal to "4"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:827:hide' style='display: inline;'><br>                                     VA evt_CentroCusto_AA07 [AA07] = concat([BF szCodEmpresa [CEMP]], [VA evt_CentroCusto_AA07 [AA07]])</div><br>                                End If<br>                                VA evt_CentroCusto_AA07 [AA07] = lpad([VA evt_CentroCusto_AA07 [AA07]], "0", "7")<br>                                VA evt_CostCenter [MCU] = lpad([VA evt_CentroCusto_AA07 [AA07]], &#60;Blank&#62;, "12")</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:833' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Subledger [SBL] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:833:hide' style='display: inline;'><br>                                VA evt_SubledgerType [SBLT] = &#60;Blank&#62;</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:835' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:835:hide' style='display: inline;'><br>                                VA evt_SubledgerType [SBLT] = "H"</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:838' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Insert  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:838:hide' style='display: inline;'><br>                                BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                                VA evt_ProdutoDetalhe [NRPUBLI] -&#62; TK Número total de publicações [NRPUBLI]<br>                                VA evt_ValorProdRateio [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                                VA evt_Subledger [SBL] -&#62; TK Subledger - G/L [SBL]<br>                                VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                                VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                                VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                                VA evt_SubledgerType [SBLT] -&#62; TK Subledger Type [SBLT]<br>                                VA evt_CostCenter [MCU] -&#62; TK Business Unit [MCU]<br>                                VA evt_ValorIRRF_F570152 [AA] -&#62; TK Math Numeric 01 [MATH01]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:839' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 2: Chave]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:839:hide' style='display: inline;'><br>                                VA evt_ProdutoDetalhe [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                                VA evt_CentroCusto_AA07 [AA07] &#60;- TK Alpha Spec. Data 07 [AA07]<br>                                VA evt_ValorProduto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                                VA evt_Subledger [SBL] &#60;- TK Subledger - G/L [SBL]</div></div><br>                      End While<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:841' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CalculaIRRF [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:841:hide' style='display: inline;'><br>                           VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI] = [BF mnVlrTotalLiquido [VLRTOTLI]]-[VA evt_ValorIRRFPedido [AA]]<br>                           VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI] = round([VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI]], "2")</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:844' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:844:hide' style='display: inline;'><br>                           VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI] = BF mnVlrTotalLiquido [VLRTOTLI]</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:847' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_BruLiq [BRULIQ] is equal to "B"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:847:hide' style='display: inline;'><br>                           VA evt_VlrProdutosBruto [VLRTOTBR] = [VA evt_ValorTotalProdutos [VLRTOTBR]]+[VA evt_AcumulaIRRF_F570152 [AA]]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:849' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:849:hide' style='display: inline;'><br>                           VA evt_VlrProdutosBruto [VLRTOTBR] = ([BF mnVlrTotalBruto [VLRTOTBR]]*[VA evt_ValorTotalProdutos [VLRTOTBR]])/[VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI]]<br>                           VA evt_VlrProdutosBruto [VLRTOTBR] = round([VA evt_VlrProdutosBruto [VLRTOTBR]], "2")</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:853' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szNumeroBancario [AA15] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:853:hide' style='display: inline;'><br>                           VA evt_AlphaSpecData08 [AA08] = &#60;Blank&#62;</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:855' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:855:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:856' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701011.Insert  [Index 1: CodProdu,AnMesEnt,NrPedido]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:856:hide' style='display: inline;'><br>                                BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                                VA evt_AnoMesEntradaRateio [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                                VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                                BF szNumeroBancario [AA15] -&#62; TK Bank Duplicata Number [BBDN]</div><br>                           VA evt_AlphaSpecData08 [AA08] = rtrim([BF szNumeroBancario [AA15]], &#60;Blank&#62;)<br>                           VA evt_AlphaSpecData08 [AA08] = ltrim([VA evt_AlphaSpecData08 [AA08]], &#60;Blank&#62;)<br>                           VA evt_AlphaSpecData08 [AA08] = lpad([VA evt_AlphaSpecData08 [AA08]], &#60;Blank&#62;, "15")<br>                           VA evt_AlphaSpecData08 [AA08] = substr([VA evt_AlphaSpecData08 [AA08]], "7", "8")</div><br>                      End If<span class='comment'><br>                      //</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:863' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is not equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:863:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:864' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodFormPagto [CDFRMPGT] is equal to "B"<br>                           And VA evt_CodStatus [CODSTAT] is equal to "PFT"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:864:hide' style='display: inline;'><br>                                VA evt_CodStatus [CODSTAT] = "OK"</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      //</span><span class='comment'><br>                      // Inclusão campo MCU</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:870' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:870:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:871' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<br>                           And VA evt_Basket_EV01 [EV01] is equal to "N"<br>                           And VA evt_ZeraValores [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:871:hide' style='display: inline;'><br>                                VA evt_VlrProdutosBruto [VLRTOTBR] = 0<br>                                VA evt_ValorTotalProdutos [VLRTOTBR] = 0</div><br>                           End If<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:875' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_Basket_EV01 [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:875:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:876' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is greater than "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:876:hide' style='display: inline;'><br>                                    <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:877' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CalculoComissao(N5701012.CalculoComissao)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:877:hide' style='display: inline;'><span class='parameters'><br>                                          "S" -&#62; cTpOrigemComissao [TPORICOM]<br>                                          VA evt_ValorTotalProdutos [VLRTOTBR] -&#62; mnVlrTotalLiquido [VLRTOTLI]<br>                                          VA evt_BruLiq [BRULIQ] -&#62; cBruLiq [BRULIQ]<br>                                          BF mnCodAgencia [CMC1] -&#62; mnCommissionCode1 [CMC1]<br>                                          BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>                                          VA evt_ValorBasket_AA [AA] &#60;- mnVlrExecutadoLiquidez [VLREXLQD]<br>                                          VA evt_AddressNumber [AN8] -&#62; mnAddressNumber [AN8]</span></div></div><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:878' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:878:hide' style='display: inline;'><br>                                     VA evt_ValorBasket_AA [AA] = VA evt_ValorTotalProdutos [VLRTOTBR]</div><br>                                End If</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:881' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:881:hide' style='display: inline;'><br>                                VA evt_ValorBasket_AA [AA] = 0</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      //</span><br>                      VA evt_ValorTabelaRateio [ANQT] = ([BF mnValorTabela [ANQT]]/[VA evt_QtdDiasTotal [IA08]])*[VA evt_QtdDiasMes [IA08]]<span class='comment'><br>                      //</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:888' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Insert  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:888:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_AnoMesEntradaRateio [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                           VA evt_NrPedidoBilling [NRPEDBIL] -&#62; TK Número do pedido no Billing [NRPEDBIL]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           VA evt_mnZero [NRPREST] -&#62; TK Document (Voucher, Invoice, etc.) [DOC]<br>                           VA evt_AddressNumber [AN8] -&#62; TK Address Number [AN8]<br>                           VA evt_ClienteOrigemString [AA07] -&#62; TK Código do Cliente no Billing [CODCLIBL]<br>                           VA evt_NrAutoriza [NRAUTORI] -&#62; TK Número da Autorização [NRAUTORI]<br>                           BF mnCodAgencia [CMC1] -&#62; TK Commission Code 1 [CMC1]<br>                           BF mnCodRepresent [URAB] -&#62; TK User Reserved Number [URAB]<br>                           VA evt_DataCriacao [DATACRI] -&#62; TK Data de Criação [DATACRI]<br>                           VA evt_PrimeiroDiaMes [DGJ] -&#62; TK Data de início da publicação [DATAINPU]<br>                           VA evt_UltimoDiaMes [DGJ] -&#62; TK Data de fim da publicação [DATAFIPU]<br>                           VA evt_DataEmissao [DATAEMIS] -&#62; TK Data de Emissão [DATAEMIS]<br>                           VA evt_DataVencimento [DATAVENC] -&#62; TK Data de Vencimento [DATAVENC]<br>                           VA evt_Cobertura [COBERTU] -&#62; TK Cobertura [COBERTU]<br>                           VA evt_CodTipoPeriodo [CODTPPER] -&#62; TK Código do tipo do Período [CODTPPER]<br>                           VA evt_CodFormPagto [CDFRMPGT] -&#62; TK Código da Forma de Pagamento [CDFRMPGT]<br>                           BF szCodTipoVenda [CODTPVEN] -&#62; TK Código do Tipo de Venda [CODTPVEN]<br>                           VA evt_CodStatus [CODSTAT] -&#62; TK Código de Status [CODSTAT]<br>                           VA evt_CodOrigem [CODORIGE] -&#62; TK Código de Origem [CODORIGE]<br>                           BF szCentroCusto [MCU] -&#62; TK Business Unit [MCU]<br>                           VA evt_NrCartaoCredito [NRCCRED] -&#62; TK Número do cartão de crédito [NRCCRED]<br>                           VA evt_mnUm [NRPREST] -&#62; TK Quantidade de pagamento [QTDPAGTO]<br>                           VA evt_mnUm [NRPREST] -&#62; TK Número da prestação [NRPREST]<br>                           VA evt_mnUm [NRPREST] -&#62; TK Número total de publicações [NRPUBLI]<br>                           VA evt_DataCriacao [DATACRI] -&#62; TK Data de Carga dos Pedido [DTCRGPED]<br>                           VA evt_Mensal_N [MENSAL] -&#62; TK Mensal [MENSAL]<br>                           VA evt_VlrProdutosBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_ValorTotalProdutos [VLRTOTBR] -&#62; TK Valor Total Líquido [VLRTOTLI]<br>                           VA evt_DiasPagto [DIASPAGT] -&#62; TK Quantidade de dias para pagamento [DIASPAGT]<br>                           BF cCliAge [CLIAGE] -&#62; TK Identificador de Cliente ou Agência [CLIAGE]<br>                           VA evt_BruLiq [BRULIQ] -&#62; TK Identificador de Bruto ou Líquido [BRULIQ]<br>                           VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                           VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                           VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                           VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                           VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                           BF szCondPagto [PTC] -&#62; TK Payment Terms Code [PTC]<br>                           BF mnQtdExemplares [QTDEXEM] -&#62; TK Quantidade de Exemplares [QTDEXEM]<br>                           VA evt_AddressNumberParent [PA8] -&#62; TK Address Number - Parent [PA8]<br>                           VA evt_Basket_EV01 [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                           VA evt_Aglutinador_A301 [A301] -&#62; TK Generic String 01 [A301]<br>                           VA evt_AlphaSpecData08 [AA08] -&#62; TK Alpha Spec. Data 08 [AA08]<br>                           VA evt_mnZero [NRPREST] -&#62; TK Billing - Código do Portador 4 [WBPORTA4]<br>                           VA evt_Desconto_EV02 [EV02] -&#62; TK J.D. EnterpriseOne Event Point 02 [EV02]<br>                           VA evt_ValorBasket_AA [AA] -&#62; TK Amount [AA]<br>                           VA evt_ValorTabelaRateio [ANQT] -&#62; TK Amount - Quoted [ANQT]<br>                           BF cInd1 [AA01] -&#62; TK Alpha Spec. Data 01 [AA01]<br>                           VA evt_ChvBilling [CHVBIL] -&#62; TK Chave no Billing [CHVBIL]<br>                           VA evt_ReportCodeAddBook006 [AC06] -&#62; TK Category Code - Address Book 06 [AC06]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:889' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570364.Insert  [Index 1: Indice]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:889:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_AnoMesEntradaRateio [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           BF mnCodVendedor [AN8R] -&#62; TK Related - Address Number [AN8R]</div><span class='comment'><br>                      // ------</span><br>                      VA evt_DiaPublicacao [DIAPUB] = date_day([VA evt_PrimeiroDiaMes [DGJ]])<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:892' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570113.Insert  [Index 2: CodProd, NrPed, DiaPub]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:892:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           VA evt_DiaPublicacao [DIAPUB] -&#62; TK Dia de publicação [DIAPUB]<br>                           BF mnVlrTotalLiquido [VLRTOTLI] -&#62; TK Valor da publicação [VLRPUB]<br>                           VA evt_CodStatus [CODSTAT] -&#62; TK Situação da Fatura [SITFAT]<br>                           VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                           VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                           VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                           VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                           VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]</div><span class='comment'><br>                      //</span><span class='comment'><br>                      // &#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;</span><span class='comment'><br>                      // Verifica se o produto se encontra na UDC 55/04 (Parcela para Protesto)</span><span class='comment'><br>                      // Se estiver, gravará 'CONTRATO' no campo CONTRATO</span><span class='comment'><br>                      // &#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;&#60;</span><br>                      VA evt_Contrato_CTRT [CTRT] = &#60;Blank&#62;<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:899' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szContrato [CTRT] is equal to "CONTRATO"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:899:hide' style='display: inline;'><br>                           VA evt_UDC_SY [SY] = "55"<br>                           VA evt_UDC_RT [RT] = "04"<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:902' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertNumericToString(B0000045.ConvertNumericToString)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:902:hide' style='display: inline;'><span class='parameters'><br>                                BF mnCodProduto [CODPRODU] -&#62; mnMathNumeric01 [MATH01]<br>                                VA evt_UDC_CodProduto_KY [KY] &#60;- szVideoConstant30A [VC30A]</span></div><br>                           VA evt_UDC_CodProduto_KY [KY] = concat("%", [VA evt_UDC_CodProduto_KY [KY]])<br>                           VA evt_UDC_CodProduto_KY [KY] = concat([VA evt_UDC_CodProduto_KY [KY]], "%")<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:905' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.Select  [Index 1: System, Type, Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:905:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_UDC_SY [SY] = TK Product Code [SY]</span><br>                                <span class='iokey'>VA evt_UDC_RT [RT] = TK User Defined Codes [RT]</span><br>                                <span class='iokey'>VA evt_UDC_CodProduto_KY [KY] Is Like TK User Defined Code [KY]</span><br>                                <span class='iokey'>BF szParcelaProtesto [SFX] = TK Description [DL01]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:906' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.FetchNext  [Index 1: System, Type, Code]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:906:hide' style='display: inline;'><br>                                VA evt_UDC_SY [SY] &#60;- TK Product Code [SY]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:907' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:907:hide' style='display: inline;'><br>                                VA evt_Contrato_CTRT [CTRT] = "CONTRATO"</div><br>                           End If</div><br>                      End If<span class='comment'><br>                      //</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:912' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570120.Insert  [Index 1: CodProduto,NrPedido,AnoMesEnt]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:912:hide' style='display: inline;'><br>                           BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                           VA evt_NrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]<br>                           VA evt_AnoMesEntradaRateio [ANMESENT] -&#62; TK Ano e Mês de Entrada [ANMESENT]<br>                           BF szNomeAutorizador [AUTA] -&#62; TK Nome do Autorizador [AUTORIZA]<br>                           VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                           VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                           VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                           VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                           VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                           BF szTexto1 [DQ01] -&#62; TK AlphaSpec40 [AA40]<br>                           VA evt_Contrato_CTRT [CTRT] -&#62; TK Contrato [CTRT]</div><span class='comment'><br>                      //</span><br>                      VA evt_PrimeiroDiaMes [DGJ] = add_days([VA evt_UltimoDiaMes [DGJ]], "1")<br>                      VA evt_UltimoDiaMes [DGJ] = last_day([VA evt_PrimeiroDiaMes [DGJ]])<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:916' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_UltimoDiaMes [DGJ] is greater than BF jdDataFinalCompet [SVDE]<br>                      And VA evt_PrimeiroDiaMes [DGJ] is less than or equal to BF jdDataFinalCompet [SVDE]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:916:hide' style='display: inline;'><br>                           VA evt_UltimoDiaMes [DGJ] = BF jdDataFinalCompet [SVDE]</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:919' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_PrimeiroDiaMes [DGJ] is less than or equal to BF jdDataFinalCompet [SVDE]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:919:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:920' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>X0010GetNextNumber(X0010.X0010GetNextNumber)<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:920:hide' style='display: inline;'><span class='parameters'><br>                                "57" -&#62; szSystemCode [SY]<br>                                "2" -&#62; mnNextNumberingIndexNo [NNIX]<br>                                VA evt_NrPedido [NRPEDIDO] &#60;- mnNextNumber001 [N001]</span></div></div><br>                      End If</div><br>                 End While<span class='comment'><br>                 //</span><span class='comment'><br>                 // Apura a diferença(arred) nos Pedidos e ajusta no último lido</span><br>                 VA evt_ValorTotalPedidos [VLRTOTBR] = 0<br>                 VA evt_VlrTotalBrutoAcum [VLRTOTBR] = 0<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:927' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:927:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span><br>                      <span class='iokey'>VA evt_DataCriacao [DATACRI] = TK Data de Carga dos Pedido [DTCRGPED]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:928' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:928:hide' style='display: inline;'><br>                      VA evt_AnoMesEntradaUpdate [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>                      VA evt_NrPedidoUpdate [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>                      VA evt_VlrTotalBrutoF570116 [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                      VA evt_VlrTotalBrutoUpdate [VLRTOTBR] &#60;- TK Valor Total Líquido [VLRTOTLI]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:929' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:929:hide' style='display: inline;'><br>                      VA evt_ValorTotalPedidos [VLRTOTBR] = [VA evt_ValorTotalPedidos [VLRTOTBR]]+[VA evt_VlrTotalBrutoUpdate [VLRTOTBR]]<br>                      VA evt_VlrTotalBrutoAcum [VLRTOTBR] = [VA evt_VlrTotalBrutoAcum [VLRTOTBR]]+[VA evt_VlrTotalBrutoF570116 [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:932' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:932:hide' style='display: inline;'><br>                           VA evt_AnoMesEntradaUpdate [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>                           VA evt_NrPedidoUpdate [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>                           VA evt_VlrTotalBrutoF570116 [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_VlrTotalBrutoUpdate [VLRTOTBR] &#60;- TK Valor Total Líquido [VLRTOTLI]</div></div><br>                 End While<br>                 VA evt_VlrTotalBrutoAcum [VLRTOTBR] = round([VA evt_VlrTotalBrutoAcum [VLRTOTBR]], "2")<br>                 VA evt_ValorTotalPedidos [VLRTOTBR] = round([VA evt_ValorTotalPedidos [VLRTOTBR]], "2")<br>                 VA evt_DiferencaBruto [VLRTOTBR] = [BF mnVlrTotalBruto [VLRTOTBR]]-[VA evt_VlrTotalBrutoAcum [VLRTOTBR]]<br>                 VA evt_ValorDiferenca [VLRTOTBR] = [VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI]]-[VA evt_ValorTotalPedidos [VLRTOTBR]]<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:938' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorDiferenca [VLRTOTBR] is not equal to "0"<br>                 Or VA evt_DiferencaBruto [VLRTOTBR] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:938:hide' style='display: inline;'><br>                      VA evt_VlrTotalBrutoUpdate [VLRTOTBR] = [VA evt_VlrTotalBrutoUpdate [VLRTOTBR]]+[VA evt_ValorDiferenca [VLRTOTBR]]<br>                      VA evt_VlrProdutosBruto [VLRTOTBR] = [VA evt_VlrTotalBrutoF570116 [VLRTOTBR]]-[VA evt_ValorDiferenca [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:941' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ProjetoMercado_EV03 [EV03] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:941:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:942' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is equal to "N"<br>                           And VA evt_Basket_EV01 [EV01] is equal to "N"<br>                           And VA evt_ZeraValores [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:942:hide' style='display: inline;'><br>                                VA evt_VlrProdutosBruto [VLRTOTBR] = 0<br>                                VA evt_VlrTotalBrutoUpdate [VLRTOTBR] = 0</div><br>                           End If</div><br>                      End If<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:947' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Update  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:947:hide' style='display: inline;'><br>                           <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                           <span class='iokey'>VA evt_AnoMesEntradaUpdate [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                           <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span><br>                           VA evt_VlrProdutosBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_VlrTotalBrutoUpdate [VLRTOTBR] -&#62; TK Valor Total Líquido [VLRTOTLI]</div></div><br>                 End If<span class='comment'><br>                 //</span><span class='comment'><br>                 // Apura a diferença(arred) nas Parcelas e ajusta na última lida</span><br>                 VA evt_AcumulaIRRF_F570152 [AA] = 0<br>                 VA evt_VlrTotalLiquidoAcumF570116 [VLRTOTLI] = 0<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:953' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:953:hide' style='display: inline;'><br>                      <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                      <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span><br>                      <span class='iokey'>VA evt_DataCriacao [DATACRI] = TK Data de Carga dos Pedido [DTCRGPED]</span></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:954' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:954:hide' style='display: inline;'><br>                      VA evt_AnoMesEntradaUpdate [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>                      VA evt_NrPedidoUpdate [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>                      VA evt_VlrTotalBrutoUpdate [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:955' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:955:hide' style='display: inline;'><br>                      VA evt_ValorTotalProdutos [VLRTOTBR] = 0<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:957' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Select  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:957:hide' style='display: inline;'><br>                           <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                           <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:958' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.FetchNext  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:958:hide' style='display: inline;'><br>                           VA evt_NrPublicacoesUpdate [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                           VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                           VA evt_SubledgerUpdate [SBL] &#60;- TK Subledger - G/L [SBL]<br>                           VA evt_ValorIRRF_F570152 [AA] &#60;- TK Math Numeric 01 [MATH01]</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:959' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:959:hide' style='display: inline;'><br>                           VA evt_ValorTotalProdutos [VLRTOTBR] = [VA evt_ValorTotalProdutos [VLRTOTBR]]+[VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR]]<br>                           VA evt_AcumulaIRRF_F570152 [AA] = [VA evt_AcumulaIRRF_F570152 [AA]]+[VA evt_ValorIRRF_F570152 [AA]]<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:962' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.FetchNext  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:962:hide' style='display: inline;'><br>                                VA evt_NrPublicacoesUpdate [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                                VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                                VA evt_SubledgerUpdate [SBL] &#60;- TK Subledger - G/L [SBL]<br>                                VA evt_ValorIRRF_F570152 [AA] &#60;- TK Math Numeric 01 [MATH01]</div></div><br>                      End While<br>                      VA evt_ValorDiferenca [VLRTOTBR] = [VA evt_VlrTotalBrutoUpdate [VLRTOTBR]]-[VA evt_ValorTotalProdutos [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:965' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorDiferenca [VLRTOTBR] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:965:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:966' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Select  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:966:hide' style='display: inline;'><br>                                <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:967' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.FetchNext  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:967:hide' style='display: inline;'><br>                                VA evt_NrPublicacoesUpdate [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                                VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]<br>                                VA evt_SubledgerUpdate [SBL] &#60;- TK Subledger - G/L [SBL]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:968' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:968:hide' style='display: inline;'><br>                                VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR] = [VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR]]+[VA evt_ValorDiferenca [VLRTOTBR]]<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:970' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Update  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:970:hide' style='display: inline;'><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span><br>                                     <span class='iokey'>VA evt_NrPublicacoesUpdate [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>                                     VA evt_VlrTotalBrutoProdutoUpdate [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                                     <span class='iokey'>VA evt_SubledgerUpdate [SBL] = TK Subledger - G/L [SBL]</span></div></div><br>                           End If</div><br>                      End If<br>                      VA evt_VlrTotalLiquidoAcumF570116 [VLRTOTLI] = ([VA evt_VlrTotalLiquidoAcumF570116 [VLRTOTLI]]+[VA evt_VlrTotalBrutoUpdate [VLRTOTBR]])+[VA evt_ValorDiferenca [VLRTOTBR]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:974' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 6: CodProd,NrPedBil]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:974:hide' style='display: inline;'><br>                           VA evt_AnoMesEntradaUpdate [ANMESENT] &#60;- TK Ano e Mês de Entrada [ANMESENT]<br>                           VA evt_NrPedidoUpdate [NRPEDIDO] &#60;- TK Número do Pedido [NRPEDIDO]<br>                           VA evt_VlrTotalBrutoUpdate [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]</div></div><br>                 End While<span class='comment'><br>                 // *****************</span><span class='comment'><br>                 // Retenção IRRF</span><span class='comment'><br>                 // *****************</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:979' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CalculaIRRF [EV01] is equal to "S"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:979:hide' style='display: inline;'><br>                      VA evt_ValorDiferenca [VLRTOTBR] = [VA evt_VlrTotalLiquidoF5701ZB [VLRTOTLI]]-[VA evt_VlrTotalLiquidoAcumF570116 [VLRTOTLI]]<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:981' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ValorDiferenca [VLRTOTBR] is not equal to "0"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:981:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:982' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Select  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:982:hide' style='display: inline;'><br>                                <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:983' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.FetchNext  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:983:hide' style='display: inline;'><br>                                VA evt_NrPublicacoesUpdate [NRPUBLI] &#60;- TK Número total de publicações [NRPUBLI]<br>                                VA evt_SubledgerUpdate [SBL] &#60;- TK Subledger - G/L [SBL]<br>                                VA evt_ValorIRRF_F570152 [AA] &#60;- TK Math Numeric 01 [MATH01]</div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:984' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:984:hide' style='display: inline;'><br>                                VA evt_ValorIRRF_F570152 [AA] = [VA evt_ValorIRRF_F570152 [AA]]+[VA evt_ValorDiferenca [VLRTOTBR]]<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:986' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570152.Update  [Index 1: CodProdu,NrPedido,Produto]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:986:hide' style='display: inline;'><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     <span class='iokey'>VA evt_NrPedidoUpdate [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span><br>                                     <span class='iokey'>VA evt_NrPublicacoesUpdate [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>                                     <span class='iokey'>VA evt_SubledgerUpdate [SBL] = TK Subledger - G/L [SBL]</span><br>                                     VA evt_ValorIRRF_F570152 [AA] -&#62; TK Math Numeric 01 [MATH01]</div></div><br>                           End If</div><br>                      End If</div><br>                 End If<span class='comment'><br>                 // *****************</span><span class='comment'><br>                 // Retenção IRRF</span><span class='comment'><br>                 // *****************</span><span class='comment'><br>                 // Fim Rateio</span></div><br>            End If<span class='comment'><br>            //</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:996' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchSingle  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:996:hide' style='display: inline;'><br>                 <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                 <span class='iokey'>VA evt_AnoMesEntradaPedido [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                 <span class='iokey'>BF mnNrPedido [NRPEDIDO] = TK Número do Pedido [NRPEDIDO]</span></div><span class='comment'><br>            //</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:998' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:998:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = "Faturamento carregado com sucesso#"<br>                 BF cOperacao [C9TYTT] = "S"<br>                 BF cIndCarga [EV01] = "N"<br>                 BF szStatus [LDCS] = "OK"<span class='comment'><br>                 //</span><span class='comment'><br>                 // Grava email do Pedido</span><br>                 VA evt_EmailAddressow [EMAL] = substr([BF szTexto1 [DQ01]], "0", "6")<br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1006' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to "EMAIL-"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1006:hide' style='display: inline;'><br>                      BF szTexto1 [DQ01] = substr([BF szTexto1 [DQ01]], "6", "64")<br>                      VA evt_EmailAddressow [EMAL] = substr([BF szTexto2 [DQ02]], "0", "6")<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1009' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to "EMAIL-"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1009:hide' style='display: inline;'><br>                           BF szTexto2 [DQ02] = substr([BF szTexto2 [DQ02]], "6", "64")</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1011' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1011:hide' style='display: inline;'><br>                           BF szTexto2 [DQ02] = &#60;NULL&#62;</div><br>                      End If<br>                      VA evt_EmailAddressow [EMAL] = concat([BF szTexto1 [DQ01]], [BF szTexto2 [DQ02]])</div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1015' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1015:hide' style='display: inline;'><br>                      VA evt_EmailAddressow [EMAL] = substr([BF szTexto2 [DQ02]], "0", "6")<br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1017' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to "EMAIL-"<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1017:hide' style='display: inline;'><br>                           VA evt_EmailAddressow [EMAL] = substr([BF szTexto2 [DQ02]], "6", "64")</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1019' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1019:hide' style='display: inline;'><br>                           VA evt_EmailAddressow [EMAL] = &#60;NULL&#62;</div><br>                      End If</div><br>                 End If<span class='comment'><br>                 //</span><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1024' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to or empty &#60;Blank&#62;<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1024:hide' style='display: inline;'></div><br>                <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1025' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1025:hide' style='display: inline;'><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1026' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598H.FetchSingle  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1026:hide' style='display: inline;'><br>                           <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                           <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                           <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                           <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                           <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1027' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1027:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1028' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598H.Update  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1028:hide' style='display: inline;'><br>                                <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                                <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                                <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                                <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>                                VA evt_EmailAddressow [EMAL] -&#62; TK Version Description [DESC2000]</div></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1029' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1029:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1030' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598H.Insert  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1030:hide' style='display: inline;'><br>                                BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                                BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                                BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                                BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                                BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                                VA evt_EmailAddressow [EMAL] -&#62; TK Version Description [DESC2000]</div></div><br>                      End If<span class='comment'><br>                      // Grava LOG</span><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1033' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.FetchSingle  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1033:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_DateUpdated [UPMJ] = TK Date - Updated [UPMJ]</span><br>                           <span class='iokey'>VA evt_TimeLastUpdated [UPMT] = TK Time - Last Updated [UPMT]</span><br>                           <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                           <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                           <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                           <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                           <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span></div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1034' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1034:hide' style='display: inline;'><span class='comment'><br>                           // Loop para sempre inserir, mas controla para não ser infinito</span><br>                           VA evt_mnUm [NRPREST] = "1"<span class='comment'><br>                           // Usada essa variavel para controlar o Loop</span><br>                           VA evt_QtdDiasMes [IA08] = "100"<br>                           VA evt_mnNumAux [IA07] = VA evt_mnUm [NRPREST]<br>                           VA evt_TimeLastUpdAux [UPMT] = [VA evt_TimeLastUpdated [UPMT]]+[VA evt_mnNumAux [IA07]]<br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1041' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.FetchSingle  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1041:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_DateUpdated [UPMJ] = TK Date - Updated [UPMJ]</span><br>                                <span class='iokey'>VA evt_TimeLastUpdAux [UPMT] = TK Time - Last Updated [UPMT]</span><br>                                <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                                <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                                <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                                <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1042' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<br>                           And VA evt_mnNumAux [IA07] is less than VA evt_QtdDiasMes [IA08]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1042:hide' style='display: inline;'><br>                                VA evt_mnNumAux [IA07] = [VA evt_mnNumAux [IA07]]+[VA evt_mnUm [NRPREST]]<br>                                VA evt_TimeLastUpdAux [UPMT] = [VA evt_TimeLastUpdated [UPMT]]+[VA evt_mnNumAux [IA07]]<br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1045' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.FetchSingle  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1045:hide' style='display: inline;'><br>                                     <span class='iokey'>VA evt_DateUpdated [UPMJ] = TK Date - Updated [UPMJ]</span><br>                                     <span class='iokey'>VA evt_TimeLastUpdAux [UPMT] = TK Time - Last Updated [UPMT]</span><br>                                     <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                                     <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                                     <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span></div></div><br>                           End While<span class='comment'><br>                           // Poderemos ter TimeLastUpdated com mais de 59 minutos,</span><span class='comment'><br>                           // mas, foi feito testes no JDE e isso não causa problemas</span><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1049' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA07] is greater than VA evt_QtdDiasMes [IA08]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1049:hide' style='display: inline;'><span class='comment'><br>                                // Se não encontrou um TimeLastUpdated livre, atualiza o último verificado</span><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1051' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.Update  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1051:hide' style='display: inline;'><br>                                     <span class='iokey'>BF jdDateUpdated [UPMJ] = TK Date - Updated [UPMJ]</span><br>                                     <span class='iokey'>VA evt_TimeLastUpdAux [UPMT] = TK Time - Last Updated [UPMT]</span><br>                                     <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>                                     <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                                     <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>                                     <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>                                     <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>                                     VA evt_EmailAddressow [EMAL] -&#62; TK Version Description [DESC2000]</div></div><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1052' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1052:hide' style='display: inline;'><br>                               <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1053' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.Insert  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1053:hide' style='display: inline;'><br>                                     VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                                     VA evt_TimeLastUpdAux [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                                     BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                                     BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                                     BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                                     BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                                     BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                                     VA evt_EmailAddressow [EMAL] -&#62; TK Version Description [DESC2000]</div></div><br>                           End If</div><br>                     <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1055' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1055:hide' style='display: inline;'><br>                          <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1056' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F571598Z.Insert  [Index 1: Primaria]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1056:hide' style='display: inline;'><br>                                VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                                VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                                BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                                BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                                BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                                BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                                BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                                VA evt_EmailAddressow [EMAL] -&#62; TK Version Description [DESC2000]</div></div><br>                      End If</div><br>                 End If<span class='comment'><br>                 //</span></div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1060' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1060:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = "Não gerou o Pedido no Faturamento (F570116)#"<br>                 BF cOperacao [C9TYTT] = "N"<br>                 BF szStatus [LDCS] = "ER"</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // Quando tem Rateio, atualiza com o primeiro Pedido</span><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1067' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701ZB.Update  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1067:hide' style='display: inline;'><br>                 <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                 <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                 BF cIndCarga [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                 BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>                 BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>                 BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]<br>                 VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                 VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                 VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                 VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                 VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                 BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div><br>           <div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1068' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Update  [Index 1: ChvPrincipal]<div id='4b4c037b-ffcb-432e-a815-7d2ae78dc081:1068:hide' style='display: inline;'><br>                 <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                 <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                 BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>                 BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>                 BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]<br>                 VA evt_UserId [USER] -&#62; TK User ID [USER]<br>                 VA evt_WorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                 VA evt_ProgramId [PID] -&#62; TK Program ID [PID]<br>                 VA evt_DateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                 VA evt_TimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                 BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div><span class='comment'><br>            //</span></div><br>       End If</div><br>  End If<span class='comment'><br>  //</span></div></div><div class='section'>EVENTS<div class='objectheader'>NER: CargaPedidosPreFaturamentoCarga <BR>Event GUID: b688808d-f095-425f-89c7-519ebfc8f65c</div><div class='er'><div class='dstrmembers'><B>Data Structure: D5701ZB - WS - BIF FT - Tabela de Pedidos (F570116)                   </B><BR>BF szDataHora [DATETIME]<BR>BF mnSequencial [55SEQNCL]<BR>BF szChvBilling [CHVBIL]<BR>BF szCodEmpresa [CEMP]<BR>BF mnCodProduto [CODPRODU]<BR>BF szMesCompetencia [MSCP]<BR>BF szAnoCompetencia [ANCP]<BR>BF mnNroPedidoBilling [IA10]<BR>BF cCliAge [CLIAGE]<BR>BF mnCodAgencia [CMC1]<BR>BF mnCodRepresent [URAB]<BR>BF szCodCadastroOrigem [55CDCADO]<BR>BF jdDataInicialCompet [SVDB]<BR>BF jdDataFinalCompet [SVDE]<BR>BF mnVlrTotalBruto [VLRTOTBR]<BR>BF mnVlrTotalLiquido [VLRTOTLI]<BR>BF szCodTipoVenda [CODTPVEN]<BR>BF cCarteiraBanco [CARBAN]<BR>BF szNumeroBancario [AA15]<BR>BF jdDataVencimento [DDU]<BR>BF szCondPagto [PTC]<BR>BF szNrAutorizacao [NRAUTORI]<BR>BF cIndCarga [EV01]<BR>BF cIndBruLiq [BRULIQ]<BR>BF szCodOrigem [CODORIGE]<BR>BF szCentroCusto [MCU]<BR>BF mnCodVendedor [AN8R]<BR>BF szAutorizador [AUTORIZA]<BR>BF szContrato [CTRT]<BR>BF szParcelaProtesto [SFX]<BR>BF mnValorTabela [ANQT]<BR>BF cIndFatMinimo [FATMIN]<BR>BF cIndBasket [ACTAPP]<BR>BF cIndDesconto [EV02]<BR>BF szNomeAutorizador [AUTA]<BR>BF szTexto1 [DQ01]<BR>BF szTexto2 [DQ02]<BR>BF cInd1 [AA01]<BR>BF szMensagem [MGTX]<BR>BF cOperacao [C9TYTT]<BR>BF szStatus [LDCS]<BR>BF szUserId [USER]<BR>BF szWorkStationId [JOBN]<BR>BF szProgramId [PID]<BR>BF jdDateUpdated [UPMJ]<BR>BF mnTimeLastUpdated [UPMT]<BR>BF mnNrPedido [NRPEDIDO]<BR>BF mnQtdExemplares [QTDEXEM]<BR></div>----------------------------------------</BR>Event Level Variables</BR>----------------------------------------</BR>evt_AnoMesEntradaAux [ANMESENT]<br>evt_ArHoldInvoices [HDAR]<br>evt_NrPedidoBilling [NRPEDBIL]<br>evt_SpecialHandlingCode [SPHD]<br>evt_CodStatus [CODSTAT]<br>evt_LogPrograma [PID]<br>evt_LogUsuario [USER]<br>evt_LogEstacao [JOBN]<br>evt_LogData [UPMJ]<br>evt_LogHora [UPMT]<br>evt_VlrTotalBruto [VLRTOTBR]<br>evt_VlrTotalBrutoAcm [VLRTOTBR]<br>evt_AnoMesEmissaoFat [ANMEEMI]<br>evt_szAsterisco [TYPT]<br>evt_ProductCode [SY]<br>evt_UserDefinedCodes [RT]<br>evt_ChvBil_AA10 [AA10]<br>evt_BilingExcecao [EV01]<br>evt_EmailAddressow [EMAL]<br>----------------------------------------</BR><span class='comment'>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:2' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:2:hide' style='display: inline;'><span class='parameters'><br>       VA evt_LogUsuario [USER] &#60;- szUserName [USER]<br>       VA evt_LogData [UPMJ] &#60;- jdDate [DTE]<br>       VA evt_LogHora [UPMT] &#60;- mnTime [TME0]<br>       VA evt_LogEstacao [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><br>  VA evt_LogPrograma [PID] = "N5701ZB"<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:5' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CargaPedidosPreFaturamentoValida(N5701ZB.CargaPedidosPreFaturamentoValida)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:5:hide' style='display: inline;'><span class='parameters'><br>       BF szChvBilling [CHVBIL] -&#62; szChvBilling [CHVBIL]<br>       BF szCodEmpresa [CEMP] -&#62; szCodEmpresa [CEMP]<br>       BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>       BF szMesCompetencia [MSCP] &#60;&#62; szMesCompetencia [MSCP]<br>       BF szAnoCompetencia [ANCP] &#60;&#62; szAnoCompetencia [ANCP]<br>       BF mnNroPedidoBilling [IA10] -&#62; mnNroPedidoBilling [IA10]<br>       BF szMensagem [MGTX] &#60;- szMensagem [MGTX]<br>       VA evt_AnoMesEmissaoFat [ANMEEMI] &#60;- mnAnoMesEmissao [ANMEEMI]</span></div><span class='comment'><br>  //</span><span class='comment'><br>  // Cliente/Agência</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:8' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is not equal to("A","C")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:8:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Cli/Age inválido (A/C)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Agência</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:13' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodAgencia [CMC1] is equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:13:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:14' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCliAge [CLIAGE] is equal to "A"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:14:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Agência não informada#")</div><br>       End If</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:17' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:17:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:18' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:18:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodAgencia [CMC1] = TK Address Number [AN8]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:19' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:19:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Agência inválida (F0101)#")</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Representante</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:25' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodRepresent [URAB] is not equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:25:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:26' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:26:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodRepresent [URAB] = TK Address Number [AN8]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:27' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:27:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Representante inválido (F0101)#")</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Cliente no Billing</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:33' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodCadastroOrigem [55CDCADO] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:33:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Nro Cliente no Billing não informado#")</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:35' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:35:hide' style='display: inline;'><br>       VA evt_AnoMesEntradaAux [ANMESENT] = "0"<br>       BF szCodCadastroOrigem [55CDCADO] = ltrim([BF szCodCadastroOrigem [55CDCADO]], &#60;Blank&#62;)<br>       BF szCodCadastroOrigem [55CDCADO] = rtrim([BF szCodCadastroOrigem [55CDCADO]], &#60;Blank&#62;)<br>       BF szCodCadastroOrigem [55CDCADO] = lpad([BF szCodCadastroOrigem [55CDCADO]], "0", "7")<br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:40' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cOperacao [C9TYTT] is not equal to "V"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:40:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:41' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szStatus [LDCS] is not equal to "BF"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:41:hide' style='display: inline;'><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:42' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F550106.Select  [Index 1: Indice]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:42:hide' style='display: inline;'><br>                      <span class='iokey'>BF szChvBilling [CHVBIL] = TK Alpha Spec. Data 02 [AA02]</span><br>                      <span class='iokey'>BF szCodCadastroOrigem [55CDCADO] = TK Alpha Spec. Data 07 [AA07]</span><br>                      <span class='iokey'>BF cCliAge [CLIAGE] = TK Alpha Spec. Data 01 [AA01]</span></div><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:43' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F550106.FetchNext  [Index 1: Indice]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:43:hide' style='display: inline;'><br>                      VA evt_AnoMesEntradaAux [ANMESENT] &#60;- TK Address Number [AN8]</div><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:44' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<br>                 And VA evt_AnoMesEntradaAux [ANMESENT] is greater than "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:44:hide' style='display: inline;'><br>                     <div id='b688808d-f095-425f-89c7-519ebfc8f65c:45' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:45:hide' style='display: inline;'><br>                           <span class='iokey'>VA evt_AnoMesEntradaAux [ANMESENT] = TK Address Number [AN8]</span></div><br>                     <div id='b688808d-f095-425f-89c7-519ebfc8f65c:46' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:46:hide' style='display: inline;'><br>                           BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Cliente não cadastrado (F0101)#")</div><br>                     <div id='b688808d-f095-425f-89c7-519ebfc8f65c:48' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:48:hide' style='display: inline;'><br>                          <div id='b688808d-f095-425f-89c7-519ebfc8f65c:49' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F03012.FetchSingle  [Index 3: ADDRESS_NO]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:49:hide' style='display: inline;'><br>                                <span class='iokey'>VA evt_AnoMesEntradaAux [ANMESENT] = TK Address Number [AN8]</span><br>                                VA evt_ArHoldInvoices [HDAR] &#60;- TK Hold Invoices [HDAR]</div><br>                          <div id='b688808d-f095-425f-89c7-519ebfc8f65c:50' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:50:hide' style='display: inline;'><br>                               <div id='b688808d-f095-425f-89c7-519ebfc8f65c:51' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_ArHoldInvoices [HDAR] is equal to "Y"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:51:hide' style='display: inline;'><br>                                     BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Cliente bloqueado (F03012.HDAR)#")</div><br>                                End If</div><br>                          <div id='b688808d-f095-425f-89c7-519ebfc8f65c:54' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:54:hide' style='display: inline;'><br>                                BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Cliente não cadastrado (F03012)#")</div><br>                           End If</div><br>                      End If</div><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:58' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:58:hide' style='display: inline;'><br>                      BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Cliente no Billing não cadastrado (F550106)#")</div><br>                 End If</div><br>            End If</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Data Inicial de Competência</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:66' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataInicialCompet [SVDB] is equal to Null Date<div id='b688808d-f095-425f-89c7-519ebfc8f65c:66:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Data Inic.Comp.não informada#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Data Final de Competência</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:71' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataFinalCompet [SVDE] is equal to Null Date<div id='b688808d-f095-425f-89c7-519ebfc8f65c:71:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Data Final Comp.não informada#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Período de Competência</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:76' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataInicialCompet [SVDB] is greater than BF jdDataFinalCompet [SVDE]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:76:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Data Inic.Comp.posterior a Data Final Comp.#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Quantidade de Exemplares</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:81' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnVlrTotalBruto [VLRTOTBR] is greater than "0"<br>  And BF mnQtdExemplares [QTDEXEM] is less than "0"<br>  Or BF mnVlrTotalBruto [VLRTOTBR] is less than "0"<br>  And BF mnQtdExemplares [QTDEXEM] is greater than "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:81:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Quantidade incompatível com Valor#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Valor Bruto</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:86' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnVlrTotalBruto [VLRTOTBR] is equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:86:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Valor Bruto não informado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Valor Líquido</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:91' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnVlrTotalLiquido [VLRTOTLI] is equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:91:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Valor Líquido não informado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Código do Tipo de Venda</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:96' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:96:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Código do Tipo de Venda não informado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Carteira/Banco</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:101' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cCarteiraBanco [CARBAN] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:101:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Carteira/Banco não informado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Data de Vencimento / Condição de Pagamento</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:106' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataVencimento [DDU] is equal to Null Date<br>  And BF szCondPagto [PTC] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:106:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "DtVenc e CondPag não informados#")</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:108' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:108:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:109' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataVencimento [DDU] is not equal to Null Date<div id='b688808d-f095-425f-89c7-519ebfc8f65c:109:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:110' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "B"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:110:hide' style='display: inline;'><br>                 BF szCodTipoVenda [CODTPVEN] = "P"</div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:112' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:112:hide' style='display: inline;'><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:113' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodTipoVenda [CODTPVEN] is equal to "C"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:113:hide' style='display: inline;'><br>                      BF szCodTipoVenda [CODTPVEN] = "R"</div><br>                 End If</div><br>            End If<span class='comment'><br>            // Busca o prazo mínimo para o Vencimento</span><br>            VA evt_ProductCode [SY] = "57"<br>            VA evt_UserDefinedCodes [RT] = "BI"<br>            VA evt_ChvBil_AA10 [AA10] = concat("        ", [BF szChvBilling [CHVBIL]])<br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:121' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0005.FetchSingle  [Index 1: System, Type, Code]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:121:hide' style='display: inline;'><br>                 <span class='iokey'>VA evt_ProductCode [SY] = TK Product Code [SY]</span><br>                 <span class='iokey'>VA evt_UserDefinedCodes [RT] = TK User Defined Codes [RT]</span><br>                 <span class='iokey'>VA evt_ChvBil_AA10 [AA10] = TK User Defined Code [KY]</span></div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:122' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:122:hide' style='display: inline;'><br>                 VA evt_BilingExcecao [EV01] = "S"</div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:124' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:124:hide' style='display: inline;'><br>                 VA evt_BilingExcecao [EV01] = "N"</div><br>            End If<br>            VA evt_EmailAddressow [EMAL] = substr([BF szTexto2 [DQ02]], "0", "6")<br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:128' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetUDC(X0005.GetUDC)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:128:hide' style='display: inline;'><span class='parameters'><br>                 "57" -&#62; szSystemCode [SY]<br>                 "TV" -&#62; szRecordTypeCode [RT]<br>                 BF szCodTipoVenda [CODTPVEN] -&#62; szUserDefinedCode [KY]<br>                 "3,00" -&#62; mnKeyFieldLength [AS]<br>                 VA evt_SpecialHandlingCode [SPHD] &#60;- szSpecialHandlingCode [SPHD]<br>                 "1" -&#62; cSuppressErrorMessage [EV01]</span></div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:129' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>RemoveNonNumericCharsFromStr(N5504601.RemoveNonNumericCharsFromStr)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:129:hide' style='display: inline;'><span class='parameters'><br>                 VA evt_SpecialHandlingCode [SPHD] &#60;&#62; szString [DS01]</span></div><br>            VA evt_AnoMesEntradaAux [ANMESENT] = [VA evt_SpecialHandlingCode [SPHD]]<br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:131' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_EmailAddressow [EMAL] is equal to "EMAIL-"<br>            And VA evt_BilingExcecao [EV01] is equal to "S"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:131:hide' style='display: inline;'><br>                 BF jdDateUpdated [UPMJ] = add_days(date_today(), "2")</div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:133' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:133:hide' style='display: inline;'><br>                 BF jdDateUpdated [UPMJ] = add_days(date_today(), [VA evt_AnoMesEntradaAux [ANMESENT]])</div><br>            End If<br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:136' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF jdDataVencimento [DDU] is less than BF jdDateUpdated [UPMJ]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:136:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Data de Vencimento incompatível com Tipo de Venda: ")<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], [BF jdDataVencimento [DDU]])<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "&#60;")<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], [BF jdDateUpdated [UPMJ]])<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "(")<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], [VA evt_AnoMesEntradaAux [ANMESENT]])<br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], " dias)#")</div><br>            End If</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:145' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:145:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:146' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCondPagto [PTC] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:146:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Condição de Pagamento não informada#")</div><br>            End If</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Marca de Carga</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:153' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndCarga [EV01] is not equal to "S"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:153:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Pedido com marca que já foi carregado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Bruto/Líquido</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:158' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndBruLiq [BRULIQ] is not equal to("B","L")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:158:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Bru/Liq inválido (B/L)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Código de Origem</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:163' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCodOrigem [CODORIGE] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:163:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Código de Origem não informado#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Vendedor</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:168' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodVendedor [AN8R] is not equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:168:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:169' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0101.FetchSingle  [Index 1: Address #]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:169:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodVendedor [AN8R] = TK Address Number [AN8]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:170' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:170:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Vendedor inválido (F0101)#")</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Marca de Faturamento Mínimo</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:176' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndFatMinimo [FATMIN] is not equal to("N","S")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:176:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Fatur.Mínimo inválido (S/N)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Basket</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:181' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndBasket [ACTAPP] is not equal to("N","S")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:181:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Basket inválido (S/N)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Desconto</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:186' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndDesconto [EV02] is not equal to("N","S")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:186:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Desconto inválido (S/N)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // AA01</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:191' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cInd1 [AA01] is not equal to("N","S")<div id='b688808d-f095-425f-89c7-519ebfc8f65c:191:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "AA01 inválido (S/N)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Pedido Billing bloqueado no JDE</span><span class='comment'><br>  //</span><br>  VA evt_szAsterisco [TYPT] = "*"<br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:198' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szAnoCompetencia [ANCP] is equal to VA evt_szAsterisco [TYPT]<br>  And BF szMesCompetencia [MSCP] is equal to VA evt_szAsterisco [TYPT]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:198:hide' style='display: inline;'><br>       VA evt_AnoMesEntradaAux [ANMESENT] = VA evt_AnoMesEmissaoFat [ANMEEMI]</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:200' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:200:hide' style='display: inline;'><br>       VA evt_AnoMesEntradaAux [ANMESENT] = [BF szAnoCompetencia [ANCP]]<br>       VA evt_AnoMesEntradaAux [ANMESENT] = [VA evt_AnoMesEntradaAux [ANMESENT]]*100<br>       VA evt_AnoMesEntradaAux [ANMESENT] = [VA evt_AnoMesEntradaAux [ANMESENT]]+[BF szMesCompetencia [MSCP]]</div><br>  End If<span class='comment'><br>  //</span><br>  VA evt_NrPedidoBilling [NRPEDBIL] = [BF mnNroPedidoBilling [IA10]]<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:208' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:208:hide' style='display: inline;'><br>       <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>       <span class='iokey'>VA evt_AnoMesEntradaAux [ANMESENT] = TK Ano e Mês de Entrada [ANMESENT]</span><br>       <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span></div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:209' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:209:hide' style='display: inline;'><br>       VA evt_CodStatus [CODSTAT] &#60;- TK Código de Status [CODSTAT]</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:210' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:210:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:211' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodStatus [CODSTAT] is equal to "BLQ"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:211:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Pedido Billing bloqueado no JDE (F570116.BLQ)#")</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:213' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:213:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:214' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_CodStatus [CODSTAT] is equal to "FAT"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:214:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Pedido Billing faturado no JDE (F570116.FAT)#")</div><br>            End If</div><br>       End If<br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:218' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:218:hide' style='display: inline;'><br>            VA evt_CodStatus [CODSTAT] &#60;- TK Código de Status [CODSTAT]</div></div><br>  End If<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:221' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cOperacao [C9TYTT] is not equal to "V"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:221:hide' style='display: inline;'><br>       BF szStatus [LDCS] = "OK"<br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:223' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Select  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:223:hide' style='display: inline;'><br>            <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>            <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>            <span class='iokey'>BF szChvBilling [CHVBIL] = TK Chave no Billing [CHVBIL]</span><br>            <span class='iokey'>BF szCodEmpresa [CEMP] = TK Codigo da Empresa [CEMP]</span><br>            <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>            <span class='iokey'>BF szMesCompetencia [MSCP] = TK Mes - Competencia [MSCP]</span><br>            <span class='iokey'>BF szAnoCompetencia [ANCP] = TK Data de Competencia [ANCP]</span><br>            <span class='iokey'>BF mnNroPedidoBilling [IA10] = TK Numeric Spec. Data 10 [IA10]</span><br>            <span class='iokey'>BF szStatus [LDCS] = TK Status - Confirmed Load [LDCS]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:224' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:224:hide' style='display: inline;'><br>            VA evt_VlrTotalBruto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:225' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:225:hide' style='display: inline;'><br>            VA evt_VlrTotalBrutoAcm [VLRTOTBR] = [VA evt_VlrTotalBrutoAcm [VLRTOTBR]]+[VA evt_VlrTotalBruto [VLRTOTBR]]<br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:227' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchNext  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:227:hide' style='display: inline;'><br>                 VA evt_VlrTotalBruto [VLRTOTBR] &#60;- TK Valor Total Bruto [VLRTOTBR]</div></div><br>       End While<br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:229' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cIndBruLiq [BRULIQ] is equal to "L"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:229:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:230' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_VlrTotalBrutoAcm [VLRTOTBR] is not equal to BF mnVlrTotalLiquido [VLRTOTLI]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:230:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Total da Contabilização não bate com Total Líquido do Pedido (F5711ZB)#")</div><br>            End If</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:233' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:233:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:234' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_VlrTotalBrutoAcm [VLRTOTBR] is not equal to BF mnVlrTotalBruto [VLRTOTBR]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:234:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Total da Contabilização não bate com Total Bruto do Pedido (F5711ZB)#")</div><br>            End If</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:240' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szMensagem [MGTX] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:240:hide' style='display: inline;'><br>       BF szStatus [LDCS] = "OK"</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:242' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:242:hide' style='display: inline;'><br>       BF szStatus [LDCS] = "ER"</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Pedido Billing-só Aviso. O Pedido é reenviado e excluído antes de regerar</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:247' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchSingle  [Index 6: CodProd,NrPedBil]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:247:hide' style='display: inline;'><br>       <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>       <span class='iokey'>VA evt_NrPedidoBilling [NRPEDBIL] = TK Número do pedido no Billing [NRPEDBIL]</span></div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:248' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:248:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Aviso: Pedido Billing já existe no JDE (F570116)#")</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Lista Data Inicial/Final Competência para identificar problema de conversão</span><br>  BF szMensagem [MGTX] = concat("&#60;#", [BF szMensagem [MGTX]])<br>  BF szMensagem [MGTX] = concat([BF jdDataFinalCompet [SVDE]], [BF szMensagem [MGTX]])<br>  BF szMensagem [MGTX] = concat("&#62;", [BF szMensagem [MGTX]])<br>  BF szMensagem [MGTX] = concat("&#60;#", [BF szMensagem [MGTX]])<br>  BF szMensagem [MGTX] = concat([BF jdDataInicialCompet [SVDB]], [BF szMensagem [MGTX]])<br>  BF szMensagem [MGTX] = concat("&#62;", [BF szMensagem [MGTX]])<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:260' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:260:hide' style='display: inline;'><span class='parameters'><br>       BF szUserId [USER] &#60;- szUserName [USER]<br>       BF jdDateUpdated [UPMJ] &#60;- jdDate [DTE]<br>       BF mnTimeLastUpdated [UPMT] &#60;- mnTime [TME0]<br>       BF szWorkStationId [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:262' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szDataHora [DATETIME] is equal to or empty &#60;Blank&#62;<div id='b688808d-f095-425f-89c7-519ebfc8f65c:262:hide' style='display: inline;'><span class='comment'><br>       // Tipo de Processamento = V - Validar, apenas verificar as inconsistências</span><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:264' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnSequencial [55SEQNCL] is equal to "0"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:264:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:265' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cOperacao [C9TYTT] is equal to "V"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:265:hide' style='display: inline;'><br>                 BF mnSequencial [55SEQNCL] = "1"</div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:267' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:267:hide' style='display: inline;'><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:268' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>X0010GetNextNumber(X0010.X0010GetNextNumber)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:268:hide' style='display: inline;'><span class='parameters'><br>                      "58" -&#62; szSystemCode [SY]<br>                      "10" -&#62; mnNextNumberingIndexNo [NNIX]<br>                      BF mnSequencial [55SEQNCL] &#60;- mnNextNumber001 [N001]</span></div></div><br>            End If</div><br>       End If<span class='comment'><br>       //</span><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:272' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertandFormatDatas(N5576B02.ConvertandFormatDatas)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:272:hide' style='display: inline;'><span class='parameters'><br>            BF szDataHora [DATETIME] &#60;- szStringOut [DS02]<br>            BF jdDateUpdated [UPMJ] -&#62; jdDateIn [BRADLJ]<br>            "T" -&#62; cTypeIn [ER001]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:273' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>ConvertandFormatDatas(N5576B02.ConvertandFormatDatas)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:273:hide' style='display: inline;'><span class='parameters'><br>            BF szProgramId [PID] &#60;- szStringOut [DS02]<br>            "H" -&#62; cTypeIn [ER001]<br>            BF mnTimeLastUpdated [UPMT] -&#62; mnNumberIn [MN29D9]</span></div><br>       BF szDataHora [DATETIME] = concat([BF szDataHora [DATETIME]], "_")<br>       BF szDataHora [DATETIME] = concat([BF szDataHora [DATETIME]], [BF szProgramId [PID]])<br>       BF szDataHora [DATETIME] = concat([BF szDataHora [DATETIME]], "_")<br>       BF szProgramId [PID] = lpad([BF mnSequencial [55SEQNCL]], "0", "10")<br>       BF szProgramId [PID] = substr([BF szProgramId [PID]], "4", "6")<br>       BF szDataHora [DATETIME] = concat([BF szDataHora [DATETIME]], [BF szProgramId [PID]])</div><br>  End If<span class='comment'><br>  //</span><br>  BF szProgramId [PID] = "N5701ZB"<span class='comment'><br>  //</span><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:284' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cOperacao [C9TYTT] is not equal to "V"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:284:hide' style='display: inline;'><span class='comment'><br>       //</span><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:286' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701ZB.FetchSingle  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:286:hide' style='display: inline;'><br>            <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>            <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:287' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:287:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:288' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701ZB.Insert  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:288:hide' style='display: inline;'><br>                 BF szDataHora [DATETIME] -&#62; TK Date and Time Stamp [DATETIME]<br>                 BF mnSequencial [55SEQNCL] -&#62; TK Sequencial [55SEQNCL]<br>                 BF szChvBilling [CHVBIL] -&#62; TK Chave no Billing [CHVBIL]<br>                 BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                 BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                 BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                 BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                 BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                 BF cCliAge [CLIAGE] -&#62; TK Identificador de Cliente ou Agência [CLIAGE]<br>                 BF mnCodAgencia [CMC1] -&#62; TK Commission Code 1 [CMC1]<br>                 BF mnCodRepresent [URAB] -&#62; TK User Reserved Number [URAB]<br>                 BF szCodCadastroOrigem [55CDCADO] -&#62; TK Codigo Cadastro na Origem [55CDCADO]<br>                 BF jdDataInicialCompet [SVDB] -&#62; TK Date - Beginning Service [SVDB]<br>                 BF jdDataFinalCompet [SVDE] -&#62; TK Date - Ending Service [SVDE]<br>                 BF mnQtdExemplares [QTDEXEM] -&#62; TK Quantidade de Exemplares [QTDEXEM]<br>                 BF mnVlrTotalBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                 BF mnVlrTotalLiquido [VLRTOTLI] -&#62; TK Valor Total Líquido [VLRTOTLI]<br>                 BF szCodTipoVenda [CODTPVEN] -&#62; TK Código do Tipo de Venda [CODTPVEN]<br>                 BF cCarteiraBanco [CARBAN] -&#62; TK Carteira ou Banco [CARBAN]<br>                 BF szNumeroBancario [AA15] -&#62; TK Alpha Spec. Data 15 [AA15]<br>                 BF jdDataVencimento [DDU] -&#62; TK Date - Due [DDUE]<br>                 BF szCondPagto [PTC] -&#62; TK Payment Terms Code [PTC]<br>                 BF szNrAutorizacao [NRAUTORI] -&#62; TK Número da Autorização [NRAUTORI]<br>                 BF cIndCarga [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                 BF cIndBruLiq [BRULIQ] -&#62; TK Identificador de Bruto ou Líquido [BRULIQ]<br>                 BF szCodOrigem [CODORIGE] -&#62; TK Código de Origem [CODORIGE]<br>                 BF szCentroCusto [MCU] -&#62; TK Business Unit [MCU]<br>                 BF mnCodVendedor [AN8R] -&#62; TK Related - Address Number [AN8R]<br>                 BF szAutorizador [AUTORIZA] -&#62; TK Nome do Autorizador [AUTORIZA]<br>                 BF szContrato [CTRT] -&#62; TK Contrato [CTRT]<br>                 BF szParcelaProtesto [SFX] -&#62; TK Document Pay Item [SFX]<br>                 BF mnValorTabela [ANQT] -&#62; TK Amount - Quoted [ANQT]<br>                 BF cIndFatMinimo [FATMIN] -&#62; TK Marca Faturamento Minimo [FATMIN]<br>                 BF cIndBasket [ACTAPP] -&#62; TK Applicable [ACTAPP]<br>                 BF cIndDesconto [EV02] -&#62; TK J.D. EnterpriseOne Event Point 02 [EV02]<br>                 BF szNomeAutorizador [AUTA] -&#62; TK Authorization Name [AUTA]<br>                 BF szTexto1 [DQ01] -&#62; TK Dialogue Text 01 [DQ01]<br>                 BF szTexto2 [DQ02] -&#62; TK Dialogue Text 02 [DQ02]<br>                 BF cInd1 [AA01] -&#62; TK Alpha Spec. Data 01 [AA01]<br>                 BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>                 BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>                 BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]<br>                 BF szUserId [USER] -&#62; TK User ID [USER]<br>                 BF szWorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                 BF szProgramId [PID] -&#62; TK Program ID [PID]<br>                 BF jdDateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                 BF mnTimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                 BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div></div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:289' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:289:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:290' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701ZB.Update  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:290:hide' style='display: inline;'><br>                 <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                 <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                 BF szChvBilling [CHVBIL] -&#62; TK Chave no Billing [CHVBIL]<br>                 BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>                 BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>                 BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>                 BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>                 BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>                 BF cCliAge [CLIAGE] -&#62; TK Identificador de Cliente ou Agência [CLIAGE]<br>                 BF mnCodAgencia [CMC1] -&#62; TK Commission Code 1 [CMC1]<br>                 BF mnCodRepresent [URAB] -&#62; TK User Reserved Number [URAB]<br>                 BF szCodCadastroOrigem [55CDCADO] -&#62; TK Codigo Cadastro na Origem [55CDCADO]<br>                 BF jdDataInicialCompet [SVDB] -&#62; TK Date - Beginning Service [SVDB]<br>                 BF jdDataFinalCompet [SVDE] -&#62; TK Date - Ending Service [SVDE]<br>                 BF mnQtdExemplares [QTDEXEM] -&#62; TK Quantidade de Exemplares [QTDEXEM]<br>                 BF mnVlrTotalBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>                 BF mnVlrTotalLiquido [VLRTOTLI] -&#62; TK Valor Total Líquido [VLRTOTLI]<br>                 BF szCodTipoVenda [CODTPVEN] -&#62; TK Código do Tipo de Venda [CODTPVEN]<br>                 BF cCarteiraBanco [CARBAN] -&#62; TK Carteira ou Banco [CARBAN]<br>                 BF szNumeroBancario [AA15] -&#62; TK Alpha Spec. Data 15 [AA15]<br>                 BF jdDataVencimento [DDU] -&#62; TK Date - Due [DDUE]<br>                 BF szCondPagto [PTC] -&#62; TK Payment Terms Code [PTC]<br>                 BF szNrAutorizacao [NRAUTORI] -&#62; TK Número da Autorização [NRAUTORI]<br>                 BF cIndCarga [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                 BF cIndBruLiq [BRULIQ] -&#62; TK Identificador de Bruto ou Líquido [BRULIQ]<br>                 BF szCodOrigem [CODORIGE] -&#62; TK Código de Origem [CODORIGE]<br>                 BF szCentroCusto [MCU] -&#62; TK Business Unit [MCU]<br>                 BF mnCodVendedor [AN8R] -&#62; TK Related - Address Number [AN8R]<br>                 BF szAutorizador [AUTORIZA] -&#62; TK Nome do Autorizador [AUTORIZA]<br>                 BF szContrato [CTRT] -&#62; TK Contrato [CTRT]<br>                 BF szParcelaProtesto [SFX] -&#62; TK Document Pay Item [SFX]<br>                 BF mnValorTabela [ANQT] -&#62; TK Amount - Quoted [ANQT]<br>                 BF cIndFatMinimo [FATMIN] -&#62; TK Marca Faturamento Minimo [FATMIN]<br>                 BF cIndBasket [ACTAPP] -&#62; TK Applicable [ACTAPP]<br>                 BF cIndDesconto [EV02] -&#62; TK J.D. EnterpriseOne Event Point 02 [EV02]<br>                 BF szNomeAutorizador [AUTA] -&#62; TK Authorization Name [AUTA]<br>                 BF szTexto1 [DQ01] -&#62; TK Dialogue Text 01 [DQ01]<br>                 BF szTexto2 [DQ02] -&#62; TK Dialogue Text 02 [DQ02]<br>                 BF cInd1 [AA01] -&#62; TK Alpha Spec. Data 01 [AA01]<br>                 BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>                 BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>                 BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]<br>                 BF szUserId [USER] -&#62; TK User ID [USER]<br>                 BF szWorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>                 BF szProgramId [PID] -&#62; TK Program ID [PID]<br>                 BF jdDateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>                 BF mnTimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>                 BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div></div><br>       End If<span class='comment'><br>       //</span><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:293' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='b688808d-f095-425f-89c7-519ebfc8f65c:293:hide' style='display: inline;'><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:294' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szStatus [LDCS] is equal to or empty "OK"<br>            And BF cOperacao [C9TYTT] is equal to "O"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:294:hide' style='display: inline;'><span class='comment'><br>                 //</span><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:296' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CargaPedidosPreFaturamentoBIF(N5701ZB.CargaPedidosPreFaturamentoBIF)<div id='b688808d-f095-425f-89c7-519ebfc8f65c:296:hide' style='display: inline;'><span class='parameters'><br>                      BF szDataHora [DATETIME] &#60;&#62; szDataHora [DATETIME]<br>                      BF mnSequencial [55SEQNCL] &#60;&#62; mnSequencial [55SEQNCL]<br>                      BF szChvBilling [CHVBIL] &#60;&#62; szChvBilling [CHVBIL]<br>                      BF szCodEmpresa [CEMP] &#60;&#62; szCodEmpresa [CEMP]<br>                      BF mnCodProduto [CODPRODU] &#60;&#62; mnCodProduto [CODPRODU]<br>                      BF szMesCompetencia [MSCP] &#60;&#62; szMesCompetencia [MSCP]<br>                      BF szAnoCompetencia [ANCP] &#60;&#62; szAnoCompetencia [ANCP]<br>                      BF mnNroPedidoBilling [IA10] &#60;&#62; mnNroPedidoBilling [IA10]<br>                      BF cCliAge [CLIAGE] &#60;&#62; cCliAge [CLIAGE]<br>                      BF mnCodAgencia [CMC1] &#60;&#62; mnCodAgencia [CMC1]<br>                      BF mnCodRepresent [URAB] &#60;&#62; mnCodRepresent [URAB]<br>                      BF szCodCadastroOrigem [55CDCADO] &#60;&#62; szCodCadastroOrigem [55CDCADO]<br>                      BF jdDataInicialCompet [SVDB] &#60;&#62; jdDataInicialCompet [SVDB]<br>                      BF jdDataFinalCompet [SVDE] &#60;&#62; jdDataFinalCompet [SVDE]<br>                      BF mnVlrTotalBruto [VLRTOTBR] &#60;&#62; mnVlrTotalBruto [VLRTOTBR]<br>                      BF mnVlrTotalLiquido [VLRTOTLI] &#60;&#62; mnVlrTotalLiquido [VLRTOTLI]<br>                      BF szCodTipoVenda [CODTPVEN] &#60;&#62; szCodTipoVenda [CODTPVEN]<br>                      BF cCarteiraBanco [CARBAN] &#60;&#62; cCarteiraBanco [CARBAN]<br>                      BF szNumeroBancario [AA15] &#60;&#62; szNumeroBancario [AA15]<br>                      BF jdDataVencimento [DDU] &#60;&#62; jdDataVencimento [DDU]<br>                      BF szCondPagto [PTC] &#60;&#62; szCondPagto [PTC]<br>                      BF szNrAutorizacao [NRAUTORI] &#60;&#62; szNrAutorizacao [NRAUTORI]<br>                      BF cIndCarga [EV01] &#60;&#62; cIndCarga [EV01]<br>                      BF cIndBruLiq [BRULIQ] &#60;&#62; cIndBruLiq [BRULIQ]<br>                      BF szCodOrigem [CODORIGE] &#60;&#62; szCodOrigem [CODORIGE]<br>                      BF szCentroCusto [MCU] &#60;&#62; szCentroCusto [MCU]<br>                      BF mnCodVendedor [AN8R] &#60;&#62; mnCodVendedor [AN8R]<br>                      BF szAutorizador [AUTORIZA] &#60;&#62; szAutorizador [AUTORIZA]<br>                      BF szContrato [CTRT] &#60;&#62; szContrato [CTRT]<br>                      BF szParcelaProtesto [SFX] &#60;&#62; szParcelaProtesto [SFX]<br>                      BF mnValorTabela [ANQT] &#60;&#62; mnValorTabela [ANQT]<br>                      BF cIndFatMinimo [FATMIN] &#60;&#62; cIndFatMinimo [FATMIN]<br>                      BF cIndBasket [ACTAPP] &#60;&#62; cIndBasket [ACTAPP]<br>                      BF cIndDesconto [EV02] &#60;&#62; cIndDesconto [EV02]<br>                      BF szNomeAutorizador [AUTA] &#60;&#62; szNomeAutorizador [AUTA]<br>                      BF szTexto1 [DQ01] &#60;&#62; szTexto1 [DQ01]<br>                      BF szTexto2 [DQ02] &#60;&#62; szTexto2 [DQ02]<br>                      BF cInd1 [AA01] &#60;&#62; cInd1 [AA01]<br>                      BF szMensagem [MGTX] &#60;&#62; szMensagem [MGTX]<br>                      BF cOperacao [C9TYTT] &#60;&#62; cOperacao [C9TYTT]<br>                      BF szStatus [LDCS] &#60;&#62; szStatus [LDCS]<br>                      BF szUserId [USER] &#60;&#62; szUserId [USER]<br>                      BF szWorkStationId [JOBN] &#60;&#62; szWorkStationId [JOBN]<br>                      BF szProgramId [PID] &#60;&#62; szProgramId [PID]<br>                      BF jdDateUpdated [UPMJ] &#60;&#62; jdDateUpdated [UPMJ]<br>                      BF mnTimeLastUpdated [UPMT] &#60;&#62; mnTimeLastUpdated [UPMT]<br>                      BF mnNrPedido [NRPEDIDO] &#60;&#62; mnNrPedido [NRPEDIDO]</span></div><span class='comment'><br>                 //</span></div><br>           <div id='b688808d-f095-425f-89c7-519ebfc8f65c:298' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:298:hide' style='display: inline;'><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:299' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szStatus [LDCS] is equal to or empty "OK"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:299:hide' style='display: inline;'><br>                      BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Solicitação de faturamento inserida (F5701ZB)#")<br>                      BF cOperacao [C9TYTT] = "S"<br>                      BF szStatus [LDCS] = "OK"</div><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:303' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:303:hide' style='display: inline;'><br>                      BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Pedido atualizado(F5701ZB)/Não gerado no Faturamento(F570116)#")<br>                      BF cOperacao [C9TYTT] = "N"<br>                      BF szStatus [LDCS] = "ER"</div><br>                 End If<span class='comment'><br>                 //</span><br>                <div id='b688808d-f095-425f-89c7-519ebfc8f65c:309' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5701ZB.Update  [Index 1: ChvPrincipal]<div id='b688808d-f095-425f-89c7-519ebfc8f65c:309:hide' style='display: inline;'><br>                      <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                      <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                      BF cIndCarga [EV01] -&#62; TK J.D. EnterpriseOne Event Point 01 [EV01]<br>                      BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>                      BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div><span class='comment'><br>                 //</span></div><br>            End If</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:312' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:312:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Erro na gravação do Pedido (F5701ZB)#")<br>            BF cOperacao [C9TYTT] = "N"<br>            BF szStatus [LDCS] = "ER"</div><br>       End If</div><br> <div id='b688808d-f095-425f-89c7-519ebfc8f65c:317' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:317:hide' style='display: inline;'><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:318' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szStatus [LDCS] is equal to "OK"<div id='b688808d-f095-425f-89c7-519ebfc8f65c:318:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Pedido apto a ser transmitido#")<br>            BF cOperacao [C9TYTT] = "S"</div><br>      <div id='b688808d-f095-425f-89c7-519ebfc8f65c:321' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='b688808d-f095-425f-89c7-519ebfc8f65c:321:hide' style='display: inline;'><br>            BF cOperacao [C9TYTT] = "N"</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span></div></div><div class='section'>EVENTS<div class='objectheader'>NER: CargaPedidosPreFaturamentoCarga2 <BR>Event GUID: 484e4b0c-0221-4fd1-a3fc-fd3c10b4718b</div><div class='er'><div class='dstrmembers'><B>Data Structure: D5711ZB - WS - BIF FT - Tabela de Pedidos - Distrib. G/L (Produtinhos)</B><BR>BF szDataHora [DATETIME]<BR>BF mnSequencial [55SEQNCL]<BR>BF szChvBilling [CHVBIL]<BR>BF szCodEmpresa [CEMP]<BR>BF mnCodProduto [CODPRODU]<BR>BF szMesCompetencia [MSCP]<BR>BF szAnoCompetencia [ANCP]<BR>BF mnNroPedidoBilling [IA10]<BR>BF mnCodProdutinho [NRPUBLI]<BR>BF szCentroCusto [AA07]<BR>BF mnVlrTotalBruto [VLRTOTBR]<BR>BF szSubConta [SBL]<BR>BF szMensagem [MGTX]<BR>BF cOperacao [C9TYTT]<BR>BF szStatus [LDCS]<BR>BF szUserId [USER]<BR>BF szWorkStationId [JOBN]<BR>BF szProgramId [PID]<BR>BF jdDateUpdated [UPMJ]<BR>BF mnTimeLastUpdated [UPMT]<BR>BF mnNrPedido [NRPEDIDO]<BR>BF mnVlrTotalBrutoAcm [VLRTOTBR]<BR></div>----------------------------------------</BR>Event Level Variables</BR>----------------------------------------</BR>evt_szStringAux [AA12]<br>evt_mnNumAux [IA12]<br>evt_PostingEditCostCenter [PECC]<br>evt_SubledgerInactiveCode [SBLI]<br>evt_cCarregaSN [EV01]<br>evt_szProduto_EDCT [EDCT]<br>evt_szProdutinho_EDCT [EDCT]<br>evt_LogUsuario [USER]<br>evt_LogEstacao [JOBN]<br>evt_LogPrograma [PID]<br>evt_LogData [UPMJ]<br>evt_LogHora [UPMT]<br>evt_szStatusAux [LDCS]<br>----------------------------------------</BR><span class='comment'>  //</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:2' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:2:hide' style='display: inline;'><span class='parameters'><br>       VA evt_LogUsuario [USER] &#60;- szUserName [USER]<br>       VA evt_LogData [UPMJ] &#60;- jdDate [DTE]<br>       VA evt_LogHora [UPMT] &#60;- mnTime [TME0]<br>       VA evt_LogEstacao [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><br>  VA evt_LogPrograma [PID] = "N5701ZB"<span class='comment'><br>  //</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:5' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>CargaPedidosPreFaturamentoValida(N5701ZB.CargaPedidosPreFaturamentoValida)<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:5:hide' style='display: inline;'><span class='parameters'><br>       BF szChvBilling [CHVBIL] -&#62; szChvBilling [CHVBIL]<br>       BF szCodEmpresa [CEMP] -&#62; szCodEmpresa [CEMP]<br>       BF mnCodProduto [CODPRODU] -&#62; mnCodProduto [CODPRODU]<br>       BF szMesCompetencia [MSCP] &#60;&#62; szMesCompetencia [MSCP]<br>       BF szAnoCompetencia [ANCP] &#60;&#62; szAnoCompetencia [ANCP]<br>       BF mnNroPedidoBilling [IA10] -&#62; mnNroPedidoBilling [IA10]<br>       BF szMensagem [MGTX] &#60;- szMensagem [MGTX]</span></div><span class='comment'><br>  //</span><span class='comment'><br>  // Produtinho</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:8' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodProdutinho [NRPUBLI] is equal to "0"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:8:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Produtinho não informado#")</div><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:10' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:10:hide' style='display: inline;'><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:11' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodProdutinho [NRPUBLI] is equal to BF mnCodProduto [CODPRODU]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:11:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Produtinho igual ao Produto#")</div><br>       End If<br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:14' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:14:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodProdutinho [NRPUBLI] = TK Código do Produto [CODPRODU]</span><br>            VA evt_szProdutinho_EDCT [EDCT] &#60;- TK EDI - Document Type [EDCT]</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:15' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:15:hide' style='display: inline;'><br>           <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:16' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:16:hide' style='display: inline;'><br>                 <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                 VA evt_szProduto_EDCT [EDCT] &#60;- TK EDI - Document Type [EDCT]</div><br>           <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:17' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is not equal to CO SUCCESS<br>            Or VA evt_szProdutinho_EDCT [EDCT] is not equal to VA evt_szProduto_EDCT [EDCT]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:17:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Produto/Produtinho inválidos (F570112.EDCT)#")</div><br>            End If</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:20' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:20:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Produtinho inválido (F570112)#")</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Centro de Custo</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:26' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szCentroCusto [AA07] is equal to or empty &#60;Blank&#62;<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:26:hide' style='display: inline;'><span class='comment'><br>       // Centro de Custo (pode não informar e assumir o do Produtinho)</span></div><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:28' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:28:hide' style='display: inline;'><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:29' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>RemoveNonNumericCharsFromStr(N5504601.RemoveNonNumericCharsFromStr)<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:29:hide' style='display: inline;'><span class='parameters'><br>            BF szCentroCusto [AA07] &#60;&#62; szString [DS01]</span></div><br>       VA evt_mnNumAux [IA12] = length([BF szCentroCusto [AA07]])<br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:31' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA12] is less than "4"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:31:hide' style='display: inline;'><br>            BF szCentroCusto [AA07] = lpad([BF szCentroCusto [AA07]], "0", "4")</div><br>       End If<br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:34' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA12] is equal to "4"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:34:hide' style='display: inline;'><br>            BF szCentroCusto [AA07] = concat([BF szCodEmpresa [CEMP]], [BF szCentroCusto [AA07]])</div><br>       End If<br>       VA evt_szStringAux [AA12] = lpad([BF szCentroCusto [AA07]], &#60;Blank&#62;, "12")<br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:38' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F0006.FetchSingle  [Index 1: Cost Center]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:38:hide' style='display: inline;'><br>            <span class='iokey'>VA evt_szStringAux [AA12] = TK Business Unit [MCU]</span><br>            VA evt_PostingEditCostCenter [PECC] &#60;- TK Posting Edit - Business Unit [PECC]<br>            VA evt_SubledgerInactiveCode [SBLI] &#60;- TK Subledger Inactive Code [SBLI]</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:39' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:39:hide' style='display: inline;'><br>           <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:40' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_PostingEditCostCenter [PECC] is equal to "N"<br>            Or VA evt_SubledgerInactiveCode [SBLI] is equal to "I"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:40:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "CCusto inativado (F0006.PECC/SBLI)#")</div><br>            End If</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:43' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:43:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "CCusto inválido (F0006)#")</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // SubConta - ?</span><span class='comment'><br>  //</span><span class='comment'><br>  // Valor a ser Contabilizado</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:51' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnVlrTotalBruto [VLRTOTBR] is equal to "0"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:51:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Valor não informado#")</div><br>  End If<span class='comment'><br>  //</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:55' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szMensagem [MGTX] is equal to or empty &#60;Blank&#62;<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:55:hide' style='display: inline;'><br>       BF szStatus [LDCS] = "OK"</div><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:57' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:57:hide' style='display: inline;'><br>       BF szStatus [LDCS] = "ER"</div><br>  End If<span class='comment'><br>  //</span><span class='comment'><br>  // Tipo de Processamento = V - Validar, apenas verificar as inconsistências</span><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:62' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF cOperacao [C9TYTT] is not equal to "V"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:62:hide' style='display: inline;'><br>       VA evt_cCarregaSN [EV01] = "S"<br>       VA evt_szStatusAux [LDCS] = "OK"<span class='comment'><br>       //</span><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:88' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:88:hide' style='display: inline;'><span class='parameters'><br>            BF szUserId [USER] &#60;- szUserName [USER]<br>            BF jdDateUpdated [UPMJ] &#60;- jdDate [DTE]<br>            BF mnTimeLastUpdated [UPMT] &#60;- mnTime [TME0]<br>            BF szWorkStationId [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><span class='comment'><br>       //</span><br>       BF szProgramId [PID] = "N5701ZB"<span class='comment'><br>       //</span><span class='comment'><br>       // Verifica se já existe para garantir que será gravada e evitar erro no WS</span><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:93' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchSingle  [Index 1: ChvPrincipal]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:93:hide' style='display: inline;'><br>            <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>            <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>            <span class='iokey'>BF mnCodProdutinho [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>            <span class='iokey'>BF szSubConta [SBL] = TK Subledger - G/L [SBL]</span></div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:94' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:94:hide' style='display: inline;'><br>            BF mnSequencial [55SEQNCL] = [BF mnSequencial [55SEQNCL]]*100<br>           <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:96' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchSingle  [Index 1: ChvPrincipal]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:96:hide' style='display: inline;'><br>                 <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                 <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                 <span class='iokey'>BF mnCodProdutinho [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>                 <span class='iokey'>BF szSubConta [SBL] = TK Subledger - G/L [SBL]</span></div><br>           <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:97' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>While SV File_IO_Status is equal to CO SUCCESS<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:97:hide' style='display: inline;'><br>                 BF mnSequencial [55SEQNCL] = [BF mnSequencial [55SEQNCL]]+1<br>                <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:99' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.FetchSingle  [Index 1: ChvPrincipal]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:99:hide' style='display: inline;'><br>                      <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>                      <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>                      <span class='iokey'>BF mnCodProdutinho [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>                      <span class='iokey'>BF szSubConta [SBL] = TK Subledger - G/L [SBL]</span></div></div><br>            End While</div><br>       End If<span class='comment'><br>       //</span><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:103' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Insert  [Index 1: ChvPrincipal]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:103:hide' style='display: inline;'><br>            BF szDataHora [DATETIME] -&#62; TK Date and Time Stamp [DATETIME]<br>            BF mnSequencial [55SEQNCL] -&#62; TK Sequencial [55SEQNCL]<br>            BF szChvBilling [CHVBIL] -&#62; TK Chave no Billing [CHVBIL]<br>            BF szCodEmpresa [CEMP] -&#62; TK Codigo da Empresa [CEMP]<br>            BF mnCodProduto [CODPRODU] -&#62; TK Código do Produto [CODPRODU]<br>            BF szMesCompetencia [MSCP] -&#62; TK Mes - Competencia [MSCP]<br>            BF szAnoCompetencia [ANCP] -&#62; TK Data de Competencia [ANCP]<br>            BF mnNroPedidoBilling [IA10] -&#62; TK Numeric Spec. Data 10 [IA10]<br>            BF mnCodProdutinho [NRPUBLI] -&#62; TK Número total de publicações [NRPUBLI]<br>            BF szCentroCusto [AA07] -&#62; TK Alpha Spec. Data 07 [AA07]<br>            BF mnVlrTotalBruto [VLRTOTBR] -&#62; TK Valor Total Bruto [VLRTOTBR]<br>            BF szSubConta [SBL] -&#62; TK Subledger - G/L [SBL]<br>            BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>            BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>            BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]<br>            BF szUserId [USER] -&#62; TK User ID [USER]<br>            BF szWorkStationId [JOBN] -&#62; TK Work Station ID [JOBN]<br>            BF szProgramId [PID] -&#62; TK Program ID [PID]<br>            BF jdDateUpdated [UPMJ] -&#62; TK Date - Updated [UPMJ]<br>            BF mnTimeLastUpdated [UPMT] -&#62; TK Time - Last Updated [UPMT]<br>            BF mnNrPedido [NRPEDIDO] -&#62; TK Número do Pedido [NRPEDIDO]</div><span class='comment'><br>       //</span><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:105' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:105:hide' style='display: inline;'><span class='comment'><br>            //</span><br>            BF mnVlrTotalBrutoAcm [VLRTOTBR] = [BF mnVlrTotalBrutoAcm [VLRTOTBR]]+[BF mnVlrTotalBruto [VLRTOTBR]]<span class='comment'><br>            //</span><br>            BF szMensagem [MGTX] = "CCusto carregado com sucesso#"<br>            BF cOperacao [C9TYTT] = "S"</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:111' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:111:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = "Erro na gravação do CCusto#"<br>            BF cOperacao [C9TYTT] = "N"<br>            BF szStatus [LDCS] = "ER"</div><br>       End If<span class='comment'><br>       //</span><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:117' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F5711ZB.Update  [Index 1: ChvPrincipal]<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:117:hide' style='display: inline;'><br>            <span class='iokey'>BF szDataHora [DATETIME] = TK Date and Time Stamp [DATETIME]</span><br>            <span class='iokey'>BF mnSequencial [55SEQNCL] = TK Sequencial [55SEQNCL]</span><br>            <span class='iokey'>BF mnCodProdutinho [NRPUBLI] = TK Número total de publicações [NRPUBLI]</span><br>            BF szMensagem [MGTX] -&#62; TK Message Text [MGTX]<br>            BF cOperacao [C9TYTT] -&#62; TK Processing Type [C9TYTT]<br>            BF szStatus [LDCS] -&#62; TK Status - Confirmed Load [LDCS]</div><span class='comment'><br>       //</span></div><br> <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:120' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:120:hide' style='display: inline;'><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:121' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szStatus [LDCS] is equal to "OK"<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:121:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = "CCusto apto a ser transmitido#"<br>            BF cOperacao [C9TYTT] = "S"</div><br>      <div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:124' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='484e4b0c-0221-4fd1-a3fc-fd3c10b4718b:124:hide' style='display: inline;'><br>            BF cOperacao [C9TYTT] = "N"</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span></div></div><div class='section'>EVENTS<div class='objectheader'>NER: CargaPedidosPreFaturamentoValida <BR>Event GUID: c2a23da6-10f9-44ae-a910-6b1e4cb0339e</div><div class='er'><div class='dstrmembers'><B>Data Structure: D5701ZBA - WS - BIF FT - Tabela de Pedidos-Crítica Campos Chave do Ped </B><BR>BF szChvBilling [CHVBIL]<BR>BF szCodEmpresa [CEMP]<BR>BF mnCodProduto [CODPRODU]<BR>BF szMesCompetencia [MSCP]<BR>BF szAnoCompetencia [ANCP]<BR>BF mnNroPedidoBilling [IA10]<BR>BF szMensagem [MGTX]<BR>BF mnAnoMesEmissao [ANMEEMI]<BR></div>----------------------------------------</BR>Event Level Variables</BR>----------------------------------------</BR>evt_szStringAux [AA10]<br>evt_Company [CO]<br>evt_ChvBilling [CHVBIL]<br>evt_mnNumAux [IA10]<br>evt_LogUsuario [USER]<br>evt_LogEstacao [JOBN]<br>evt_LogPrograma [PID]<br>evt_LogData [UPMJ]<br>evt_LogHora [UPMT]<br>----------------------------------------</BR><span class='comment'>  //</span><br> <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:2' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>GetAuditInfo(B9800100.GetAuditInfo)<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:2:hide' style='display: inline;'><span class='parameters'><br>       VA evt_LogUsuario [USER] &#60;- szUserName [USER]<br>       VA evt_LogData [UPMJ] &#60;- jdDate [DTE]<br>       VA evt_LogHora [UPMT] &#60;- mnTime [TME0]<br>       VA evt_LogEstacao [JOBN] &#60;- szWorkstation_UserId [JOBN]</span></div><br>  VA evt_LogPrograma [PID] = "N5701ZB"<span class='comment'><br>  //</span><span class='comment'><br>  // Valida os campos da chave do Pedido / Distribuição Contábil</span><span class='comment'><br>  //</span><span class='comment'><br>  // Código do Produto</span><br> <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:8' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnCodProduto [CODPRODU] is equal to "0"<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:8:hide' style='display: inline;'><br>       BF szMensagem [MGTX] = "Produto não informado#"</div><br> <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:10' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:10:hide' style='display: inline;'><span class='comment'><br>       // O Produto deve estar cadastrado na F570112</span><br>      <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:12' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570112.FetchSingle  [Index 1: CodProduto]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:12:hide' style='display: inline;'><br>            <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>            VA evt_Company [CO] &#60;- TK Company [CO]<br>            VA evt_ChvBilling [CHVBIL] &#60;- TK Chave no Billing [CHVBIL]<br>            BF mnAnoMesEmissao [ANMEEMI] &#60;- TK Ano/mês de Emissão [ANMEEMI]</div><br>      <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:13' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:13:hide' style='display: inline;'><span class='comment'><br>            //</span><span class='comment'><br>            // A Empresa deve ser a mesma do Produto</span><br>            VA evt_szStringAux [AA10] = concat("00", [BF szCodEmpresa [CEMP]])<br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:17' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_szStringAux [AA10] is not equal to VA evt_Company [CO]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:17:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = "Empresa inválida (F570112)#"</div><br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:19' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:19:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = &#60;NULL&#62;</div><br>            End If<span class='comment'><br>            //</span><span class='comment'><br>            // A Chave do Billing deve ser a mesma do Produto</span><br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:24' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szChvBilling [CHVBIL] is not equal to VA evt_ChvBilling [CHVBIL]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:24:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Chave do Billing inválida (F570112)#")</div><br>            End If<span class='comment'><br>            //</span><br>            VA evt_szStringAux [AA10] = "*"<br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:29' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF szMesCompetencia [MSCP] is equal to VA evt_szStringAux [AA10]<br>            And BF szAnoCompetencia [ANCP] is equal to VA evt_szStringAux [AA10]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:29:hide' style='display: inline;'><span class='comment'><br>                 // Não dá erro e passou a assumir o Ano/Mês do Faturamento ao BIFar</span></div><br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:35' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:35:hide' style='display: inline;'><span class='comment'><br>                 // O Ano e Mês de Competência devem ser os mesmos do Produto</span><br>                 VA evt_mnNumAux [IA10] = [BF szAnoCompetencia [ANCP]]*100<br>                 VA evt_mnNumAux [IA10] = [VA evt_mnNumAux [IA10]]+[BF szMesCompetencia [MSCP]]<br>                <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:39' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If VA evt_mnNumAux [IA10] is not equal to BF mnAnoMesEmissao [ANMEEMI]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:39:hide' style='display: inline;'><br>                      BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "AnoMês de Competência inválidos (F570112)#")</div><br>                 End If</div><br>            End If</div><br>      <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:43' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:43:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = "Produto inválido (F570112)#"</div><br>       End If<span class='comment'><br>       //</span><span class='comment'><br>       // Número do Pedido no Billing</span><br>      <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:48' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If BF mnNroPedidoBilling [IA10] is equal to "0"<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:48:hide' style='display: inline;'><br>            BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Número do Pedido no Billing não informado#")</div><br>      <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:50' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>Else<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:50:hide' style='display: inline;'><br>            VA evt_szStringAux [AA10] = [BF mnNroPedidoBilling [IA10]]<br>            VA evt_ChvBilling [CHVBIL] = "BLQ"<br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:53' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.Select  [Index 9: CodProd,AnoMesEntr,NrPedBil]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:53:hide' style='display: inline;'><br>                 <span class='iokey'>BF mnCodProduto [CODPRODU] = TK Código do Produto [CODPRODU]</span><br>                 <span class='iokey'>BF mnAnoMesEmissao [ANMEEMI] = TK Ano e Mês de Entrada [ANMESENT]</span><br>                 <span class='iokey'>VA evt_szStringAux [AA10] = TK Número do pedido no Billing [NRPEDBIL]</span><br>                 <span class='iokey'>VA evt_ChvBilling [CHVBIL] = TK Código de Status [CODSTAT]</span></div><br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:54' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>F570116.FetchNext  [Index 1: CodProd, AnoMesEntrada, NrPedi]<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:54:hide' style='display: inline;'><br>                 VA evt_ChvBilling [CHVBIL] &#60;- TK Código de Status [CODSTAT]</div><br>           <div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:55' class='expand2' onclick='ExpandCollapse(this.id);'>-</div>If SV File_IO_Status is equal to CO SUCCESS<div id='c2a23da6-10f9-44ae-a910-6b1e4cb0339e:55:hide' style='display: inline;'><br>                 BF szMensagem [MGTX] = concat([BF szMensagem [MGTX]], "Número do Pedido no Billing bloquedo no JDE (F570116.CODSTA#")</div><br>            End If</div><br>       End If</div><br>  End If<span class='comment'><br>  //</span></div></div></body></html>